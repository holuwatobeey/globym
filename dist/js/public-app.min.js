/*!
 LivelyCart Pro
 version: 3.x
 --------------------------------------------------------------------- 
 Build Timestamp: 1569677944
 Build Date: Sat Sep 28 2019 19:09:04 GMT+0530 (India Standard Time)
--------------------------------------------------------------------- */
!function(){"use strict";angular.module("PublicApp",["ngMessages","ngAnimate","ngSanitize","ui.router","ngNotify","ngDialog","angular-loading-bar","selectize","lw.core.utils","lw.security.main","lw.auth","rzModule","lw.data.datastore","lw.data.datatable","NgSwitchery","lw.form.main","app.service","app.http","app.notification","app.form","app.directives","PublicApp.master","UserApp.login","UserApp.logout","UserApp.forgotPassword","UserApp.resendActivationEmail","UserApp.resetPassword","UserApp.changePassword","UserApp.changeEmail","UserApp.register","UserApp.contact","UserApp.profile","UserApp.profileEdit","UserApp.address","UserApp.Addresslist","UserApp.editAddress","PublicApp.display.products","PublicApp.display.featured.products","PublicApp.productDetails","ManageProductApp.allProductReviews","ManageProductApp.allProductQuestions","PublicApp.productDetailsDialog","PublicApp.page.details","PublicApp.ShoppingCart.cart","PublicApp.ShoppingCart.orderSummary","PublicApp.Order.list","PublicApp.Order.details","PublicApp.Order.cancel","PublicApp.Order.log","PublicApp.address","PublicApp.myWishList","PublicApp.myRatingList"]).run(["__Auth","$state","$rootScope",function(t,e,a){t.verifyRoute(e),a.__ngSupport=window.__ngSupport}]).config(["$stateProvider","$urlRouterProvider","$interpolateProvider",function(t,e,a){a.startSymbol("[["),a.endSymbol("]]")}])}(),function(){"use strict";angular.module("PublicApp.master",[]).controller("PublicController",["$rootScope","$scope","__Auth","appServices","appNotify","__DataStore","$state","$compile","__Utils","$q",function(a,o,t,r,e,s,i,n,d,c){var l=this;t.refresh(function(t){l.auth_info=t}),l.unhandledError=function(){e.error(__globals.getReactionMessage(19))},a.$on("lw.events.state.change_start",function(){r.closeAllDialog()}),a.$on("lw.auth.event.reset",function(t,e){l.auth_info=e}),a.$on("lw.form.event.process.started",function(t,e){$("button.lw-btn-process span").addClass("fa fa-spinner fa-spin"),$("button.lw-btn-process").prop("disabled",!0)}),a.$on("lw.form.event.process.finished",function(t,e){$("button.lw-btn-process span").removeClass("fa fa-spinner fa-spin"),$("button.lw-btn-process").prop("disabled",!1)}),a.$on("lw.form.event.fetch.started",__globals.showFormLoader),a.$on("lw.datastore.event.fetch.finished",__globals.hideFormLoader),a.$on("lw.form.event.process.error",l.unhandledError),a.$on("lw.datastore.event.fetch.error",l.unhandledError),a.$on("lw.update.cart.string",function(t,e){l.cart_string=e.cart_string,l.status=e.status,1==l.status&&($(".lw-shopping-cart-btn").fadeIn("highlight","#FFF",5e3),l.getCartString()),_.has(e,"showNotification")&&l.toggleShoppinCartButtonShow()}),a.$on("lw.product.compare.count",function(t,e){e&&l.getProductCompareCount()}),l.store_info=window.store_info,a.isPublicApp=window.__appImmutables.publicApp,l.formatAmount=function(t,e,a,o){return __globals.priceFormat(t,e,a)},$.typeahead({input:".lw-product-search-input",minLength:1,order:"asc",dynamic:!0,delay:500,hint:!1,searchOnFocus:!1,emptyTemplate:"no search result found",source:{searchResult:{display:"name",ajax:function(t,e){return{type:"GET",path:"searchResult",url:d.apiURL({apiURL:"product.suggest.search",searchQuery:t}),callback:{done:function(t){return t.data}}}}}},callback:{onClick:function(t,e,a,o){o.preventDefault(),window.location=a.searchUrl},onSubmit:function(t,e,a,o){o.preventDefault();var r=$("#lw-product-search-input").val();r&&(window.location=d.apiURL("product.search")+"?search_term="+r)}},debug:!0}),l.dialogStatus=!1,l.showDetailsDialog=function(t,e){r.showDialog({categoryID:null,productID:e,pageType:"",dialogStatus:l.dialogStatus},{templateUrl:__globals.getTemplateURL("product.details-dialog"),controller:"ProductDetailsDialogController as productDetailsDialogCtrl",resolve:{GetProductDetails:function(){var a=c.defer();return s.fetch({apiURL:"product.quick.view.details.support_data",productID:e,"categoryID?":l.categoryID},{fresh:!0}).success(function(e){r.processResponse(e,null,function(t){a.resolve(e)})}),a.promise}}},function(t){})},l.addProductCompare=function(t){s.post({apiURL:"product.compare.add",productId:t},l).success(function(t){var e=t.data;r.processResponse(t,null,function(t){if(1==t){e.countCompareProduct;o.$emit("lw.product.compare.count",!0)}})})},l.setDocumentPageTitle=function(t){var e;e=_.isEmpty(l.store_info.value)?t:l.store_info.value+" - "+t,angular.element(document).prop("title",e)},l.store_info=window.store_info,a.$on("lw.current.route.name",function(t,e){l.routeStatus=e.routeStatus}),l.themeColors=__globals.getAppImmutables("config").theme_colors,l.setThemeColor=function(t){s.fetch({apiURL:"theme_color",colorName:t}).success(function(t){$("div.lw-store-header, div.lw-current-logo-conatiner").css("background-color","#"+t)})},l.showCurrencyNotification=function(t){e.info(t,{duration:5e3})},l.showHideThemeContainer=function(){$(".lw-theme-color-container").hasClass("lw-theme-container-active")?($(".lw-theme-color-container").removeClass("lw-theme-container-active"),$(".lw-switch span:first").replaceWith("<i class='fa fa-cog'></i>")):($(".lw-theme-color-container").addClass("lw-theme-container-active"),$(".lw-switch i:first").replaceWith("<span>&times;</span>"))},l.showloginDialog=function(){var t=l.auth_info.currentRouteName;$("html").hasClass("lw-public-login-page-active")||($("html").addClass("lw-public-login-page-active"),"user.login"!=t&&r.loginRequiredDialog("login-dialog",null,function(t){$("html").removeClass("lw-public-login-page-active"),s.reset(),t&&($("#lwLoginBtn").hide(),$("#lwRegisterBtn").hide(),a.$broadcast("lw.login-success",!0))}))},l.openCartDialog=function(t){a.$broadcast("lw.isCart.dialog",{dialog:t}),1==t?$("html, body").animate({scrollTop:$("#elementtoScrollToID").offset().top},200):$("html").hasClass("lw-shopping-cart-dialog-active")||($("html").addClass("lw-shopping-cart-dialog-active"),r.showDialog(l,{templateUrl:__globals.getTemplateURL("shoppingCart.cart-view")},function(t){$("html").removeClass("lw-shopping-cart-dialog-active")}),a.$on("ngDialog.opened",function(t,e){$("div.lw-shopping-cart-dialog-content").length&&$("div.ngdialog-content").addClass("lw-shopping-cart-dialog")}))},l.loadCartStatus=!1,l.getProductCompareCount=function(t){s.fetch("product.compare.read.product_count").success(function(t){var e=t.data;r.processResponse(t,null,function(t){l.totalProductCompare=e.totalProductCompare})})},l.removeAllProductInComapre=function(){s.post({apiURL:"product.compare.remove_all"},l).success(function(t){var e=t.data;r.processResponse(t,null,function(t){if(1==t){e.countCompareProduct;o.$emit("lw.product.compare.count",!0)}})})},l.loadCartStatus=!1,l.getCartString=function(a){s.fetch("cart.update.cart.string").success(function(e){r.processResponse(e,null,function(t){l.cart_string=e.data.cartString,l.cartData=e.data.cartItems,l.totalItems=e.data.totalItems,l.cartTotal=e.data.cartTotal,l.loadPage=e.reaction,l.loadCartStatus=!0,l.totalProductCompare=e.data.totalProductCompare,l.status,a&&l.toggleShoppinCartButtonShow()})})},l.getCartString(),l.toggleShoppinCartButtonShow=function(){var t=$(".lw-dynamic-shopping-cart-btn").addClass("lw-bring-in-light"),e=_.delay(function(){t.removeClass("lw-bring-in-light")},3e3);t.hover(function(){clearInterval(e)},function(){t.removeClass("lw-bring-in-light")})},l.isLoggedIn=function(){return l.auth_info.authorized},a.isLoggedIn=function(){return l.auth_info.authorized},l.isAdmin=function(){return l.isLoggedIn()&&1===l.auth_info.designation},l.getUserFullName=function(){if(l.isLoggedIn())return l.auth_info.profile.first_name+" "+l.auth_info.profile.last_name},a.$on("lw-open-login-dialog",function(t,e){t.preventDefault(),r.loginRequiredDialog("login-dialog",e.data,function(t,e){s.reset(),t&&a.$broadcast("lw.login-success",!0)})})}])}(),function(){"use strict";angular.module("PublicApp.display.products",[]).controller("ProductsController",["$scope","__DataStore","appServices","__Utils","$state","$compile","appNotify","$rootScope","$q",function(r,s,i,n,t,d,e,a,o){var c=this;c.pageData={},c.pageStatus=!1,c.products=[],c.catID=t.params.categoryID,c.showPagination=!1,c.paginationData=__globals.getAppJSItem("productPaginationData"),c.remainingItems=c.paginationData.remainingItems,c.formattedRemainingItem=c.paginationData.formattedRemainingItem,c.hasMorePages=c.paginationData.hasMorePages,c.categoryData=__globals.getAppJSItem("categoryData"),c.sortOrderUrl=__globals.getAppJSItem("sortOrderUrl"),c.productPrices=__globals.getAppJSItem("productPrices"),c.filterPrices=__globals.getAppJSItem("filterPrices"),c.currentRoute=__globals.getAppJSItem("currentRoute"),c.searchTerm=__globals.getAppJSItem("searchTerm"),c.categoryID=__globals.getAppJSItem("categoryID"),c.pageType=__globals.getAppJSItem("pageType"),c.selectedBrandID=__globals.getAppJSItem("brandID"),c.currenCode=__globals.getAppJSItem("currenSymbol"),c.filterUrl=__globals.getAppJSItem("filterUrl"),c.itemLoadType=parseInt(__globals.getAppJSItem("itemLoadType"));var l=!1;if(c.addProductCompare=function(t){s.post({apiURL:"product.compare.add",productId:t},c).success(function(t){var e=t.data;i.processResponse(t,null,function(t){if(1==t){e.countCompareProduct;r.$emit("lw.product.compare.count",!0)}})})},c.isAddedInWishlist=!1,c.addToWishlist=function(e){window.__appImmutables.auth_info.authorized?s.post({apiURL:"product.wishlist.add_process",productId:e},c).success(function(t){t.data.showLoggedInDialog&&i.loginRequiredDialog("login-dialog",null,function(t){}),i.processResponse(t,null,function(t){1==t&&($(".lw-remove-wishlist-"+e).show(),$(".lw-add-wishlist-"+e).hide(),c.isAddedInWishlist=!0)})}):i.loginRequiredDialog("login-dialog",null,function(t){})},c.removeFromWishlist=function(e){s.post({apiURL:"product.wishlist.remove_process",productId:e},c).success(function(t){t.data.showLoggedInDialog&&i.loginRequiredDialog("login-dialog",null,function(t){}),i.processResponse(t,null,function(t){1==t&&($(".lw-add-wishlist-"+e).show(),$(".lw-remove-wishlist-"+e).hide(),c.isAddedInWishlist=!1)})})},c.getProductWislistData=function(t,e){t?($(".lw-add-wishlist-"+e).hide(),$(".lw-remove-wishlist-"+e).show()):t||($(".lw-remove-wishlist-"+e).hide(),$(".lw-add-wishlist-"+e).show())},c.getProductWislistData(),c.showPagination=function(t){c.isRequestInProcessing=!0,s.fetch(t,{fresh:!0}).success(function(o){i.processResponse(o,null,function(t){var e=o.data;if(c.isRequestInProcessing=!1,c.productExistOrNot=e.productExistOrNot,c.endOfList=e.paginationData.currentPage==e.paginationData.lastPage,c.remainingItems=e.paginationData.remainingItems,c.formattedRemainingItem=e.paginationData.formattedRemainingItem,c.hasMorePages=e.paginationData.hasMorePages,c.paginationData=e.paginationData,c.pageType=e.pageType,_.defer(function(){_.forEach(e.products,function(t,e){t.isAddedInWishlist?($(".lw-add-wishlist-"+t.id).hide(),$(".lw-remove-wishlist-"+t.id).show()):t.isAddedInWishlist||($(".lw-remove-wishlist-"+t.id).hide(),$(".lw-add-wishlist-"+t.id).show())})}),3===c.itemLoadType&&($masonryInstance.masonry("remove",$(".lw-product-box")).masonry("layout"),$(window).scrollTop(0),1<e.paginationData.currentPage&&$(".lw-nondescript-content").remove()),!_.isEmpty(e.products)&&(_.forEach(e.products,function(t,e){var a=d(n.template("#productListItemTemplate",t))(r);$masonryInstance.append(a),$masonryInstance.masonry("appended",a)}),$(".lw-product-list-popover").popover({html:!0,content:function(){return __globals.getJSString("addon_option_affect_string")}}),$(".product-item-thumb-image").Lazy({afterLoad:function(t){$masonryInstance.masonry("layout"),$(".lw-ribbon-wrapper-green").removeClass("lw-zero-opacity")},onFinishedAll:function(){c.isRequestInProcessing=!1}}),3===c.itemLoadType)){var a=$(".lw-pagination-container > ul");a&&a.html(e.paginationData.paginationLinks)}})}),l=!0},c.isRequestInProcessing=!1,c.scrollPagination=function(){$(window).scroll(function(){if(c.paginationData.currentPage<c.paginationData.lastPage&&$(window).scrollTop()+$(window).height()>$(document).height()-750&&0==c.isRequestInProcessing){c.paginationData.currentPage=c.paginationData.currentPage+1,c.productExistOrNot=!0;var t=c.sortOrderUrl+"page="+c.paginationData.currentPage;c.showPagination(t),c.isRequestInProcessing=!0}})},c.loadProductsOnBtnClick=function(){if(c.paginationData.currentPage<c.paginationData.lastPage){c.paginationData.currentPage=c.paginationData.currentPage+1;var t=c.sortOrderUrl+"page="+c.paginationData.currentPage;c.showPagination(t)}},1===c.itemLoadType)c.scrollPagination();else if(3===c.itemLoadType){if(0==l){var u=$(".lw-pagination-container");u&&u.html(c.paginationData.paginationLinks)}$(".lw-pagination-container").on("click","a",function(t){t.preventDefault();var e=$(this).attr("href"),a=c.sortOrderUrl+"page="+e.split("page=")[1];c.showPagination(a)})}c.dialogStatus=!1,c.showDetailsDialog=function(t,e,a){i.showDialog({categoryID:c.categoryID,productID:e,pageType:a,dialogStatus:c.dialogStatus},{templateUrl:__globals.getTemplateURL("product.details-dialog"),controller:"ProductDetailsDialogController as productDetailsDialogCtrl",resolve:{GetProductDetails:function(){var a=o.defer();return s.fetch({apiURL:"product.quick.view.details.support_data",productID:e,"categoryID?":c.categoryID},{fresh:!0}).success(function(e){i.processResponse(e,null,function(t){a.resolve(e)})}),a.promise}}},function(t){})},c.filterDailogProduct=function(t){c.brandPageType=!1,s.fetch(t,{fresh:!0}).success(function(t){c.brandsData=t.data.productRelatedBrand,c.selectedIDs=c.brandsData,i.showDialog(c,{templateUrl:__globals.getTemplateURL("product.filter-dialog")},function(t){})})},c.getProductDetails=function(){s.fetch({apiURL:"product.quick.view.details.support_data",productID:c.productID,"categoryID?":c.categoryID}).success(function(a){i.processResponse(a,null,function(t){var e=a.data.details;c.productDetails=e,c.productData={name:c.productDetails.name,quantity:1,isCartExist:!1},(c=__Form.updateModel(c,c.productData)).productDetails.basePriceWithAddonPrice=e.newTotalPrice,c.newTotalPriceCount=e.newTotalPriceCount,c.productDetails.selectedOptions=e.getSelectedOptions,c.productDetails&&(c.productData.name=e.name),_.isEmpty(c.productDetails.getSelectedOptions)||(c.optionLength=!0),c.productDetails.priceDetails={option:e.getSelectedOptions,total:e.getPrice.total,base_price:e.getPrice.base_price},0<e.qtyCart?(c.productData.quantity=e.qtyCart,c.checkNumber=!0):c.productData.quantity=1,c.btnQuantity=e.qtyCart,c.productData.isCartExist=e.isCartExist,c.pageStatus=!0})})},c.addToCartWithOptions=function(t,e){$(t.currentTarget).popover({html:!1,placement:"auto",animation:"fadeIn",content:function(){return d(n.template("#lwProductOptionsTemplate","item"))(r)}})},c.addToCart=function(t,e,a){t.preventDefault();var o=$(t.currentTarget);c.productCartData={name:decodeURIComponent(a).split("+").join(" "),quantity:_.add(o.data("quantity"),1),isCartExist:!1},s.post({apiURL:"cart.add.item",productID:e},c.productCartData).success(function(t){c.cartAction=!0;t.data;i.processResponse(t,null,function(){c.data={cart_string:t.data.cartItems,status:!0,showNotification:!0},o.data("quantity",t.data.qtyCart),r.$emit("lw.update.cart.string",c.data)})})},a.$on("lw.cart_update",function(t,e){if(1==e.action||2==e.action){var a=$(".lw-product-"+e.pid),o=$(a[0]);o&&o.data("quantity",e.qty)}else if(3==e.action){$(".lw-products-container").each(function(t){$(".lw-quick-cart-btn").each(function(t){var e=$(this);e.data("pid");e.data("quantity",0)})})}}),c.unescapeProductName=function(t,e){return 1==e?decodeURIComponent(t).split("+").join(" "):2==e?_.unescape(t):void 0}}]).controller("ProductsFilterController",["$scope","$compile","__Utils","$rootScope",function(t,e,a,o){var r=this;r.dialogData=t.ngDialogData,r.brandsData=r.dialogData.brandsData,r.pageType=t.ngDialogData.pageType,r.currentUrl=r.dialogData.currentRoute,r.productPrices=r.dialogData.productPrices,r.filterPrices=r.dialogData.filterPrices,r.selectedBrandID=r.dialogData.selectedBrandID,r.searchTerm=r.dialogData.searchTerm,r.brandPageType=r.dialogData.brandPageType,r.selectedIDs=r.dialogData.selectedIDs,r.currenCode=r.dialogData.currenCode,r.brandExistStatus=!1,_.isEmpty(r.brandsData)||(r.brandExistStatus=!0);r.selectedRows=[],r.noSelectedItems=!1,r.allSelectedItems=!1,r.priceStatus=!1,angular.forEach(r.selectedBrandID,function(a,t){_.isEmpty(r.selectedIDs)||angular.forEach(r.selectedIDs,function(t,e){r.selectedIDs[e].brandID==a&&(r.selectedIDs[e].isSelected=!0)})}),t.$on("ngDialog.opened",function(t,e){r.priceStatus=!1,r.productPrices.min_price!=r.productPrices.max_price&&("brand"==r.pageType&&$("#manageFilterTabs a").trigger("click"),r.priceStatus=!0,r.sliderBar={minValue:r.filterPrices.min_price,maxValue:r.filterPrices.max_price,minLimit:0,options:{minRange:1,maxRange:r.filterPrices.max_price,pushRange:!0,floor:Math.floor(r.productPrices.min_price),ceil:Math.floor(r.productPrices.max_price),onChange:function(t,e,a,o){var r=e,s=a;$(".lw-min-price").prop("value",r).prop("name","min_price"),$(".lw-max-price").prop("value",s).prop("name","max_price")},translate:function(t,e,a){switch(a){case"model":return"<b>Min price:</b>"+r.currenCode+t;case"high":return"<b>Max price:</b>"+r.currenCode+Math.floor(t);default:return r.currenCode+t}}}},r.changeFilterPrice=function(t,e){$(".lw-min-price").prop("value",t).prop("name","min_price"),$(".lw-max-price").prop("value",e).prop("name","max_price")})}),r.showPriceFilter=!1,r.loadView=function(){setTimeout(function(){t.$broadcast("rzSliderForceRender"),r.showPriceFilter=!0},1500)},r.loadView(),r.close=function(){t.closeThisDialog()},r.clearFilter=function(){t.closeThisDialog({close:!0})}}]).controller("ProductCompareController",["$scope","$compile","__Utils","$rootScope","__DataStore","appServices",function(e,t,a,o,r,s){var i=this;i.getProductCompareData=function(){r.fetch("product.compare.read.data",{fresh:!0}).success(function(t){var e=t.data;s.processResponse(t,null,function(t){i.productCompareData=e.productCompareData,i.specificationCollection=e.specificationCollection})})},i.getProductCompareData(),i.getPaire=function(t,a){return _.filter(t,function(t,e){if(t.specifications__id===a)return t.value})},i.removeProduct=function(t){r.post({apiURL:"product.compare.remove",productId:t},i).success(function(t){s.processResponse(t,null,function(){1==t.reaction&&(i.getProductCompareData(),e.$emit("lw.product.compare.count",!0))})})}}]).controller("SidebarFilterController",["$scope","$compile","__Utils","$rootScope",function(i,t,e,a){var n=this;n.currentFilterUrl="",n.showClearButton=!1,n.filterInitData=function(t,e,a,o,r,s){n.currentFilterUrl=decodeURIComponent(s).split("+").join(" "),n.sliderBar={minValue:t,maxValue:e,options:{floor:Math.floor(a),ceil:Math.floor(o),onChange:function(t,e,a,o){n.sliderBar.min_price=e,n.sliderBar.max_price=a},translate:function(t,e,a){switch(a){case"model":return r+t;case"high":return r+Math.floor(t);default:return r+t}},onEnd:function(t,e,a,o){n.filterByPrice(n.currentFilterUrl,e,a)}}},-1<window.location.href.indexOf("?")&&(n.showClearButton=!0),$(window).resize(function(){setTimeout(function(){i.$broadcast("reCalcViewDimensions")},200)})},n.changeFilterPrice=function(t,e,a){n.sliderBar.minValue=t,n.sliderBar.maxValue=e,n.filterByPrice(decodeURIComponent(a).split("+").join(" "),t,e)},n.filterByPrice=function(t,e,a){var o=new URLSearchParams(t),r=o.get("min_price"),s=o.get("max_price");t=(t=t.replace("&min_price="+r,"&min_price="+e)).replace("&max_price="+s,"&max_price="+a),__globals.redirectBrowser(t)},n.clearPriceFilter=function(t,e,a){var o=(t=decodeURIComponent(t).split("+").join(" ")).replace("&min_price="+e+"&max_price="+a,"");__globals.redirectBrowser(o)},n.prepareCurrentUrl=function(t,e,a,o,r,s){t=decodeURIComponent(t).split("+").join(" ");var i=new URLSearchParams(t),n=i.get("brandsIds"),d=i.get("specsIds"),c=i.get("rating"),l=i.get("availability"),u=i.get("categories"),p=[],g=[],m=[];_.isEmpty(n)||(g=n.split("|")),_.isEmpty(d)||(p=d.split("|")),_.isEmpty(u)||(m=u.split("|")),_.isEmpty(e)||(_.includes(g,e)?_.remove(g,function(t){return e==t}):g.push(e),g=g.join("|"),t=t.replace("brandsIds="+n,"brandsIds="+g)),_.isEmpty(a)||(_.includes(p,a)?_.remove(p,function(t){return a==t}):p.push(a),p=p.join("|"),t=t.replace("specsIds="+d,"specsIds="+p)),_.isEmpty(s)||(_.includes(m,s)?_.remove(m,function(t){return s==t}):m.push(s),m=m.join("|"),t=t.replace("categories="+u,"categories="+m)),_.isEmpty(o)||(t="clear"==o?t.replace("rating="+c,"rating="):t.replace("rating="+c,"rating="+o)),_.isEmpty(r)||(t="clear"==r?t.replace("availability="+l,"availability="):t.replace("availability="+l,"availability="+r)),__globals.redirectBrowser(t)}}])}(),function(){"use strict";angular.module("PublicApp.display.featured.products",[]).controller("DisplayFeaturedProductsController",["$scope","__DataStore","appServices","__Utils",function(t,a,o,e){var r=this;r.pageData={},r.pageStatus=!1,r.products=[],o.updateBreadcrumbs([{items:"",last_item:__globals.getJSString("featured_products")}],t),r.getFeaturedProducts=function(t){var e=t||"display.featured.products.list";a.fetch(e).success(function(a){o.processResponse(a,null,function(t){var e=a.data;_.forEach(e.data,function(t,e){r.products.push(t)}),r.pageData={total:e.total,per_page:e.per_page,current_page:e.current_page,last_page:e.last_page,next_page_url:e.next_page_url,prev_page_url:e.prev_page_url,from:e.from,to:e.to},r.pageStatus=!0,r.mediaURL=e.product_assets,r.totalProductCount=e.count})})},r.getFeaturedProducts(),$(window).scroll(function(){if(r.pageData.current_page<r.pageData.last_page&&r.pageStatus&&$(window).scrollTop()+1>=$(document).height()-$(window).height()){r.pageData.current_page+=1;var t=e.apiURL("display.featured.products.list")+"?page="+r.pageData.current_page;r.getFeaturedProducts(t)}})}])}(),function(){"use strict";angular.module("PublicApp.productDetails",[]).controller("ProductDetailsController",["$scope","__DataStore","appServices","$stateParams","__Form","$rootScope","$state","__Utils","$q","$compile","__Auth","appNotify",function(n,e,d,t,c,a,o,l,r,u,s,i){var p=this;p.isLoggedIn=s.isLoggedIn(),p.productID=__globals.getAppJSItem("productID"),p.categoryID=__globals.getAppJSItem("categoryID"),p.currencySymbol=__globals.getAppJSItem("currencySymbol"),p.productStatus=__globals.getAppJSItem("productStatus"),p.currencyValue=__globals.getAppJSItem("currencyValue"),p.launchingDate=__globals.getAppJSItem("launchingDate"),p.isAddedInWishlist=__globals.getAppJSItem("isAddedInWishlist"),p.images=__globals.getAppJSItem("images"),p.defaultImages=__globals.getAppJSItem("defaultImages"),p.isActiveCategory=__globals.getAppJSItem("isActiveCategory");var g=__globals.getAppJSItem("productRatings");p.itemRating=g.itemRating,p.itemRatingOrReview=g.itemRating.itemRatingOrReview,p.enableRating=g.enableRating,p.enableRatingReview=g.enableRatingReview,p.restrictAddRating=g.restrictAddRating,p.enableRatingModification=g.enableRatingModification,p.isPurchsedProduct=g.isPurchsedProduct,(p=c.setup(p,"add_product_in_cart_form","productData",{modelUpdateWatcher:!1})).pageStatus=!1,p.optionLength=!1,p.inActiveCategory=!1,_.isEmpty(p.isActiveCategory)||1!=p.productStatus?(p.inActiveCategory=!0,$(".lw-product-share-btn").addClass("disabled")):$(".lw-product-share-btn").removeClass("disabled");p.isEnableReating=function(){p.isEnableRatingModification=!0,_.isEmpty(p.itemRating.selfRating)&&0==p.enableRatingModification?p.isEnableRatingModification=!1:_.isEmpty(p.itemRating.selfRating)||1!=p.enableRatingModification?_.isEmpty(p.itemRating.selfRating)&&1==p.enableRatingModification?p.isEnableRatingModification=!1:1==p.restrictAddRating&&1==p.enableRatingModification&&(p.isEnableRatingModification=!0):p.isEnableRatingModification=!1,1==p.restrictAddRating&&0==p.isPurchsedProduct&&(p.isEnableRatingModification=!0)},p.isEnableReating(),1==p.enableRatingModification&&1!=p.productStatus?p.isEnableRatingModification=!0:_.isEmpty(p.isActiveCategory)&&(p.isEnableRatingModification=!0);$(function(){$("#lw-bar-rating").barrating("show",{theme:"fontawesome-stars-o",showValues:!1,allowEmpty:!1,readonly:p.isEnableRatingModification,initialRating:p.itemRating.selfRating,onSelect:function(e,t,a){void 0!==a&&(window.__appImmutables.auth_info.authorized?1==p.enableRating&&p.submitRatingAndReview(e):d.loginRequiredDialog("login-dialog",null,function(t){1==t&&p.submitRatingAndReview(e)}))}})});var m="";p.prepareZoomImage=function(t){m&&m.destroy();var e=document.querySelector("img.lw-zoom-image");m=new Drift(e,{paneContainer:document.querySelector(".lw-zoom-detail"),namespace:"lw-zoom-panel",inlinePane:900,inlineOffsetY:-85,containInline:!0,zoomFactor:4,hoverBoundingBox:!0}),_.defer(function(){_.isUndefined(t)||(m.setZoomImageURL(t),$(e).attr("src",t),e.setAttribute("data-zoom",t))},100)},_.defer(function(){p.prepareZoomImage()}),p.currentImageIndex=0,p.showImagesInColorBox=function(t){$(".lw-zoom-panel-bounding-box").remove(),$(".lw-zoom-detail").html(""),$("a[rel=lw-product-images]").colorbox({transition:"none",width:"90%",height:"90%",fixed:!0}).eq(p.currentImageIndex).click()},p.previewImageUrl="",p.changeImage=function(t,e,a){e.preventDefault(),p.currentImageIndex=a,p.previewImageUrl=t,_.defer(function(){p.prepareZoomImage(t)}),event.stopImmediatePropagation()},p.addProductCompare=function(t){e.post({apiURL:"product.compare.add",productId:t},p).success(function(t){var e=t.data;d.processResponse(t,null,function(t){if(1==t){p.productDetails.addedInCompareList=!0;e.countCompareProduct;n.$emit("lw.product.compare.count",!0)}})})},p.removeProductCompare=function(t){e.post({apiURL:"product.compare.remove",productId:t},p).success(function(t){var e=t.data;d.processResponse(t,null,function(t){if(1==t){p.productDetails.addedInCompareList=!1;e.countCompareProduct;n.$emit("lw.product.compare.count",!0)}})})},p.notifyUser=function(t){_.isEmpty(t)||e.post({apiURL:"product.notify_user.add",productId:p.productID},{notifyUserEmail:p.notifyUserEmail}).success(function(e){d.processResponse(e,function(){if(_.has(e.data,"validation")){var t=e.data.validation.notifyUserEmail[0];t&&i.error(t)}},function(){p.notifyUserEmail=""})})},p.getProductDetails=function(){e.fetch({apiURL:"product.quick.view.details.support_data",productID:p.productID,"categoryID?":p.categoryID}).success(function(o){d.processResponse(o,null,function(t){var e=o.data.details;p.productDetails=e,p.itemRatingAndReview=e.itemRatingOrReview.itemRatingAndReview,p.originalRatingAndReviewCount=e.itemRatingOrReview.originalRatingAndReviewCount,p.reviewCount=e.itemRatingOrReview.reviewCount,p.configReviewCount=e.itemRatingOrReview.configReviewCount,p.totalReview=e.itemRatingOrReview.totalReview,p.productSpecExists=e.productSpecExists,p.productQuestion=p.productDetails.productQuestionData.productQuestionData,p.productDiscount=p.productDetails.productDiscount;var a=u(l.template("#discountDetailsTemplate",p.productDiscount))(p);p.discountDetailsHtml=a.html(),p.productData={name:p.productDetails.name,quantity:1,isCartExist:!1},(p=c.updateModel(p,p.productData)).productDetails.basePriceWithAddonPrice=e.newTotalPrice,p.newTotalPriceCount=e.newTotalPriceCount,p.productDetails.selectedOptions=e.getSelectedOptions,p.productDetails&&(p.productData.name=e.name),_.isEmpty(p.productDetails.getSelectedOptions)||(p.optionLength=!0),p.productDetails.priceDetails={option:e.getSelectedOptions,total:e.getPrice.total,base_price:e.getPrice.base_price},0<e.qtyCart?(p.productData.quantity=e.qtyCart,p.checkNumber=!0):p.productData.quantity=1,p.isPurchsedProduct=e.isPurchsedProduct,p.btnQuantity=e.qtyCart,p.productData.isCartExist=e.isCartExist,p.pageStatus=!0})})},p.getProductDetails(),p.submitRatingAndReview=function(t){_.isEmpty(t)||e.post({apiURL:"product.rating.add",productId:p.productID,rate:t},p).success(function(t){d.processResponse(t,null,function(){p.itemRating=t.data.itemRating,1==p.itemRating.showDialog&&p.showAddReviewDialog(t.data),p.isEnableReating()}),p.getProductDetails()})},p.showAddReviewDialog=function(t){d.showDialog({reviewData:t,productId:p.productID},{templateUrl:__globals.getTemplateURL("product.add-review-dialog"),controller:"AddReviewDialogController as AddReviewDialogCtrl",resolve:{GetReviewData:function(){var a=r.defer();return e.fetch({apiURL:"product.review.support.data",productId:p.productID}).success(function(e){d.processResponse(e,null,function(t){a.resolve(e)})}),a.promise}}},function(t){p.getProductDetails()})},p.addQuestionDialog=function(){d.showDialog({itemTitle:p.productData.name},{templateUrl:__globals.getTemplateURL("product.add-faqs-dialog"),controller:"ProductFaqsDialogController as ProductFaqsCtrl",resolve:{}},function(t){})},p.showRatingAndReviews=function(){d.showDialog({itemTitle:p.productData.name},{templateUrl:__globals.getTemplateURL("product.ratings-and-reviews-dialog"),controller:"ItemRatingAndReviewDialogController as RatingAndReviewCtrl",resolve:{GetRatingAndReviewData:function(){var a=r.defer();return e.fetch({apiURL:"product.rating_review.get_support_data",productId:p.productID}).success(function(e){d.processResponse(e,null,function(t){a.resolve(e)})}),a.promise}}},function(t){p.getProductDetails()})},p.getQtyAction=function(t,e){if(1==t)null==e||isNaN(e)?p.productData.quantity=1:p.productData.quantity=e+1;else{var a=e-1;p.productData.quantity=a<=0?1:a}},p.cartAction=!1,p.addToCart=function(){c.process({apiURL:"cart.add.item",productID:p.productID},p).success(function(t){p.cartAction=!0;t.data;d.processResponse(t,null,function(){p.data={cart_string:t.data.cartItems,status:!0},p.updateCartRow(p.productID,!0),n.$emit("lw.update.cart.string",p.data)})})},p.addToWishlist=function(){window.__appImmutables.auth_info.authorized?e.post({apiURL:"product.wishlist.add_process",productId:p.productID},p).success(function(t){t.data.showLoggedInDialog&&d.loginRequiredDialog("login-dialog",null,function(t){}),d.processResponse(t,null,function(t){1==t&&(p.isAddedInWishlist=!0)})}):d.loginRequiredDialog("login-dialog",null,function(t){})},p.removeFromWishlist=function(){e.post({apiURL:"product.wishlist.remove_process",productId:p.productID},p).success(function(t){t.data.showLoggedInDialog&&d.loginRequiredDialog("login-dialog",null,function(t){}),d.processResponse(t,null,function(t){1==t&&(p.isAddedInWishlist=!1)})})},a.$on("remove.cart.row",function(t,e){e.status&&p.updateCartRow(p.productID,!0)}),p.updateCartRow=function(t,e,a){var o=!0;p.addonPrices=[],null!=p.productData.options&&(p.productDetails.selectedOptions=p.productData.options[t],angular.forEach(p.productData.options[t],function(t,e){this.push({option_name:e,value_name:t.name,addon_price:t.addon_price_format})},p.addonPrices),angular.forEach(p.productData.options[t],function(t,e){""==t&&(o=!1)},o));var r=_.pluck(p.productDetails.selectedOptions,"id"),s=0,i=[];_.forEach(r,function(a){_.forEach(p.images,function(t,e){a===t.product_option_values_id&&(s++,t.counter=s,i.push(t))})}),c.process({apiURL:"cart.product.qty.update",productID:t},p).success(function(o){d.processResponse(o,null,function(t){var e=o.data;p.productDetails.basePriceWithAddonPrice=e.formatedTotalPrice,p.productDetails.priceDetails={option:p.productDetails.selectedOptions,total:e.totalPrice,base_price:e.base_price},p.productDiscount=e.productDiscount;var a=u(l.template("#discountDetailsTemplate",p.productDiscount))(p);p.discountDetailsHtml=a.html(),p.productData.isCartExist=e.isCartExist,0<e.qtyCart?(p.productData.quantity=e.qtyCart,p.btnQuantity=e.qtyCart):(p.btnQuantity=0,p.productData.quantity=1)})}),0<i.length?(angular.element(".lw-main-slider-container").replaceWith(u(l.template("#lwMainSliderRow",{images:i,firstImage:_.get(i,0)}))(n)),p.prepareZoomImage()):0==i.length&&(angular.element(".lw-main-slider-container").replaceWith(u(l.template("#lwMainSliderRow",{images:p.defaultImages,firstImage:_.get(p.defaultImages,0)}))(n)),p.prepareZoomImage())}}]).controller("AddReviewDialogController",["$scope","appServices","__Form","GetReviewData",function(e,a,t,o){var r=this;r.pageStatus=!1,r.ngDialogData=e.ngDialogData,r=t.setup(r,"item_review_add_form","reviewData");var s=o.reviewData;(r=t.updateModel(r,{review:_.isEmpty(s)?"":s})).pageStatus=!0,r.submitReview=function(){t.process({apiURL:"product.process.add.review",productId:r.ngDialogData.productId},r).success(function(t){a.processResponse(t,null,function(){e.closeThisDialog()})})},r.closeDialog=function(){e.closeThisDialog()}}]).controller("ItemRatingAndReviewDialogController",["$scope","appServices","GetRatingAndReviewData",function(t,e,a){var o=this,r=t.ngDialogData;o.itemTitle=r.itemTitle,o.pageStatus=!1,o.itemRatingAndReview=a.data.itemRatingAndReview,r&&(o.pageStatus=!0),o.closeDialog=function(){t.closeThisDialog()}}]).controller("ProductFaqsDialogController",["$scope","appServices","__Form",function(e,a,t){var o=this,r=e.ngDialogData;o.productTitle=r.itemTitle,o.productID=__globals.getAppJSItem("productID"),(o=t.setup(o,"faq_add_form","addFaqData")).submitFaq=function(){t.process({apiURL:"product.process.add.faqs",productId:o.productID,type:2},o).success(function(t){a.processResponse(t,null,function(){e.closeThisDialog()})})},o.closeDialog=function(){e.closeThisDialog()}}])}(),function(){"use strict";angular.module("PublicApp.productDetailsDialog",[]).controller("ProductDetailsDialogController",["$scope","__DataStore","appServices","$stateParams","__Form","__Utils","$q","GetProductDetails","$compile","$rootScope","__Auth",function(i,e,d,t,n,c,o,a,l,r,s){var u=this;u.categoryID=i.ngDialogData.categoryID,u.productID=i.ngDialogData.productID,u.pageType=i.ngDialogData.pageType,u.dialogStatus=i.ngDialogData.dialogStatus,u.isLoggedIn=s.isLoggedIn(),s.refresh(function(t){u.auth_info=t}),(u=n.setup(u,"add_product_in_cart_form","productData",{modelUpdateWatcher:!1})).pageStatus=!1,u.optionLength=!1,u.addProductCompare=function(t){e.post({apiURL:"product.compare.add",productId:t},u).success(function(t){var e=t.data;d.processResponse(t,null,function(t){if(1==t){u.productDetails.addedInCompareList=!0;e.countCompareProduct;i.$emit("lw.product.compare.count",!0)}})})},u.removeProductCompare=function(t){e.post({apiURL:"product.compare.remove",productId:t},u).success(function(t){var e=t.data;d.processResponse(t,null,function(t){if(1==t){u.productDetails.addedInCompareList=!1;e.countCompareProduct;i.$emit("lw.product.compare.count",!0)}})})};var p=a.data.details;u.itemRating=p.itemRating,u.productStatus=p.productStatus,u.enableRating=p.enableRating,u.enableRatingReview=p.enableRatingReview,u.restrictAddRating=p.restrictAddRating,u.enableRatingModification=p.enableRatingModification,u.isPurchsedProduct=p.isPurchsedProduct,u.isAddedInWishlist=p.isAddedInWishlist,u.productSpecExists=p.productSpecExists,u.productDetails=p,u.launchingDate=p.launchingDate,u.images=p.allImages,u.defaultImages=p.defaultImages,u.primaryImages=p.primaryImages,u.isEnableReating=function(){u.isEnableRatingModification=!0,_.isEmpty(u.itemRating.selfRating)&&0==u.enableRatingModification?u.isEnableRatingModification=!1:_.isEmpty(u.itemRating.selfRating)||1!=u.enableRatingModification?_.isEmpty(u.itemRating.selfRating)&&1==u.enableRatingModification?u.isEnableRatingModification=!1:1==u.restrictAddRating&&1==u.enableRatingModification&&(u.isEnableRatingModification=!0):u.isEnableRatingModification=!1,1==u.restrictAddRating&&0==u.isPurchsedProduct&&(u.isEnableRatingModification=!0)},u.isEnableReating(),1==u.enableRatingModification&&1!=u.productStatus&&(u.isEnableRatingModification=!0);_.delay(function(){$(function(){$("#lw-bar-rating").barrating("show",{theme:"fontawesome-stars-o",showValues:!1,allowEmpty:!1,readonly:u.isEnableRatingModification,initialRating:u.itemRating.selfRating,onSelect:function(e,t,a){void 0!==a&&(window.__appImmutables.auth_info.authorized?1==u.enableRating&&u.submitRatingAndReview(e):d.loginRequiredDialog("login-dialog",null,function(t){1==t&&u.submitRatingAndReview(e)}))}})})},200),u.productDetails.categories=p.categories,u.productDetails.basePriceWithAddonPrice=p.newTotalPrice,u.productDiscount=p.productDiscount,i.$on("ngDialog.opened",function(t,e){var a=l(c.template("#discountDetailsTemplate",u.productDiscount))(u);u.discountDetailsHtml=a.html()}),u.newTotalPriceCount=p.newTotalPriceCount,u.productDetails.selectedOptions=p.getSelectedOptions,u.oldPrice=u.productDetails.old_price,u.productDetails&&(u.productData.name=p.name);_.isEmpty(u.productDetails.selectedOptions)||(u.optionLength=!0);u.productDetails.priceDetails={option:p.getSelectedOptions,total:p.getPrice.total,base_price:p.getPrice.base_price},0<p.qtyCart?(u.productData.quantity=p.qtyCart,u.checkNumber=!0):u.productData.quantity=1;u.btnQuantity=p.qtyCart,u.productData.isCartExist=p.isCartExist,u.pageStatus=!0,u.submitRatingAndReview=function(t){_.isEmpty(t)||e.post({apiURL:"product.rating.add",productId:u.productID,rate:t},u).success(function(n){d.processResponse(n,null,function(){u.itemRating=n.data.itemRating,u.rating=parseFloat(u.itemRating.rate);var t,e=$("#lw-product-rating-"+u.productID).length,a="",o=Math.floor(u.rating),r=Math.floor(5-o);if(u.rating%1!=0&&(a='<i class="fa fa-star-half-o lw-color-gold"></i>',r-=1),t=_.repeat('<i class="fa fa-star lw-color-gold"></i>',o)+a+_.repeat('<i class="fa fa-star lw-color-gray"></i>',r),0<e){var s=$("#lw-product-rating-"+u.productID).html("");i='<span class="lw-product-rating-avg border">'+t+'</span><span class="text-muted">'+u.itemRating.rate+"<small>("+u.itemRating.totalVotes+")</small></span>",$(s).html(i)}else if(0==e){s=$("#lw-product-star-rating-"+u.productID).html("");var i='<div id="lw-product-rating-'+u.productID+'"><span class="lw-product-rating-avg border">'+t+'</span><span class="text-muted">'+u.itemRating.rate+"<small>("+u.itemRating.totalVotes+")</small></span></div>";$(s).html(i)}!0===u.itemRating.showDialog&&u.showAddReviewDialog(n.data),u.isEnableReating()})})},u.showAddReviewDialog=function(t){d.showDialog({reviewData:t,productId:u.productID},{templateUrl:__globals.getTemplateURL("product.add-review-dialog"),controller:"AddReviewDialogController as AddReviewDialogCtrl",resolve:{GetReviewData:function(){var a=o.defer();return e.fetch({apiURL:"product.review.support.data",productId:u.productID}).success(function(e){d.processResponse(e,null,function(t){a.resolve(e)})}),a.promise}}},function(t){})},u.showRatingAndReviews=function(){d.showDialog({itemTitle:u.productData.name},{templateUrl:__globals.getTemplateURL("product.ratings-and-reviews-dialog"),controller:"ItemRatingAndReviewDialogController as RatingAndReviewCtrl",resolve:{GetRatingAndReviewData:function(){var a=o.defer();return e.fetch({apiURL:"product.rating_review.get_support_data",productId:u.productID}).success(function(e){d.processResponse(e,null,function(t){a.resolve(e)})}),a.promise}}},function(t){})},u.getQtyAction=function(t,e){if(1==t)null==e||isNaN(e)?u.productData.quantity=1:u.productData.quantity=e+1;else{var a=e-1;u.productData.quantity=a<=0?1:a}},u.cartAction=!1,u.addToCart=function(){n.process({apiURL:"cart.add.item",productID:u.productID},u).success(function(t){u.cartAction=!0;t.data;d.processResponse(t,null,function(){u.data={cart_string:t.data.cartItems,status:!0},u.updateCartItem(u.productID,!0),i.$emit("lw.update.cart.string",u.data)})})},u.addToWishlist=function(){window.__appImmutables.auth_info.authorized?e.post({apiURL:"product.wishlist.add_process",productId:u.productID},u).success(function(t){t.data.showLoggedInDialog&&d.loginRequiredDialog("login-dialog",null,function(t){}),d.processResponse(t,null,function(t){1==t&&($(".lw-remove-wishlist-"+u.productID).show(),$(".lw-add-wishlist-"+u.productID).hide(),u.isAddedInWishlist=!0)})}):d.loginRequiredDialog("login-dialog",null,function(t){})},u.removeFromWishlist=function(){e.post({apiURL:"product.wishlist.remove_process",productId:u.productID},u).success(function(t){t.data.showLoggedInDialog&&d.loginRequiredDialog("login-dialog",null,function(t){}),d.processResponse(t,null,function(t){1==t&&($(".lw-add-wishlist-"+u.productID).show(),$(".lw-remove-wishlist-"+u.productID).hide(),u.isAddedInWishlist=!1)})})},u.updateCartItem=function(t,e){var a=!0;u.addonPrices=[],null!=u.productData.options&&(u.productDetails.selectedOptions=u.productData.options[t],angular.forEach(u.productData.options[t],function(t,e){this.push({option_name:e,value_name:t.name,addon_price:t.addon_price_format})},u.addonPrices),angular.forEach(u.productData.options[t],function(t,e){""==t&&(a=!1)},a));var o=_.pluck(u.productDetails.selectedOptions,"id"),r=0,s=[];_.forEach(o,function(a){_.forEach(u.images,function(t,e){a===t.product_option_values_id&&(r++,t.counter=r,s.push(t))})}),0<s.length?angular.element(".lw-main-slider-container").replaceWith(l(c.template("#lwMainSliderRow",{images:s,firstImage:_.get(s,0)}))(i)):0==s.length&&angular.element(".lw-main-slider-container").replaceWith(l(c.template("#lwMainSliderRow",{images:u.defaultImages,firstImage:_.get(u.defaultImages,0)}))(i)),n.process({apiURL:"cart.product.qty.update",productID:t},u).success(function(o){d.processResponse(o,null,function(t){var e=o.data;u.productDetails.basePriceWithAddonPrice=e.totalPrice,u.productDetails.priceDetails={option:u.productDetails.selectedOptions,total:e.totalPrice,base_price:e.base_price},u.productDiscount=e.productDiscount;var a=l(c.template("#discountDetailsTemplate",u.productDiscount))(u);u.discountDetailsHtml=a.html(),u.productData.isCartExist=e.isCartExist,0<e.qtyCart?(u.productData.quantity=e.qtyCart,u.btnQuantity=e.qtyCart):(u.btnQuantity=0,u.productData.quantity=1)})})},u.previewImageUrl="",u.changeImage=function(t,e,a){e.preventDefault(),u.currentImageIndex=a,u.previewImageUrl=t;var o=document.querySelector("img.lw-zoom-image");$(o).attr("src",t),event.stopImmediatePropagation()},u.openCartDialog=function(t){r.$broadcast("lw.isCart.dialog",{dialog:t}),$("html").hasClass("lw-shopping-cart-dialog-active")||($("html").addClass("lw-shopping-cart-dialog-active"),d.showDialog(u,{templateUrl:__globals.getTemplateURL("shoppingCart.cart-view")},function(t){$("html").removeClass("lw-shopping-cart-dialog-active")}),r.$on("ngDialog.opened",function(t,e){$("div.lw-shopping-cart-dialog-content").length&&$("div.ngdialog-content").addClass("lw-shopping-cart-dialog")}))}}])}(),function(){"use strict";angular.module("PublicApp.page.details",[]).controller("DisplayPageDetailsController",["$scope","$state","appServices","__DataStore",function(a,o,r,t){var s=this,e={apiURL:"display.page.details",pageID:o.params.pageID},i=__globals.getActivePagesData(),n=__globals.findParents(i,o.params.pageID),d=n.reverse(),c=d.length-1;_.forEach(n,function(t,e){e==c&&(s.last_page=t.title)}),0==c?r.updateBreadcrumbs([{items:"",last_item:s.last_page}],a):_.forEach(_.initial(d),function(t,e){r.updateBreadcrumbs([{items:[{item:t.title,url:t.link?t.link:o.href("display_page_details",{pageID:t.key,pageTitle:__globals.slug(t.title)})}],last_item:s.last_page}],a)});s.getPageInfo=function(){t.fetch(e,s).success(function(e){r.processResponse(e,null,function(){var t=e.data;s.pageDetails=t})})},s.getPageInfo()}])}(),function(){"use strict";angular.module("PublicApp.ShoppingCart.cart",[]).controller("CartController",["$rootScope","$scope","appServices","__DataStore","__Form","__Auth","__Utils","$compile",function(i,n,d,e,c,t,l,u){var p,g=this;g.userInfo=t.authInfo(),g.isLoggedIn=t.isLoggedIn(),(g=c.setup(g,"update_cart_form","cartData",{modelUpdateWatcher:!1})).cartDataStatus=!1,g.openLoginDialog=function(){i.$broadcast("lw-open-login-dialog",{data:{guestOrder:!0}})},g.openDiscountDetails=function(){$("#lw-discount-detail-table").slideToggle()},g.cartData={},g.disabledStatus=!1,g.dataExistStatus=!1,g.getContentCart=function(){e.fetch("cart.get.data",{fresh:!0}).success(function(r){d.processResponse(r,null,function(t){var e=r.data;if(g.anyCartItemInvalid=e.isValidItem,g.cartDiscount=e.orderDiscount,g.cartTotalBeforeDiscount=e.cartTotalBeforeDiscount,g.cartData.items=e.cartItems,g.cartData.totalPrice=e.total,g.cartItemStatus=e.cartItemStatus,g.currentRoute=e.currentRoute,g.isCurrencyMismatch=e.isCurrencyMismatch,(g=c.updateModel(g,g.cartData)).currentRoute==document.location.href)var a=!0;else a=!1;if(a){var o=u(l.template("#discountDetailsDialogTemplate",g.cartDiscount))(g);g.discountDetailsHtml=o.html()}else _.defer(function(){var t=u(l.template("#discountDetailsDialogTemplate",g.cartDiscount))(g);g.discountDetailsHtml=t.html()});g.pageType=a,g.data={routeStatus:a},_.isEmpty(e.cartItems)||0==e.isValidItem?g.disabledStatus=!1:g.disabledStatus=!0,g.cartDataStatus=!0,n.$emit("lw.current.route.name",g.data)})})},g.getContentCart(),g.refreshProduct=function(t){e.post("cart.refresh.product",t).success(function(t){d.processResponse(t,null,function(){g.getContentCart()})})},g.updateQuantity=function(t,o,e,a){var r=Number(Math.round(e));if(g.cartData.items[o].qtyStatus=!1,g.cartQuantity=r,"eventUp"==t)1<r?99999<r&&(g.cartData.items[o].qty=r):(g.cartData.items[o].qty=1,g.cartData.items[o].qtyStatus=!0);else if(1==t)g.cartData.items[o].qty=r+1;else{var s=r-1;g.cartData.items[o].qty=s<=0?1:s}o&&(window.clearTimeout(p),p=window.setTimeout(function(){c.process({apiURL:"cart.update.qty",itemID:o},g).success(function(a){d.processResponse(a,null,function(){var t=a.data;if(g.cartDiscount=t.orderDiscount,g.cartTotalBeforeDiscount=t.cartTotalBeforeDiscount,g.pageType){var e=u(l.template("#discountDetailsDialogTemplate",g.cartDiscount))(g);g.discountDetailsHtml=e.html()}else _.defer(function(){var t=u(l.template("#discountDetailsDialogTemplate",g.cartDiscount))(g);g.discountDetailsHtml=t.html()});g.cartData.items[o].new_price=t.new_price,g.cartData.items[o].new_subTotal=t.new_subTotal,g.cartData.items[o].qty=t.qty,g.cartData.items[o].price=t.price,g.cartData.totalPrice=t.total,g.cartData.items[o].qtyStatus=!0,g.data={cart_string:t.cartItems,status:!0},g.qtyStatus=!0,n.$emit("lw.update.cart.string",g.data),i.$emit("remove.cart.row",{status:!0}),n.$emit("lw.cart_update",{qty:t.qty,pid:g.cartData.items[o].id,action:1})})})},500))},g.cancel=function(){n.closeThisDialog()},g.removeCartItem=function(a){e.post({apiURL:"cart.remove.item",itemID:a},g).success(function(e){d.processResponse(e,null,function(t){n.$emit("lw.cart_update",{qty:0,pid:g.cartData.items[a].id,action:2}),i.$emit("changeItems",{status:!0}),g.data={cart_string:e.data.cartItems,status:!0},n.$emit("lw.update.cart.string",g.data),$("#rowid_"+a).fadeOut("slow",function(){}),g.getContentCart()})})},g.removeAllItemsItem=function(){var a=[];_.isEmpty()||_.each(g.cartData.items,function(t,e){a.push(t)}),e.post("cart.remove.all.items",g).success(function(e){d.processResponse(e,null,function(t){n.$emit("lw.cart_update",{action:3,removedPIds:a}),g.cartData.items="",g.data={cart_string:e.data.cartItems,status:!0},n.$emit("lw.update.cart.string",g.data),i.$emit("remove.cart.row",{status:!0}),i.$emit("changeItems",{status:!0}),g.getContentCart()})})}}])}(),function(){"use strict";angular.module("PublicApp.ShoppingCart.orderSummary",[]).controller("OrderSummaryController",["$scope","__Form","__DataStore","appServices","__Utils","$rootScope","appNotify","__Auth","$compile",function(n,d,s,c,l,i,u,t,p){var g=this;(g=d.setup(g,"cart_order_form","orderData",{modelUpdateWatcher:!1})).isLoggedIn=t.isLoggedIn(),i.$on("lw.auth.event.reset",function(t,e){g.isLoggedIn=e.authorized}),g.couponMessage=!1,g.orderData.addressID=null,g.orderData.addressID1=null,g.pageStatus=!1,g.orderData.use_as_billing=!0,g.orderProcessDisableStatus=!0,g.userIsExist=!1,g.shippingMethods=[],g.paymentMethodConfig=__globals.getSelectizeOptions({maxItems:1,searchField:["name"],plugins:["remove_button"]}),$(document).ready(function(){$("#lw-smart-wizard").smartWizard({transitionEffect:"fade"}),$("#lw-smart-wizard").on("leaveStep",function(t,e,a,o){var r=$("#lwValidationMsg"),s=$("#lwValidationCustomMsg");if($("html").animate({scrollTop:$("#elementtoScrollToID").offset().top},500),"forward"==o&&1==a){if(_.isUndefined(g.orderData.shipping_method)&&0<g.shippingMethods.length&&!g.orderSupportData.shipping.info){var i=r.attr("data-message").replace("__validationMessage__",unescape("Shipping Method"));return u.error(i),!1}if(_.isEmpty(g.orderSupportData.cartItems)){i=s.attr("data-message").replace("__validationMessage__",unescape("No products in cart"));return u.error(i),!1}}if("forward"==o&&0==a){if(g.orderSupportData.itemIsInvalid){i=s.attr("data-message").replace("__validationMessage__",unescape("Product(s) not available in cart"));return u.error(i),!1}if(g.isLoggedIn){if(_.isEmpty(g.orderData.fullName)){i=r.attr("data-message").replace("__validationMessage__",unescape("full Name"));return u.error(i),!1}if(_.isEmpty(g.orderSupportData.shippingAddress)){i=r.attr("data-message").replace("__validationMessage__",unescape("shipping address"));return u.error(i),!1}if(0==g.orderSupportData.sameAddress&&_.isEmpty(g.orderSupportData.billingAddress)){i=r.attr("data-message").replace("__validationMessage__",unescape("billing address"));return u.error(i),!1}}if(!g.isLoggedIn){if(_.isEmpty(g.orderData.fullName)){i=r.attr("data-message").replace("__validationMessage__",unescape("full Name"));return u.error(i),!1}if(_.isEmpty(g.orderData.email)){i=r.attr("data-message").replace("__validationMessage__",unescape("email"));return u.error(i),!1}if(_.isEmpty(g.orderData.shipping_address_type)&&!_.isNumber(g.orderData.shipping_address_type)){i=r.attr("data-message").replace("__validationMessage__",unescape("shipping type "));return u.error(i),!1}if(_.isEmpty(g.orderData.shipping_address_line_1)){i=r.attr("data-message").replace("__validationMessage__",unescape("shipping address 1"));return u.error(i),!1}if(_.isEmpty(g.orderData.shipping_address_line_2)){i=r.attr("data-message").replace("__validationMessage__",unescape("shipping address 2"));return u.error(i),!1}if(_.isEmpty(g.orderData.shipping_city)){i=r.attr("data-message").replace("__validationMessage__",unescape("shipping city"));return u.error(i),!1}if(_.isEmpty(g.orderData.shipping_state)){i=r.attr("data-message").replace("__validationMessage__",unescape("shipping state"));return u.error(i),!1}if(_.isEmpty(g.orderData.shipping_pin_code)){i=r.attr("data-message").replace("__validationMessage__",unescape("shipping pin code"));return u.error(i),!1}if(_.isEmpty(g.orderData.shipping_country)){i=r.attr("data-message").replace("__validationMessage__",unescape("shipping country"));return u.error(i),!1}if(0==g.orderData.use_as_billing){if(_.isEmpty(g.orderData.shipping_address_type)&&!_.isNumber(g.orderData.billing_address_type)){i=r.attr("data-message").replace("__validationMessage__",unescape("billing address type "));return u.error(i),!1}if(_.isEmpty(g.orderData.billing_address_line_1)){i=r.attr("data-message").replace("__validationMessage__",unescape("billing address 1"));return u.error(i),!1}if(_.isEmpty(g.orderData.billing_address_line_2)){i=r.attr("data-message").replace("__validationMessage__",unescape("billing address 2"));return u.error(i),!1}if(_.isEmpty(g.orderData.billing_city)){i=r.attr("data-message").replace("__validationMessage__",unescape("billing city"));return u.error(i),!1}if(_.isEmpty(g.orderData.billing_state)){i=r.attr("data-message").replace("__validationMessage__",unescape("billing state"));return u.error(i),!1}if(_.isEmpty(g.orderData.billing_pin_code)){i=r.attr("data-message").replace("__validationMessage__",unescape("billing pin code"));return u.error(i),!1}if(_.isEmpty(g.orderData.billing_country)){i=r.attr("data-message").replace("__validationMessage__",unescape("billing country"));return u.error(i),!1}}}}})}),g.getCartOrderDetails=function(t,e,a,o,r){_.isUndefined(t)?g.addressID=null:g.addressID=t,_.isUndefined(e)?g.addressID1=null:g.addressID1=e,_.isUndefined(a)?g.couponCode=null:g.couponCode=a,_.isUndefined(o)||_.isEmpty(o)?g.shippingCountryId=null:g.shippingCountryId=o,_.isUndefined(r)||_.isEmpty(r)?g.billingCountryId=null:g.billingCountryId=r,g.countries_select_config=__globals.getSelectizeOptions({valueField:"value",labelField:"text",searchField:["text"]}),g.shippingCount=0,s.fetch({apiURL:"order.summary.details",addressID:g.addressID,addressID1:g.addressID1,couponCode:g.couponCode,shippingCountryId:g.shippingCountryId,billingCountryId:g.billingCountryId,useAsBilling:g.orderData.use_as_billing,shippingMethod:_.isUndefined(g.orderData.shipping_method)?null:g.orderData.shipping_method},{fresh:!0}).success(function(i){c.processResponse(i,null,function(t){var e=i.data.orderSummaryData.data;g.isLoggedIn||(g.addressTypes=e.addressSupportData.addressTypes,g.countries=e.addressSupportData.countries),g.shippingCount=e.shipping.shippingCount,g.orderSupportData={paymentMethod:e.paymentMethod,cartItems:e.cartItems,itemsCount:e.itemsCount,totalQuantity:e.totalQuantity,itemIsInvalid:e.itemIsInvalid,shippingAddress:e.shippingAddress,sameAddress:e.sameAddress,billingAddress:e.billingAddress,shipping:e.shipping,formatedCartTotalPrice:e.total.base_price,cartTotalPrice:e.total.totalBasePrice,currency:e.total.currency,afterAddShipingTotal:e.shipping.totalPrice,taxses:e.taxses.info,formatedTotalTaxAmount:e.taxses.formatedTotalTaxAmount,afterAddTaxTotal:e.taxses.totalPrice,totalPayableAmount:e.totalPayableAmount,totalPayableAmountForStripe:e.totalPayableAmountForStripe,totalPayableAmountForPaystack:e.totalPayableAmountForPaystack,totalPayableAmountFormated:e.totalPayableAmountFormated,fullName:e.user.fullName,couponData:_.isEmpty(e.couponData)?null:e.couponData.couponData,total:e.total,subtotalPrice:e.shipping.formettedDiscountPrice,checkoutMethod:e.checkoutMethod,checkoutMethodInfo:e.checkoutMethodInfo,cartDiscount:e.orderDiscount,isCurrencyMismatch:e.isCurrencyMismatch,cartTotalBeforeDiscount:e.cartTotalBeforeDiscount,shipping_method:g.orderData.shipping_method};var a=_.isEmpty(g.addressID)?_.isEmpty(g.orderSupportData.shippingAddress)?null:g.orderSupportData.shippingAddress.id:g.addressID,o=_.isEmpty(g.addressID1)?_.isEmpty(g.orderSupportData.billingAddress)?null:g.orderSupportData.billingAddress.id:g.addressID;if(g.shippingMethods=e.shipping_methods,1==g.shippingMethods.length){var r=g.shippingMethods[0]._id;_.isUndefined(g.orderData.shipping_method)&&1==g.shippingCount&&(_.delay(function(){g.getShipping(r)},500),g.orderData.shipping_method=r)}g.orderData={fullName:g.isLoggedIn?e.user.fullName:g.orderData.fullName,userEmail:g.isLoggedIn?e.user.userEmail:g.orderData.email,shipping_country:_.isEmpty(g.shippingCountryId)?"":e.user.shippingCountry,billing_country:_.isEmpty(g.billingCountryId)?"":e.user.billingCountry,stripeKey:e.stripeKey,paystackPublicKey:e.paystackPublicKey,razorpayKey:e.razorpayKey,description:e.description,addressID:a,businessEmail:e.businessEmail,checkout_method:g.orderData.checkout_method,sameAddress:g.orderSupportData.sameAddress,addressID1:o,totalPayableAmount:g.orderSupportData.totalPayableAmount,totalPayableAmountForStripe:e.totalPayableAmountForStripe,totalPayableAmountForPaystack:e.totalPayableAmountForPaystack,totalPayableAmountForRazorPay:e.totalPayableAmountForRazorPay,couponCode:g.couponCode,currency:e.total.currency,totalTaxAmount:e.taxses.totalTaxAmount,totalShippingAmount:e.shipping.totalShippingAmount,email:g.orderData.email,use_as_billing:e.user.useAsBilling,shipping_address_type:g.orderData.shipping_address_type,shipping_address_line_1:g.orderData.shipping_address_line_1,shipping_address_line_2:g.orderData.shipping_address_line_2,shipping_city:g.orderData.shipping_city,shipping_state:g.orderData.shipping_state,shipping_pin_code:g.orderData.shipping_pin_code,billing_address_type:g.orderData.billing_address_type,billing_address_line_1:g.orderData.billing_address_line_1,billing_address_line_2:g.orderData.billing_address_line_2,billing_city:g.orderData.billing_city,billing_state:g.orderData.billing_state,billing_pin_code:g.orderData.billing_pin_code,discountAddedPrice:e.shipping.discountAddedPrice,orderDiscount:e.orderDiscount.discount,shipping_method:g.orderData.shipping_method},g.couponData=_.isEmpty(e.couponData)?null:e.couponData,(g=d.updateModel(g,g.orderData)).isValidItem=e.isValidItem,_.isUndefined(g.orderData.checkout_method)&&(g.disabledStatus=!1),g.orderSupportData.shippingAddress&&!1!==g.orderSupportData.shipping.isShippable||(g.disabledStatus=!1),e.orderRoute==document.location.href?g.showCartBtn=!0:g.showCartBtn=!1,g.data={routeStatus:g.showCartBtn},n.$emit("lw.current.route.name",g.data);var s=p(l.template("#cartDiscountDetailsTemplate",g.orderSupportData.cartDiscount))(g);g.cartDiscountDetailsHtml=s.html(),g.pageStatus=!0})})},g.getCartOrderDetails(),g.checkValidDataForSubmit=function(){g.isValidItem&&g.orderSupportData.shippingAddress&&g.orderSupportData.shipping.isShippable&&(_.isEmpty(g.couponData)?g.disabledStatus=!0:0<g.orderData.discountAddedPrice?g.disabledStatus=!0:g.disabledStatus=!1),g.isLoggedIn||g.isValidItem&&g.orderSupportData.shipping.isShippable&&(_.isEmpty(g.couponData)?g.orderProcessDisableStatus=!1:0<g.orderData.discountAddedPrice?g.orderProcessDisableStatus=!1:g.orderProcessDisableStatus=!0)},g.changeAddressType=function(t){t&&(g.orderData.billing_country=null),g.getCartOrderDetails(null,null,g.couponCode,g.orderData.shipping_country,g.orderData.billing_country)},g.getShipping=function(){g.getCartOrderDetails(g.orderData.addressID,g.orderData.addressID1,g.couponCode,g.shippingCountryId,g.billingCountryId)},g.orderData.coupon="",g.newCouponCode="",g.applyCoupon=function(t){s.post({apiURL:"order.coupon.apply"},g).success(function(r){c.processResponse(r,function(t){g.couponData=r.data.couponData,g.couponStatus=t,g.invalidCouponCode=r.data.couponCode,g.couponMessage=!0,g.orderData.subtotalPrice=r.data.totalPrice;var e=_.isEmpty(g.orderData.addressID)?_.isEmpty(g.orderSupportData.shippingAddress)?null:g.orderSupportData.shippingAddress.id:g.orderData.addressID,a=_.isEmpty(g.orderData.addressID1)?_.isEmpty(g.orderSupportData.billingAddress)?null:g.orderSupportData.billingAddress.id:g.orderData.addressID1;g.getCartOrderDetails(e,a,g.couponData.couponCode,g.shippingCountryId,g.billingCountryId),g.validCouponAmtMessage=__ngSupport.getText(__globals.getJSString("order_coupon_amount_text"),{__amount__:g.couponData}),g.orderData.code="",g.checkValidDataForSubmit();var o=p(l.template("#couponDetailsTemplate",g.couponData))(g);g.couponDetailsHtml=o.html()})})},g.disabledStatus=!0,g.removeCoupon=function(){g.getCartOrderDetails(g.orderData.addressID,g.orderData.addressID1,null,g.shippingCountryId,g.billingCountryId),g.couponMessage=!1,g.couponStatus=null,_.isEmpty(g.couponData.discountFormate)||(g.couponData.discountFormate=""),g.checkValidDataForSubmit},g.removeAllInvlidCartItem=function(t){s.post("cart.remove.invalid.item",g).success(function(e){c.processResponse(e,null,function(t){g.data={cart_string:e.data.cartItems,status:!0},n.$emit("lw.update.cart.string",g.data),i.$emit("remove.cart.row",{status:!0}),g.getCartOrderDetails(g.orderData.addressID,g.orderData.addressID1,g.couponCode,g.shippingCountryId,g.billingCountryId)})})},g.updatOrderSummary=function(t){var e=t.orderSummaryData;g.shippingCount=e.shipping.shippingCount,g.orderSupportData={paymentMethod:e.paymentMethod,cartItems:e.cartItems,itemsCount:e.itemsCount,totalQuantity:e.totalQuantity,itemIsInvalid:e.itemIsInvalid,shippingAddress:e.shippingAddress,sameAddress:e.sameAddress,businessEmail:e.businessEmail,billingAddress:e.billingAddress,shipping:e.shipping.info,formatedCartTotalPrice:e.total.base_price,formatedTotalTaxAmount:e.taxses.formatedTotalTaxAmount,cartTotalPrice:e.total.totalBasePrice,currency:e.total.currency,afterAddShipingTotal:e.shipping.totalPrice,taxses:e.taxses.info,afterAddTaxTotal:e.taxses.totalPrice,totalPayableAmount:e.totalPayableAmount,totalPayableAmountFormated:e.totalPayableAmountFormated,fullName:e.user.fullName,total:e.total,couponData:_.isEmpty(e.couponData)?null:e.couponData.couponData,subtotalPrice:e.shipping.formettedDiscountPrice,checkoutMethod:e.checkoutMethod,checkoutMethodInfo:e.checkoutMethodInfo,shipping_method:g.orderData.shipping_method};var a=_.isEmpty(g.orderData.addressID)?_.isEmpty(g.orderSupportData.shippingAddress)?null:g.orderSupportData.shippingAddress.id:g.orderData.addressID,o=_.isEmpty(g.orderData.addressID1)?_.isEmpty(g.orderSupportData.billingAddress)?null:g.orderSupportData.billingAddress.id:g.orderData.addressID1;g.orderData={fullName:g.isLoggedIn?e.user.fullName:g.orderData.fullName,userEmail:g.isLoggedIn?e.user.userEmail:g.orderData.email,description:e.description,razorpayKey:e.razorpayKey,stripeKey:e.stripeKey,paystackPublicKey:e.paystackPublicKey,addressID:a,checkout_method:g.orderData.checkout_method,sameAddress:g.orderSupportData.sameAddress,businessEmail:e.businessEmail,addressID1:o,totalPayableAmount:g.orderSupportData.totalPayableAmount,totalPayableAmountForStripe:e.totalPayableAmountForStripe,totalPayableAmountForPaystack:e.totalPayableAmountForPaystack,totalPayableAmountForRazorPay:e.totalPayableAmountForRazorPay,couponCode:g.couponCode,currency:e.total.currency,totalTaxAmount:e.taxses.totalTaxAmount,totalShippingAmount:e.shipping.totalShippingAmount,email:g.orderData.email,use_as_billing:e.user.useAsBilling,shipping_address_type:g.orderData.shipping_address_type,shipping_address_line_1:g.orderData.shipping_address_line_1,shipping_address_line_2:g.orderData.shipping_address_line_2,shipping_city:g.orderData.shipping_city,shipping_state:g.orderData.shipping_state,shipping_pin_code:g.orderData.shipping_pin_code,billing_address_type:g.orderData.billing_address_type,billing_address_line_1:g.orderData.billing_address_line_1,billing_address_line_2:g.orderData.billing_address_line_2,billing_city:g.orderData.billing_city,billing_state:g.orderData.billing_state,billing_pin_code:g.orderData.billing_pin_code,discountAddedPrice:e.shipping.discountAddedPrice,orderDiscount:e.orderDiscount.discount,shipping_method:g.orderData.shipping_method},g=d.updateModel(g,g.orderData),0==e.isValidItem?(g.isValidItem=!1,g.disabledStatus=!1,g.orderProcessDisableStatus=!0):(g.disabledStatus=!0,g.orderProcessDisableStatus=!1),e.orderRoute==document.location.href?g.showCartBtn=!0:g.showCartBtn=!1,g.data={routeStatus:g.showCartBtn},n.$emit("lw.current.route.name",g.data),g.pageStatus=!0},g.orderData.totalDiscountAmount=0,g.handleOrderValidationErrors=function(t,e){3==t&&c.showDialog(e,{templateUrl:__globals.getTemplateURL("order.user.alert-dialog")},function(t){if(_.has(t,"value")&&!0===t.value.is_submit_order){var e=_.isEmpty(g.orderData.addressID)?_.isEmpty(g.orderSupportData.shippingAddress)?null:g.orderSupportData.shippingAddress.id:g.orderData.addressID,a=_.isEmpty(g.orderData.addressID1)?_.isEmpty(g.orderSupportData.billingAddress)?null:g.orderSupportData.billingAddress.id:g.orderData.addressID1,o=_.isEmpty(g.couponData)?null:g.couponData.couponCode;g.getCartOrderDetails(e,a,o,g.shippingCountryId,g.billingCountryId)}else __globals.redirectBrowser(l.apiURL("cart.view"))})},g.orderSubmit=function(){if(__globals.showProcessingDialog(),!_.has(g,"couponData")||_.isUndefined(g.couponData)||_.isEmpty(g.couponData)||(g.orderData.totalDiscountAmount=g.couponData.discount),0==g.cart_order_form.$valid&&6!==g.orderData.checkout_method?__globals.hideProcessingDialog():0==g.cart_order_form.$valid&&6===g.orderData.checkout_method&&(__globals.hideProcessingDialog(),u.error(__globals.getJSString("order_error_messages"))),11==g.orderData.checkout_method){if(g.cart_order_form.$valid){var t={key:g.orderData.razorpayKey,amount:g.orderData.totalPayableAmountForRazorPay.toFixed(2),currency:g.orderData.currency,name:g.orderData.fullName,handler:function(t){_.isEmpty(t.razorpay_payment_id)||s.post("order.razorpay.checkout",_.assign({razorpay_payment_id:t.razorpay_payment_id,checkout_method:11},g.orderData),g).success(function(e){a=e.data,c.processResponse(e,function(t){1!==e.reaction&&a.orderPaymentToken?__globals.redirectBrowser(l.apiURL("order.payment_cancelled",{orderToken:a.orderPaymentToken})):1!==e.reaction&&(g.handleOrderValidationErrors(t,e),2==t&&_.has(e.data,"orderSummaryData")?g.updatOrderSummary(e.data):9==t&&i.$broadcast("lw-open-login-dialog",{data:""}))},function(){__globals.redirectBrowser(l.apiURL("order.thank_you_razorpay",{orderToken:a.razorpayChargeRequest.orderPaymentToken}))})})},prefill:{name:g.orderData.fullName,email:g.orderData.userEmail},theme:{color:"#050505"},modal:{ondismiss:function(t){}}};__globals.hideProcessingDialog(),new Razorpay(t).open()}}else if(6==g.orderData.checkout_method){if(g.cart_order_form.$valid){var e=g.orderData,a=null,o=null,r=StripeCheckout.configure({key:e.stripeKey,locale:"auto",description:e.description,email:e.userEmail,amount:e.totalPayableAmountForStripe,currency:e.currency,allowRememberMe:!1,token:function(t){o=t.id,s.post("order.stripe.checkout",_.assign({stripeToken:t.id,checkout_method:6},g.orderData),g).success(function(e){a=e.data,c.processResponse(e,function(t){1!==e.reaction&&a.orderPaymentToken?__globals.redirectBrowser(l.apiURL("order.payment_cancelled",{orderToken:a.orderPaymentToken})+"?message="+a.message):1!==e.reaction&&(g.handleOrderValidationErrors(t,e),2==t&&_.has(e.data,"orderSummaryData")?g.updatOrderSummary(e.data):9==t&&i.$broadcast("lw-open-login-dialog",{data:""}))},function(){__globals.redirectBrowser(l.apiURL("order.thank_you_stripe",{orderToken:a.orderPaymentToken}))})})},opened:function(){__globals.hideProcessingDialog()},closed:function(){o?__globals.showProcessingDialog():!_.isEmpty(a)&&a.orderPaymentToken&&__globals.redirectBrowser(l.apiURL("order.payment_cancelled",{orderToken:a.orderPaymentToken}))}}).open();window.addEventListener("popstate",function(){r&&r.close()})}}else if(20==g.orderData.checkout_method){if(g.cart_order_form.$valid)(r=PaystackPop.setup({key:g.orderData.paystackPublicKey,email:g.orderData.businessEmail,amount:g.orderData.totalPayableAmountForPaystack,currency:g.orderData.currency,callback:function(t){var e=t.reference;_.isEmpty(e)||s.post("order.paystack.checkout",_.assign({paystack_refrence_id:e,checkout_method:20},g.orderData),g).success(function(e){a=e.data,c.processResponse(e,function(t){1!==e.reaction&&a.orderPaymentToken?__globals.redirectBrowser(l.apiURL("order.payment_cancelled",{orderToken:a.orderPaymentToken})+"?message="+a.message):1!==e.reaction&&(g.handleOrderValidationErrors(t,e),2==t&&_.has(e.data,"orderSummaryData")?g.updatOrderSummary(e.data):9==t&&i.$broadcast("lw-open-login-dialog",{data:""}))},function(){__globals.redirectBrowser(l.apiURL("order.thank_you_paystack",{orderToken:a.orderPaymentToken}))})})},onClose:function(){}})).openIframe(),__globals.hideProcessingDialog()}else 14==g.orderData.checkout_method&&(g.orderData.card_number=String(g.orderData.card_number)),d.process("order.process",g).success(function(e){c.processResponse(e,{then:function(t){3!=t||_.has(e.data,"validation")||g.handleOrderValidationErrors(t,e),2==t&&_.has(e.data,"orderSummaryData")?g.updatOrderSummary(e.data):9==t&&i.$broadcast("lw-open-login-dialog",{data:""})}},function(){1==e.reaction&&1==e.data.ckMethod?__globals.redirectBrowser(l.apiURL("order.paypal.checkout",{orderUID:e.data.orderID})):1==e.reaction&&14==e.data.ckMethod||15==e.data.ckMethod?$("body").html(e.data.htmlContent):1==e.reaction&&16==e.data.ckMethod||17==e.data.ckMethod?__globals.redirectBrowser(l.apiURL("order.paytm.checkout",{orderUID:e.data.orderID})):1==e.reaction&&18==e.data.ckMethod||19==e.data.ckMethod?__globals.redirectBrowser(l.apiURL("order.instamojo.checkout",{orderUID:e.data.orderID})):1==e.reaction&&(g.isLoggedIn?__globals.redirectBrowser(l.apiURL("my_order.details",{orderUID:e.data.orderID})):g.isLoggedIn||__globals.redirectBrowser(l.apiURL("order.guest_order_success")))})})},g.sameAsAddress=function(t,e){0==t?(g.orderSupportData.billingAddress="",g.orderData.addressID1=""):g.getCartOrderDetails(g.orderData.addressID,g.orderData.addressID,g.couponCode),g.orderData.sameAddress=t},g.openAddressListDialog=function(a,o){c.showDialog(g,{templateUrl:__globals.getTemplateURL("address.list-dialog")},function(t){if(!_.isUndefined(t.value)&&"$closeButton"!=t.value){var e=t.value.selectedAddress;0==a&&"billing"==o?(g.orderSupportData.billingAddress=e,g.orderData.addressID1=e.id,g.orderSupportData.sameAddress=!1,g.getCartOrderDetails(g.orderData.addressID,g.orderData.addressID1,g.couponCode)):1==a&&"billing"==o?(g.orderSupportData.shippingAddress=e,g.orderSupportData.billingAddress=e,g.orderData.addressID=e.id,g.orderData.addressID1=e.id):1==a&&"shipping"==o?(g.orderSupportData.shippingAddress=e,g.orderSupportData.billingAddress=e,g.orderData.addressID=e.id,g.orderData.addressID1=e.id,g.getCartOrderDetails(g.orderData.addressID,g.orderData.addressID1,g.couponCode),g.orderSupportData.shipping.isShippable&&(g.disabledStatus=!0)):0==a&&"shipping"==o&&(g.orderSupportData.shippingAddress=e,g.orderData.addressID=e.id,g.orderData.addressID1=_.isEmpty(g.orderData.addressID1)?g.orderSupportData.billingAddress.id:g.orderData.addressID1,g.orderSupportData.shipping.isShippable&&(g.disabledStatus=!0),_.isEmpty(g.orderData.addressID)||g.orderData.addressID!==g.orderData.addressID1||(g.orderData.addressID1=e.id,g.orderSupportData.sameAddress=!0),g.getCartOrderDetails(g.orderData.addressID,g.orderData.addressID1,g.couponCode))}g.checkValidDataForSubmit()})},g.removeCartItem=function(a){s.post({apiURL:"cart.remove.item",itemID:a},g).success(function(e){c.processResponse(e,null,function(t){g.data={cart_string:e.data.cartItems,status:!0},n.$emit("lw.update.cart.string",g.data),$("#rowid_"+a).fadeOut("slow",function(){$(this).remove()}),g.getCartOrderDetails()})})},g.removeAllCartItem=function(t){s.post("cart.remove.invalid.item",g).success(function(e){c.processResponse(e,null,function(t){g.data={cart_string:e.data.cartItems,status:!0},n.$emit("lw.update.cart.string",g.data),g.getCartOrderDetails()})})},g.checkUserEmail=function(){_.isEmpty(g.orderData.email)||s.fetch({apiURL:"order.check.user_email",email:g.orderData.email,couponId:_.isEmpty(g.couponData)?null:g.couponData.couponID}).success(function(e){var t=e.data;g.invalidCouponMessage=t.message,_.isNull(t.userId)?g.userIsExist=!1:g.userIsExist=!0,g.orderData.guestLoggedInUserId=t.userId,c.processResponse(e,{then:function(t){2==t&&c.showDialog(e,{templateUrl:__globals.getTemplateURL("order.user.alert-dialog")},function(t){g.removeCoupon()})}},function(t){})})},g.openLoginDialog=function(){i.$broadcast("lw-open-login-dialog",{data:{guestOrder:!1}})},g.refreshProduct=function(t){s.post("cart.refresh.product",t).success(function(t){c.processResponse(t,null,function(){g.getCartOrderDetails(g.orderData.addressID,g.orderData.addressID1,g.couponCode,g.shippingCountryId,g.billingCountryId)})})},g.openDiscountDetails=function(){$("#lw-discount-detail-table").slideToggle()}}]).controller("AlertDialogController",["$scope",function(t){var e=this;e.pageStatus=!1,t.ngDialogData&&(e.message=t.ngDialogData.data.message,e.pageStatus=!0);e.yesSubmitIt=function(){t.closeThisDialog({is_submit_order:!0})},e.closeDialog=function(){t.closeThisDialog({is_submit_order:!1})}}])}(),function(){"use strict";angular.module("ManageProductApp.allProductReviews",[]).controller("ProductAllReviewsController",["$scope","__DataStore","appServices","$stateParams","__Utils",function(t,o,r,e,s){var i=this;i.productID=__globals.getAppJSItem("productID"),this.showPaginationData=function(t){var e="";if(_.isEmpty(t)||-1==t.search("http")){e=s.apiURL("product.user.all_review.paginate_data",{productId:i.productID});var a="";null!=t&&(a="?page="+t),e+=a}else e=t;o.fetch(e,{fresh:!0}).success(function(t){var e=t.data;r.processResponse(t,null,function(t){if(i.productReviews=e.productReviewData,i.paginationLinks=e.paginationLinks,i.paginationLinks)$(".lw-pagination-container").html(i.paginationLinks)})})},this.showPaginationData(""),$(".lw-pagination-container").on("click","a",function(t){t.preventDefault();var e=$(this).attr("href");i.showPaginationData(e)})}])}(),function(){"use strict";angular.module("ManageProductApp.allProductQuestions",[]).controller("ProductAllQuestionsController",["$scope","__DataStore","appServices","$stateParams","__Utils",function(t,o,r,e,s){var i=this;i.productID=__globals.getAppJSItem("productID"),this.showPaginationData=function(t){var e="";if(_.isEmpty(t)||-1==t.search("http")){e=s.apiURL("product.user.question.paginate_data",{productId:i.productID});var a="";null!=t&&(a="?page="+t),e+=a}else e=t;o.fetch(e,{fresh:!0}).success(function(t){var e=t.data;r.processResponse(t,null,function(t){if(i.productQuestions=e.productQuestionData,i.paginationLinks=e.paginationLinks,i.paginationLinks)$(".lw-pagination-container").html(i.paginationLinks)})})},this.showPaginationData(""),$(".lw-pagination-container").on("click","a",function(t){t.preventDefault();var e=$(this).attr("href");i.showPaginationData(e)})}])}(),function(){"use strict";angular.module("PublicApp.Order.list",[]).controller("MyOrderListController",["$scope","__DataStore","appServices","$stateParams","__Auth","__Utils",function(a,o,r,t,e,s){var i=this,n=[{name:"order_uid",orderable:!0,template:"#orderColumnIdTemplate"},{name:"status",orderable:!0,template:"#orderStatusColumnIdTemplate"},{name:"creation_date",orderable:!0,template:"#orderColumnTimeTemplate"},{name:null,template:"#orderActionColumnTemplate"}],d={activeTab:{id:"activeTabList",status:1},cancelled:{id:"cancelledTabList",status:3},completed:{id:"completedTabList",status:6}};$("#adminOrderList a").click(function(t){t.preventDefault();var e=$(this).attr("aria-controls"),a=d[e];_.isEmpty(a)||($(this).tab("show"),i.getOrders(a.id,a.status))}),i.getOrders=function(t,e){i.cartOrderListDataTable&&i.cartOrderListDataTable.destroy(),i.cartOrderListDataTable=o.dataTable("#"+t,{url:{apiURL:"cart.get.orders.data",status:e},dtOptions:{searching:!0,order:[[2,"desc"]],columnDefs:[{targets:[1],searchable:!1}]},columnsData:n,scope:a})},$('.nav li a[href="#activeTab"]').triggerHandler("click",!0),i.reloadDT=function(){o.reloadDT(i.cartOrderListDataTable)},i.logDialog=function(t){o.fetch({apiURL:"order.log.dialog",orderID:t}).success(function(e){r.processResponse(e,null,function(){9==e.reaction&&(window.location=s.apiURL("user.login"));var t=e.data;r.showDialog({order:t.cartOrder,orderLog:t.orderLog},{templateUrl:__globals.getTemplateURL("order.user.log")},function(t){})})})},i.cancelDialog=function(t){o.fetch({apiURL:"cart.order.cancel",orderID:t}).success(function(e){r.processResponse(e,null,function(){var t=e.data;r.showDialog({orderData:t.order},{templateUrl:__globals.getTemplateURL("order.user.cancel")},function(t){_.has(t.value,"order_updated")&&!0===t.value.order_updated&&i.reloadDT()})})})}}])}(),function(){"use strict";angular.module("PublicApp.Order.details",[]).controller("MyOrderDetailsController",["$scope","__Form","__Utils","appServices","__DataStore",function(t,e,a,o,r){var s=this;s.pageStatus=!1,s.orderData=__globals.getAppJSItem("orderDetails");var i=s.orderData.data;s.billingAddress=i.address.billingAddress,s.shippingAddress=i.address.shippingAddress,s.sameAddress=i.address.sameAddress,s.user=i.user,s.order=i.order,s.orderStatus=i.order.orderStatus,s.orderProducts=i.orderProducts,s.coupon=i.coupon,s.taxes=i.taxes,s.shipping=i.shipping,s.pageStatus=!0,s.updatePayment=function(t){__globals.redirectBrowser(a.apiURL("order.paypal.checkout",{orderUID:t}))},s.contactStoreDialog=function(t){o.showDialog({orderUID:t},{templateUrl:__globals.getTemplateURL("order.user.contact-store")},function(t){})},s.cancelOrder=function(t){__globals.showConfirmation({text:__globals.getJSString("order_cancellation_text"),confirmButtonText:__globals.getJSString("cancel_action_button_text")},function(){r.post({apiURL:"order.user.cancellation_process",orderID:t}).success(function(t){var e=t.data.message;o.processResponse(t,{error:function(t){__globals.showConfirmation({title:__globals.getJSString("cancel_error_title"),text:e,type:"error"})}},function(t){__globals.showConfirmation({title:__globals.getJSString("cancel_success_title"),text:e,type:"success"}),s.order.allowOrderCancellation=!1,s.order.orderStatus=3,s.order.formatedOrderStatus="Cancelled"})})})}}])}(),function(){"use strict";angular.module("PublicApp.Order.log",[]).controller("MyOrderLogController",["$scope","__Form",function(t,e){var a=this;(a=e.setup(a,"cart_order_log_dialog_form","cartData",{secured:!0})).ngDialogData=t.ngDialogData,a.order=a.ngDialogData.order,a.orderLog=a.ngDialogData.orderLog,a.close=function(){t.closeThisDialog()}}])}(),function(){"use strict";angular.module("PublicApp.Order.cancel",[]).controller("CancelMyOrderController",["$scope","__Form","appServices",function(e,t,a){var o=this;(o=t.setup(o,"form_order_update","orderData")).ngDialogData=e.ngDialogData,(o=t.updateModel(o,o.orderData)).cancel=function(){t.process({apiURL:"cart.order.cancel.process",orderID:o.ngDialogData.orderData._id},o).success(function(t){a.processResponse(t,null,function(t){e.closeThisDialog({order_updated:!0})})})},o.closeDialog=function(){e.closeThisDialog()}}])}(),function(){"use strict";window.angular.module("PublicApp.address",[]).controller("AddressListController",["__Utils","__Form","$state","appServices","$scope","__Auth","__DataStore","$rootScope",function(t,e,a,o,r,s,i,n){var d=this;(d=e.setup(d,"user_address_form","addressData")).pageStatus=!1,d.addressData={},d.getAddresses=function(){i.fetch("user.get.addresses").success(function(e){o.processResponse(e,null,function(){var t=e.data;d.addressData=t,d.pageStatus=!0})})},d.getAddresses(),d.delete=function(a){__globals.showConfirmation({text:__globals.getJSString("address_delete_text"),confirmButtonText:__globals.getJSString("delete_action_button_text")},function(){i.post({apiURL:"user.address.delete",addressID:a}).success(function(t){var e=t.data.message;o.processResponse(t,{error:function(t){__globals.showConfirmation({title:__globals.getJSString("confirm_error_title"),text:e,type:"error"})}},function(t){__globals.showConfirmation({title:__globals.getJSString("confirm_error_title"),text:e,type:"success"}),$("#address_"+a).fadeOut("slow",function(){$(this).remove(),d.getAddresses()})})})})},n.$on("lw.login-success",function(t,e){e&&d.getAddresses()}),d.addAddressDialog=function(){d.addressType=d.addressData.addressType,d.countries=d.addressData.countries.data,o.showDialog(d,{templateUrl:__globals.getTemplateURL("address.add")},function(t){_.has(t.value,"address_added")&&!0===t.value.address_added&&d.getAddresses()})},d.editAddressDialog=function(t){i.fetch({apiURL:"user.fetch.address.support.data",addressID:t}).success(function(t){d.countries=t.data.countries,d.address=t.data.address,d.addressType=t.data.addressType,o.showDialog(d,{templateUrl:__globals.getTemplateURL("address.edit")},function(t){_.has(t.value,"address_updated")&&1==t.value.address_updated&&d.getAddresses()})})},d.addressListDialog=function(){i.fetch({apiURL:"get.addresses.for.order"}).success(function(t){var e=t.data;d.addressData=e,o.showDialog(e,{templateUrl:__globals.getTemplateURL("address.list-dialog")},function(t){})})},d.close=function(){r.closeThisDialog()},d.selectAddressForOrder=function(t,a){_.isEmpty(t)?r.closeThisDialog({selectedAddress:""}):_.forEach(t,function(t,e){t.id==a&&r.closeThisDialog({selectedAddress:t})})},d.makePrimaryAddress=function(t){e.process({apiURL:"user.get primary.address",addressID:t},d).success(function(t){t.data.message;o.processResponse(t,null,function(){d.getAddresses()})})}}]).controller("AddressAddController",["$scope","__Auth","__Form","appServices",function(e,t,a,o){var r=this;(r=a.setup(r,"user_address_form","userData",{secured:!1})).ngDialogData=e.ngDialogData.addressData,r.addressType=r.ngDialogData.addressType,r.countriesCollection=r.ngDialogData.countries.data,r.countries=r.countriesCollection.countries,r.countries_select_config=__globals.getSelectizeOptions({valueField:"value",labelField:"text",searchField:["text"]}),r.submit=function(){a.process("user.address.process",r).success(function(t){o.processResponse(t,null,function(){e.closeThisDialog({address_added:!0})})})},r.close=function(){e.closeThisDialog()}}]).controller("AddressEditController",["$scope","__Form","appServices",function(e,t,a){var o=this;(o=t.setup(o,"user_address_edit_form","addressData")).addressType=e.ngDialogData.addressType,o.addressData=e.ngDialogData.address,o.countriesCollection=e.ngDialogData.countries.data,o.countries=o.countriesCollection.countries,o.countries_select_config=__globals.getSelectizeOptions({valueField:"value",labelField:"text",searchField:["text"]}),o.update=function(){o.updateURL={apiURL:"user.address.update",addressID:o.addressData.id},t.process(o.updateURL,o).success(function(t){a.processResponse(t,null,function(t){e.closeThisDialog({address_updated:!0})})})},o.close=function(){e.closeThisDialog()}}])}(window),function(){"use strict";angular.module("UserApp.login",[]).controller("UserLoginController",["__Form","__Auth","appServices","__Utils","$scope",function(t,a,o,r,s){var i=this;(i=t.setup(i,"form_user_login","loginData",{secured:!0})).show_captcha=!1,i.request_completed=!1,i.guestLogin=!1,i.site_key=__globals.getAppImmutables("recaptcha_site_key"),_.has(s.ngDialogData,"guestOrder")&&1==s.ngDialogData.guestOrder&&(i.guestLogin=!0),t.fetch("user.login.attempts").success(function(e){o.processResponse(e,null,function(t){i.show_captcha=e.data.show_captcha,i.selectUser=e.data.selectUser,i.request_completed=!0})}),i.addUserData=function(t){t&&(i.loginData.email=i.selectUser[t].email,i.loginData.password=i.selectUser[t].password)},i.getCaptchaURL=function(){return r.apiURL("security.captcha")+"?ver="+Math.random()},i.refreshCaptcha=function(){i.captchaURL=i.getCaptchaURL()},i.captchaURL=i.getCaptchaURL(),i.submit=function(){i.isInActive=!1,t.process("user.login",i).success(function(t){var e=t.data;o.processResponse(t,{error:function(){i.show_captcha=e.show_captcha,i[i.ngFormModelName].password="",i.show_captcha&&(i[i.ngFormModelName].confirmation_code="",i.refreshCaptcha())},otherError:function(t){i.isInActive=e.isInActive,3==t?i.show_captcha&&i.refreshCaptcha():10==t&&e.auth_info.authorized&&(window.location=window.appConfig.appBaseURL)}},function(){a.checkIn(e.auth_info,function(){e.intendedUrl?__globals.redirectBrowser(e.intendedUrl):__globals.redirectBrowser(window.appConfig.appBaseURL)})})})},i.submitDialogLogin=function(){i.isInActive=!1,t.process("user.login",i).success(function(t){var e=t.data;o.processResponse(t,{error:function(){i.show_captcha=e.show_captcha,i[i.ngFormModelName].password="",i.show_captcha&&(i[i.ngFormModelName].confirmation_code="",i.refreshCaptcha())},otherError:function(t){i.isInActive=e.isInActive,3==t?i.show_captcha&&i.refreshCaptcha():10==t&&e.auth_info.authorized&&(window.location=window.appConfig.appBaseURL)}},function(){a.checkIn(e.auth_info,function(){1==i.guestLogin?__globals.redirectBrowser(r.apiURL("order.summary.view")):s.closeThisDialog({login_success:!0})})})})}}])}(),function(){"use strict";angular.module("UserApp.logout",[]).controller("UserLogoutController",["__DataStore","__Auth","appServices",function(t,a,o){t.post("user.logout").success(function(e){o.processResponse(e,function(t){a.checkIn(e.data.auth_info)})})}])}(),function(){"use strict";angular.module("UserApp.forgotPassword",[]).controller("UserForgotPasswordController",["__Form","appServices","__Utils",function(t,e,a){var o=this;(o=t.setup(o,"user_forgot_password_form","userData",{secured:!0})).submit=function(){t.process("user.forgot_password.process",o).success(function(t){e.processResponse(t,null,function(){__globals.redirectBrowser(a.apiURL("user.forgot_password.success"))})})}}])}(),function(){"use strict";angular.module("UserApp.resetPassword",[]).controller("UserResetPasswordController",["__Form","appServices","__Utils",function(t,e,a){var o=this;(o=t.setup(o,"user_reset_password_form","userData",{secured:!0})).submit=function(){t.process({apiURL:"user.reset_password.process",reminderToken:__globals.getAppJSItem("passwordReminderToken")},o).success(function(t){e.processResponse(t,null,function(t){window.location=a.apiURL("user.login")})})}}])}(),function(){"use strict";angular.module("UserApp.changePassword",[]).controller("UserChangePasswordController",["__Form","appServices","__Utils","$state",function(t,e,a,o){var r=this;(r=t.setup(r,"user_password_update_form","userData",{secured:!0})).submit=function(){t.process("user.change_password.process",r).success(function(t){e.processResponse(t,null,function(){r.userData={},document.location.href==t.data.passwordRoute?window.location=window.appConfig.appBaseURL:o.go("dashboard")})})}}])}(),function(){"use strict";angular.module("UserApp.changeEmail",[]).controller("UserChangeEmailController",["__Form","appServices",function(t,a){var o=this;o.requestSuccess=!1,o.pageStatus=!1,o=t.setup(o,"user_change_email_form","userData",{secured:!0}),t.fetch("user.change_email.support_data").success(function(t){var e=t.data;a.processResponse(t,null,function(){o.changeEmail=e.newEmail,o.formattedDate=e.formattedDate,o.humanReadableDate=e.humanReadableDate,o.pageStatus=!0})}),o.submit=function(){t.process("user.change_email.process",o).success(function(t){var e=t.data;a.processResponse(t,null,function(){o.userData={},1==t.reaction&&(o.activationRequired=e.activationRequired,o.requestSuccess=!0,$(".lw-form").slideUp())})})}}])}(),function(){"use strict";angular.module("UserApp.register",[]).controller("UserRegisterController",["__Form","$state","appServices","__Utils",function(t,e,a,o){var r=this;r.show_captcha=!1,r=t.setup(r,"user_register_form","userData",{secured:!0}),t.fetch("user.register.supportData").success(function(t){r.show_captcha=!0,r.site_key=t.data.site_key}),r.getCaptchaURL=function(){return o.apiURL("security.captcha")+"?ver="+Math.random()},r.refreshCaptcha=function(){r.captchaURL=r.getCaptchaURL()},r.captchaURL=r.getCaptchaURL(),r.errorMessage=!1,r.submit=function(){r.isInActive=!1,t.process("user.register.process",r).success(function(t){var e=t.data;a.processResponse(t,{error:function(){},otherError:function(){3!=t.reaction||_.isEmpty(t.message)||(r.errorMessage=t.message),r.isInActive=e.isInActive,r[r.ngFormModelName].password="",r[r.ngFormModelName].password_confirmation="",r[r.ngFormModelName].confirmation_code="",r.refreshCaptcha()}},function(){__globals.redirectBrowser(o.apiURL("user.register.success"))})})},r.showTermsAndConditionsDialog=function(){a.showDialog(r,{templateUrl:__globals.getTemplateURL("user.terms-and-conditions")},function(t){})}}])}(),function(){"use strict";angular.module("UserApp.contact",[]).controller("UserContactController",["__Form","$state","appServices","__Utils","__Auth","$scope",function(e,t,a,o,r,s){var i=this;i=e.setup(i,"user_contact_form","userData",{secured:!0,unsecuredFields:["message"]}),r.refresh(function(t){i.auth_info=t}),9!=i.auth_info.reaction_code&&(i.userData.email=i.auth_info.profile.email,i.userData.fullName=i.auth_info.profile.full_name);_.isEmpty(s.ngDialogData)||(i.userData.orderUID=s.ngDialogData.orderUID);i.requestSuccess=!1,i.submit=function(t){i.userData.formType=t,e.process("user.contact.process",i).success(function(t){a.processResponse(t,null,function(){i.userData="",2==i.userData.formType?s.closeThisDialog():$(".lw-form").slideUp(),i.requestSuccess=!0})})},i.closeDialog=function(){s.closeThisDialog()}}])}(),function(){"use strict";angular.module("UserApp.profile",[]).controller("UserProfileController",["__Form","appServices",function(e,a){var o=this;(o=e.setup(o,"user_profile__form","profileData")).request_completed=!1,e.fetch("user.profile.details").success(function(t){a.processResponse(t,null,function(){e.updateModel(o,t.data.profile),o.request_completed=!0})})}])}(),function(){"use strict";angular.module("UserApp.profileEdit",[]).controller("UserProfileEditController",["__Form","appServices",function(e,a){var o=this;(o=e.setup(o,"user_profile_edit_form","profileData")).request_completed=!1,e.fetch("user.profile.details").success(function(t){a.processResponse(t,null,function(){e.updateModel(o,t.data.profile),o.request_completed=!0})}),o.submit=function(){e.process("user.profile.update",o).success(function(t){a.processResponse(t,null,function(){})})}}])}(),function(){"use strict";angular.module("UserApp.address",[]).controller("UserAddressAddController",["$scope","__Form","$state","appServices","__Utils","$rootScope",function(e,t,a,o,r,s){var i=this;(i=t.setup(i,"user_address_form","userData",{secured:!1})).addressType=__globals.getAppJSItem("configGetAddressType"),i.countriesCollection=__globals.getAppJSItem("countries"),i.countries=i.countriesCollection.data.countries,i.countries_select_config=__globals.getSelectizeOptions({valueField:"value",labelField:"text",searchField:["text"]}),i.submit=function(){t.process("user.address.process",i).success(function(t){o.processResponse(t,null,function(){e.closeThisDialog({address_added:!0,selectedAddressID:e.ngDialogData.selectedAddressID,addressType:e.ngDialogData.addressType})})})},i.close=function(){e.closeThisDialog({address_added:!0,selectedAddressID:e.ngDialogData.selectedAddressID,addressType:e.ngDialogData.addressType})}}])}(),function(){"use strict";angular.module("UserApp.Addresslist",[]).controller("UserAddressListController",["$scope","$state","__DataStore","__Form","appServices","__Utils","$rootScope",function(i,t,n,o,d,e,c){var l=this;(l=o.setup(l,"user_address_form","addressData")).ngDialogData=i.ngDialogData,l.pageStatus=!1,l.getAddresses=function(){n.fetch("user.get.addresses").success(function(o){d.processResponse(o,null,function(t){var e=o.data;if(e.getRoute===document.location.href)var a="noDialog";else{a="dialog";l.selectAddress=l.ngDialogData.selectedAddressID,l.addressType=l.ngDialogData.addressType,l.addressSameAs=l.ngDialogData.addressSameAs,l.couponAmt=l.ngDialogData.couponAmt}l.addressData=e,l.pageStatus=!0,l.addressprimary=!0,l.pageType=a,_.isEmpty(l.ngDialogData)?(l.selectAddress="",l.addressType="",l.addressSameAs="",l.couponAmt=0):(l.selectAddress=l.ngDialogData.selectedAddressID,l.addressType=l.ngDialogData.addressType,l.addressSameAs=l.ngDialogData.addressSameAs,l.couponAmt=l.ngDialogData.couponAmt)})})},l.getAddresses(),c.$on("changeAddresses",function(t,e){e.status&&(l.addressType=e.addressType)}),l.addAddress=function(t,e,a){"dialog"==t?i.closeThisDialog({showAddDialog:!0,pageType:t,selectedAddressID:e,addressType:a}):d.showDialog(l,{templateUrl:__globals.getTemplateURL("user.add-address")},function(t){_.has(t.value,"address_added")&&!0===t.value.address_added&&(l.addressType=t.value.addressType,l.getAddresses())})},l.editAddress=function(t,e,a,o){"dialog"==t?i.closeThisDialog({showEditDialog:!0,addressID:e,selectedAddressID:a,addressType:o}):n.fetch({apiURL:"user.fetch.address.support.data",addressID:e}).success(function(t){l.address=t.data.address,d.showDialog(l,{templateUrl:__globals.getTemplateURL("user.edit-address")},function(t){_.has(t.value,"address_updated")&&1==t.value.address_updated&&l.getAddresses()})})},l.delete=function(o,r){__globals.showConfirmation({text:__globals.getJSString("address_delete_text"),confirmButtonText:__globals.getJSString("delete_action_button_text")},function(){n.post({apiURL:"user.address.delete",addressID:o}).success(function(t){var e=t.data.message,a={status:!0,addressType:r,addressID:o};d.processResponse(t,{error:function(t){__globals.showConfirmation({title:__globals.getJSString("confirm_error_title"),text:e,type:"error"})}},function(t){__globals.showConfirmation({title:__globals.getJSString("confirm_error_title"),text:e,type:"success"}),$("#address_"+o).fadeOut("slow",function(){$(this).remove(),l.getAddresses()}),c.$emit("changeAddress",a)})})})},l.close=function(){c.$emit("changeAddress",{status:!1}),i.closeThisDialog({address_list:!0})},l.primaryAddress=function(t,e,a){l.addressData.primary=e,l.updateURL={apiURL:"user.get primary.address",addressID:t},o.process(l.updateURL,l).success(function(t){t.data.message;d.processResponse(t,null,function(t){l.getAddresses()})})},l.selectAddressForOrder=function(t,r,s){n.fetch({apiURL:"user.get.address.for.order",addressID:t,couponAmt:l.couponAmt}).success(function(o){d.processResponse(o,null,function(t){var e={status:!0,addressSameAs:s,responseData:o.data,addressType:r,totalOrder:o.data.shipping};if("billing"==r){var a={status:!1,addressType:"billing",totalOrder:o.data.shipping};c.$emit("changeAddress",a)}c.$emit("changeAddressInOrder",e),i.closeThisDialog({address_list:!0})})})}}])}(),function(){"use strict";angular.module("UserApp.editAddress",[]).controller("UserAddressEditController",["$scope","__Form","appServices","__Utils","$state",function(e,t,a,o,r){var s=this;(s=t.setup(s,"user_address_edit_form","addressData")).addressID=__globals.getAppJSItem("addressID"),s.loadSelectBox=!1,s.addressType=__globals.getAppJSItem("configGetAddressType"),s.countriesCollection=__globals.getAppJSItem("countries"),s.countries=s.countriesCollection.data.countries,s.countries_select_config=__globals.getSelectizeOptions({valueField:"value",labelField:"text",searchField:["text"]}),_.isEmpty(s.addressID)?(s.addressData=e.ngDialogData.address,_.isEmpty(s.addressData)||(s.loadSelectBox=!0),s.addressID=s.addressData.id,s.getRoute=""):(s.addressID=s.addressData.id,(s=t.updateModel(s,__globals.getAppJSItem("addressData"))).getRoute=__globals.getAppJSItem("getRoute"));s.update=function(){s.updateURL={apiURL:"user.address.update",addressID:s.addressID},t.process(s.updateURL,s).success(function(t){a.processResponse(t,function(t){1==t&&e.closeThisDialog({address_updated:!0,selectedAddressID:e.ngDialogData.selectedAddressID})})})},s.close=function(){e.closeThisDialog({address_updated:!0,selectedAddressID:e.ngDialogData.selectedAddressID})}}])}(),function(){"use strict";angular.module("UserApp.resendActivationEmail",[]).controller("UserResendActivationEmailController",["__Form","appServices","__Utils",function(t,e,a){var o=this;(o=t.setup(o,"form_user_resend_activation_email","userData",{secured:!1})).submit=function(){t.process("user.resend.activation.email.proccess",o).success(function(t){e.processResponse(t,null,function(){window.location=a.apiURL("user.resend_activation_email.success")})})}}])}(),function(){"use strict";angular.module("PublicApp.myWishList",[]).controller("MyWishListController",["$scope","appServices","__Utils","$compile","__DataStore",function(o,r,s,i,n){var d=this;d.pageStatus=!1,d.calculateRating=function(t){var e=t-Math.floor(t),a=0,o=0;return e=0<=e&&e<.5?(a=Math.round(t),o=Math.ceil(5-t),0):.5<e&&e<1?(a=Math.ceil(t),o=Math.round(5-t),0):(a=Math.floor(t),o=Math.floor(5-t),Math.round(e)),_.repeat('<i class="fa fa-star lw-color-gold"></i>',a)+_.repeat('<i class="fa fa-star-half-o lw-color-gold"></i>',e)+_.repeat('<i class="fa fa-star lw-color-gray"></i>',o)},this.getWishListPaginationData=function(t){var e="";if(_.isEmpty(t)||-1==t.search("http")){e=s.apiURL("product.my_wishlist.details");var a="";null!=t&&(a="?page="+t),e+=a}else e=t;n.fetch(e,{fresh:!0}).success(function(t){var e=t.data;r.processResponse(t,null,function(){if(d.wishListData=e.wishListData,d.totalProducts=e.totalProducts,d.paginationLinks=e.paginationLinks,d.wishListCollection=[],_.forEach(d.wishListData,function(t,e){_.defer(function(){$("#lwWislListProductDesc"+t.productId).html(i('<p lw-expander slice-count="250">'+t.productDescription+"</p>")(o))}),d.wishListCollection.push({productId:t.productId,productImage:t.productImage,createdOn:t.createdOn,detailURL:t.detailURL,itemRating:t.itemRating,productDescription:t.productDescription,productName:t.productName})}),d.paginationLinks)$(".lw-pagination-container").html(d.paginationLinks);d.pageStatus=!0})})},this.getWishListPaginationData(""),$(".lw-pagination-container").on("click","a",function(t){t.preventDefault();var e=$(this).attr("href");d.getWishListPaginationData(e)}),d.removeFromWishlist=function(t){n.post({apiURL:"product.wishlist.remove_process",productId:t},d).success(function(t){r.processResponse(t,null,function(t){1==t&&d.getWishListPaginationData("")})})}}])}(),function(){"use strict";angular.module("PublicApp.myRatingList",[]).controller("MyRatingListController",["$scope","appServices","__Utils","$compile","__DataStore",function(o,r,s,i,n){var d=this;d.pageStatus=!1,this.getRatingListPaginationData=function(t){var e="";if(_.isEmpty(t)||-1==t.search("http")){e=s.apiURL("product.my_rating.details");var a="";null!=t&&(a="?page="+t),e+=a}else e=t;n.fetch(e,{fresh:!0}).success(function(t){var e=t.data;r.processResponse(t,null,function(){if(d.ratingListData=e.ratingsData,d.paginationLinks=e.paginationLinks,d.ratingData=[],_.forEach(d.ratingListData,function(t,e){_.defer(function(){$("#lwProductDesc"+t.productId).html(i('<p lw-expander slice-count="250">'+t.productDescription+"</p>")(o))}),d.ratingData.push({productId:t.productId,productImage:t.productImage,createdOn:t.createdOn,detailURL:t.detailURL,itemRating:t.itemRating,productDescription:t.productDescription,productName:t.productName})}),d.paginationLinks)$(".lw-pagination-container").html(d.paginationLinks);d.pageStatus=!0})})},this.getRatingListPaginationData(""),$(".lw-pagination-container").on("click","a",function(t){t.preventDefault();var e=$(this).attr("href");d.getRatingListPaginationData(e)}),d.calculateRating=function(t){var e="",a=Math.floor(t),o=Math.floor(5-a);return t%1!=0&&(e='<i class="fa fa-star-half-o lw-color-gold"></i>',o-=1),_.repeat('<i class="fa fa-star lw-color-gold"></i>',a)+e+_.repeat('<i class="fa fa-star lw-color-gray"></i>',o)}}])}();