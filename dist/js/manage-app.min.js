/*!
 LivelyCart Pro
 version: 3.x
 --------------------------------------------------------------------- 
 Build Timestamp: 1569677944
 Build Date: Sat Sep 28 2019 19:09:04 GMT+0530 (India Standard Time)
--------------------------------------------------------------------- */
!function(){"use strict";angular.module("ManageApp",["ngMessages","ngAnimate","ngSanitize","ui.router","ngNotify","ngDialog","angularFileUpload","angular-loading-bar","selectize","NgSwitchery","lw.core.utils","lw.security.main","lw.auth","lw.data.datastore","lw.data.datatable","lw.form.main","app.service","app.http","app.notification","app.form","app.fancytree","app.directives","ManageApp.master","UserApp.manage","UserApp.manageUserChangePassword","ManageApp.userDetailDialog","UserApp.profile","UserApp.profileEdit","UserApp.changePassword","UserApp.changeEmail","ManageApp.category","ManageApp.categoryAddDialog","ManageApp.categoryAdd","ManageApp.categoryEditDialog","ManageApp.categoryEdit","ManageApp.categoryDelete","ManageApp.brand","ManageApp.brandDetailDialog","ManageApp.brandAddDialog","ManageApp.brandAdd","ManageApp.brandEditDialog","ManageApp.brandEdit","ManageApp.coupon","ManageProductApp.details","ManageProductApp.add","ManageProductApp.uploadedMedia","ManageProductApp.edit","ManageProductApp.editDetails","ManageProductApp.notifyMailCustomer","ManageApp.shipping","ManageApp.tax","ManageApp.report","ManageProductApp.images","ManageProductApp.addImage","ManageProductApp.editImage","ManageProductApp.options","ManageProductApp.addOption","ManageProductApp.editOption","ManageProductApp.addOptionValues","ManageProductApp.optionValues","ManageProductApp.specification","ManageProductApp.addSpecification","ManageProductApp.awatingUser","ManageProductApp.addFaq","ManageProductApp.editFaq","ManageProductApp.editSpecification","ManageProductApp.ratings","ManageProductApp.faqs","ManagePagesApp.list","ManagePagesApp.add","ManagePagesApp.add.dialog","ManagePagesApp.edit.dialog","ManagePagesApp.edit","ManagePagesApp.page.details","manageApp.storeSettingsEdit","manageApp.GeneralSettings","manageApp.CurrencySettings","manageApp.OrderSettings","manageApp.PaymentSettings","manageApp.ProductSettings","manageApp.PlacementSettings","manageApp.ContactSettings","manageApp.SliderSettings","manageApp.userSettings","manageApp.emailSettings","manageApp.privacyPolicySettings","manageApp.socialSettings","ManageApp.orderList","ManageApp.orderUpdate","ManageApp.orderCancel","ManageApp.orderLogList","ManageApp.orderDialogList","ManageApp.payment","ManageApp.paymentDetailsDialog","ManageApp.rawDataDialog","ManageApp.orderPaymentUpdate","ManageApp.orderPaymentRefund","ManageApp.orderContact","uploadManagerEngine","DashboardApp.main","ManageApp.brandDeleteDialog","ManageApp.productList","ManageApp.orderDetails","ManageApp.orderDelete","ManageApp.paymentDelete","manageApp.CssStyleSettings","manageApp.EmailTemplateSettings","UserApp.login","UserApp.logout","manageApp.landingPageSettings","manageApp.manageFooterSettings","ManageApp.RolePermissionDataServices","ManageApp.RolePermissionEngine","ManageApp.specificationPresetList","ManageApp.ShippingTypeEngine","ManageProductApp.seoMeta","ManageApp.productRatingList","ManageApp.TransliterateDataServices","ManageApp.transliterateDialog"]).run(["__Auth","$state","$rootScope",function(e,t,a){e.verifyRoute(t),a.__ngSupport=window.__ngSupport}]).config(["$stateProvider","$urlRouterProvider","$interpolateProvider",function(e,t,a){a.startSymbol("[["),a.endSymbol("]]"),t.otherwise("/dashboard"),e.state("home",__globals.stateConfig("/home","home",{access:{}})).state("dashboard",__globals.stateConfig("/dashboard","dashboard/details",{access:{}})).state("profile",__globals.stateConfig("/profile","user/manage-profile",{access:{}})).state("profileEdit",__globals.stateConfig("/profile/edit","user/profile-edit",{access:{}})).state("changePassword",__globals.stateConfig("/change-password","user/change-password",{access:{}})).state("changeEmail",__globals.stateConfig("/change-email","user/change-email",{access:{}})).state("users",__globals.stateConfig("/users","user/manage/list",{access:{}})).state("categories",__globals.stateConfig("/categories/:mCategoryID?","category/list",{access:{}})).state("products",__globals.stateConfig("/products/:mCategoryID?/:brandID?","product/manage/list",{access:{},params:{mCategoryID:{squash:!0,value:null},brandID:{squash:!0,value:null}}})).state("categories.add",__globals.stateConfig("^/categories/add/:mCategoryID?",null,{controller:"CategoryAddDialogController",access:{},params:{mCategoryID:{squash:!0}}})).state("categories.edit",__globals.stateConfig("^/categories/:catID/edit",null,{controller:"CategoryEditDialogController",access:{},params:{catID:{squash:!0}}})).state("specificationsPreset",__globals.stateConfig("/specifications-preset","specification-preset/manage/list",{access:{}})).state("specificationsPreset.add",__globals.stateConfig("/add",null,{access:{},controller:"PresetAddDialogController"})).state("specificationsPreset.edit",__globals.stateConfig("/:presetId/edit",null,{access:{},controller:"PresetEditDialogController"})).state("shippingType",__globals.stateConfig("/shipping-type","shipping-type/manage/list",{access:{}})).state("shippingType.add",__globals.stateConfig("/add",null,{access:{},controller:"ShippingTypeAddDialogController"})).state("shippingType.edit",__globals.stateConfig("/:shippingTypeId/edit",null,{access:{},controller:"ShippingTypeEditDialogController"})).state("productRating",__globals.stateConfig("/product-rating","product-rating/list",{access:{}})).state("brands",__globals.stateConfig("/brands","brand/manage/list",{access:{}})).state("brands.add",__globals.stateConfig("/add",null,{controller:"BrandAddDialogController",access:{}})).state("brands.edit",__globals.stateConfig("/:brandID/edit",null,{controller:"BrandEditDialogController",access:{}})).state("coupons",__globals.stateConfig("/coupons","coupon/manage/list",{access:{}})).state("coupons.current",__globals.stateConfig("/current","coupon/manage/list",{access:{}})).state("coupons.expired",__globals.stateConfig("/expired","coupon/manage/list",{access:{}})).state("coupons.upcoming",__globals.stateConfig("/up-coming","coupon/manage/list",{access:{}})).state("shippings",__globals.stateConfig("/shipping","shipping/manage/list",{access:{}})).state("shippings.add",__globals.stateConfig("/add",null,{controller:"ShippingAddDialogController",access:{}})).state("shippings.edit",__globals.stateConfig("/:shippingID/edit",null,{controller:"ShippingEditDialogController",access:{}})).state("taxes",__globals.stateConfig("/taxes","tax/manage/list",{access:{}})).state("taxes.add",__globals.stateConfig("/add",null,{controller:"TaxAddDialogController",access:{}})).state("taxes.edit",__globals.stateConfig("/:taxID/edit",null,{controller:"TaxEditDialogController",access:{}})).state("product_add",__globals.stateConfig("/product/add","product/manage/add",{access:{}})).state("category_product_add",__globals.stateConfig("/product/add/:categoryID","product/manage/add",{access:{}})).state("product_edit",__globals.stateConfig("/product/:productID/edit","product/manage/edit",{access:{}})).state("product_edit.details",__globals.stateConfig("/details","product/manage/edit-details",{access:{}})).state("product_edit.options",__globals.stateConfig("/options","product/manage/options/list",{access:{}})).state("product_edit.specification",__globals.stateConfig("/specification","product/manage/specification/list",{access:{}})).state("product_edit.ratings",__globals.stateConfig("/ratings","product/manage/ratings/list",{access:{}})).state("product_edit.faq",__globals.stateConfig("/faqs","product/manage/faq/list",{access:{}})).state("product_edit.awating_user",__globals.stateConfig("/awating-user","product/manage/awating-user/list",{access:{}})).state("product_edit.seo_meta",__globals.stateConfig("/seo-meta","product/manage/seo-meta/edit",{access:{}})).state("pages",__globals.stateConfig("/pages/:parentPageID?","pages/manage/list",{access:{},params:{parentPageID:{squash:!0,value:null}}})).state("pages.add",__globals.stateConfig("^/pages/add/",null,{controller:"ManagePagesAddDialogController",access:{}})).state("pages.edit",__globals.stateConfig("^/pages/:pageID/edit",null,{controller:"ManagePagesEditDialogController",access:{}})).state("page_details",__globals.stateConfig("/details/:pageID/:pageTitle","pages/manage/details",{access:{}})).state("store_settings_edit",__globals.stateConfig("/setting","store/edit_settings",{access:{}})).state("store_settings_edit.general",__globals.stateConfig("/general","store.general",{access:{}})).state("store_settings_edit.product",__globals.stateConfig("/product","store.product",{access:{}})).state("store_settings_edit.placement",__globals.stateConfig("/placements","store.placement",{access:{}})).state("store_settings_edit.currency",__globals.stateConfig("/currency","store.currency",{access:{}})).state("store_settings_edit.order",__globals.stateConfig("/order","store.order",{access:{}})).state("store_settings_edit.payment",__globals.stateConfig("/payment","store.payment",{access:{}})).state("store_settings_edit.contact",__globals.stateConfig("/contact","store.contact",{access:{}})).state("store_settings_edit.user",__globals.stateConfig("/users","store.user",{access:{}})).state("store_settings_edit.privacy_policy",__globals.stateConfig("/privacy-policy","store.privacy-policy",{access:{}})).state("store_settings_edit.social",__globals.stateConfig("/social","store.social",{access:{}})).state("store_settings_edit.social_authentication_setup",__globals.stateConfig("/social-authentication-setup","store.social-login",{access:{}})).state("store_settings_edit.language",__globals.stateConfig("/language",null,{controller:"LanguageController",access:{}})).state("store_settings_edit.email_settings",__globals.stateConfig("/email-settings","store.email",{access:{}})).state("store_settings_edit.manage_footer_settings",__globals.stateConfig("/manage-footer","store.manage-footer",{access:{}})).state("store_settings_edit.landing_page",__globals.stateConfig("/landing-page","store.landing-page-settings",{controller:"LandingPageSettingController as landingPageSettingCtrl",access:{}})).state("css_styles",__globals.stateConfig("/css-style","store/css-style",{access:{}})).state("slider_setting",__globals.stateConfig("/slider-setting","slider/manage/list",{access:{}})).state("slider_setting_add",__globals.stateConfig("/slider-setting/add","slider/manage/add",{access:{}})).state("slider_setting_edit",__globals.stateConfig("/slider-setting/:sliderID/edit","slider/manage/edit",{access:{}})).state("product_edit.images",__globals.stateConfig("/images","product/manage/Images/list",{access:{}})).state("orders",__globals.stateConfig("/orders","order/manage/list",{access:{}})).state("orders.active",__globals.stateConfig("/active/:userID?","order/manage/list",{access:{},params:{userID:{squash:!0,value:null}}})).state("orders.cancelled",__globals.stateConfig("/cancelled/:userID?","order/manage/list",{access:{},params:{userID:{squash:!0,value:null}}})).state("orders.completed",__globals.stateConfig("/completed/:userID?","order/manage/list",{access:{}})).state("order_details",__globals.stateConfig("/order/:orderId/details","order/manage/details-view",{access:{}})).state("reports",__globals.stateConfig("/report","report/manage/list",{access:{}})).state("order_report",__globals.stateConfig("/order-report","report/manage/order-report",{access:{}})).state("payment_report",__globals.stateConfig("/payment-report","report/manage/payment-report",{access:{}})).state("product_report",__globals.stateConfig("/product-report","report/manage/product-report",{access:{}})).state("payments",__globals.stateConfig("/payments","order/manage/payment-list",{access:{}})).state("invalid_request",__globals.stateConfig("/invalid-request","errors/invalid-request")).state("not_found",__globals.stateConfig("/not-found","errors.manage-not-exist")).state("not_exist",__globals.stateConfig("/not-exist","errors.manage-not-exist")).state("unauthorized",__globals.stateConfig("/unauthorized","errors.unauthorized",{access:{}})).state("google_social_doc",__globals.stateConfig("/google-setup-steps","store.google-help",{access:{}})).state("facebook_social_doc",__globals.stateConfig("/facebook-setup-steps","store.facebook-help",{access:{}})).state("twitter_social_doc",__globals.stateConfig("/twitter-setup-steps","store.twitter-help",{access:{}})).state("github_social_doc",__globals.stateConfig("/github-setup-steps","store.github-help",{access:{}})).state("email_templates",__globals.stateConfig("/email-templates","dynamic-mail-templates/email-template-list",{controller:"EmailTemplateListController as emailTemplateListCtrl"})).state("show_template",__globals.stateConfig("/:emailTemplateId/templates","dynamic-mail-templates/email-template-edit",{controller:"EmailTemplateEditController as emailTemplateEditCtrl",resolve:{}})).state("role_permission",__globals.stateConfig("/role-permissions","user/role-permission/list",{access:{},controller:"RolePermissionListController as rolePermissionListCtrl"}))}])}(),function(){"use strict";angular.module("ManageApp.master",[]).controller("ManageController",["$rootScope","__DataStore","$scope","__Auth","appServices","appNotify","$state","$transitions","__Utils",function(e,a,t,o,n,s,i,r,l){var c=this;c.pageStatus=!1,o.refresh(function(e){c.auth_info=e}),e.$on("update.new.order.placed.count",function(e,t){c.newOrderPlacedCount=t.newOrderPlacedCount}),c.unhandledError=function(){s.error(__globals.getReactionMessage(19))},c.searchSidebarFilter=function(e){_.isEmpty(e)?$("#lwToggleSidebar .collapse").removeClass("show"):$("#lwToggleSidebar .collapse").addClass("show")},e.$on("lw.page.css_styles",function(e,t){c.pageCSSStyles=t.header_bg_color}),e.$on("lw.events.state.change_start",function(){if(n.closeAllDialog(),document.querySelector(".show-sweet-alert")){var e=$(".sweet-close");$(e).trigger("click")}c.currentStateStatus=!1}),e.$on("lw.auth.event.reset",function(e,t){c.auth_info=t}),e.$on("lw.form.event.process.started",function(e,t){$('button[type="submit"] span').addClass("fa fa-spinner fa-spin"),$("a, button").prop("disabled",!0),$('button[type="submit"]').prop("disabled",!0)}),e.$on("lw.form.event.process.finished",function(e,t){$('button[type="submit"] span').removeClass("fa fa-spinner fa-spin"),$('button[type="submit"]').prop("disabled",!1),$("a, button").prop("disabled",!1)}),e.$on("lw.form.event.fetch.started",__globals.showFormLoader),e.$on("lw.datastore.event.fetch.finished",__globals.hideFormLoader),e.$on("lw.form.event.process.error",c.unhandledError),e.$on("lw.datastore.event.fetch.error",c.unhandledError),c.showUploadManagerDialog=function(){n.showDialog(c,{templateUrl:__globals.getTemplateURL("upload-manager.upload-manager-dialog")},function(e){})},r.onSuccess({},function(e){var t=e.router.stateService.current,a=__globals.getScrollOffsets(),o=Math.round(a.y);_.includes(["store_settings_edit","store_settings_edit.general","store_settings_edit.product","store_settings_edit.placement","store_settings_edit.currency","store_settings_edit.order","store_settings_edit.contact","store_settings_edit.term_condition","store_settings_edit.privacy_policy","store_settings_edit.social","store_settings_edit.social_authentication_setup","store_settings_edit.language","store_settings_edit.css-style"],t.name)||$("html, body").animate({scrollTop:0},o<500?500:o)}),c.openHelpDailog=function(e,t){c.templateTitle=t,n.showDialog(c,{templateUrl:__globals.getTemplateURL(e)},function(e){})},e.$on("lw-open-login-dialog",function(e,t){e.preventDefault(),$("html").hasClass("lw-manage-login-page-active")||($("html").addClass("lw-manage-login-page-active"),n.loginRequiredDialog("login-dialog",t.data,function(e,t){$("html").removeClass("lw-manage-login-page-active"),a.reset(),e&&i.reload()}))}),$.typeahead({input:".lw-module-search",minLength:1,order:"asc",hint:!1,dynamic:!0,group:!0,delay:500,searchOnFocus:!1,emptyTemplate:"no result found",source:{"Application Settings":{display:["keywords","keys"],data:[{keywords:"General Settings",state:"store_settings_edit.general",keys:"Store Name, Logo, Invoice Logo, Theme Colors, Business Email, Default Home Page Content, Language, TimeZone, Store Address"},{keywords:"Order Settings",state:"store_settings_edit.order",keys:"Enable Guest Order, Apply Tax, Calculate Tax, Customer Order"},{keywords:"Payment Settings",state:"store_settings_edit.payment",keys:"Paypal, Check, Bank Transfer, Cod, Stripe, Razorpay, Iyzico, Other, Paytm"},{keywords:"Currency Settings",state:"store_settings_edit.currency",keys:"Currency, Code, Symbol, Format, Multiple Currencies, Auto Refresh, Currency Markup"},{keywords:"Product Settings",state:"store_settings_edit.product",keys:"Out Of Stock, Paginated Product, Per Page On List, Enable Rating, Review, Buyers Can Add Rating, Facebook, Twitter, Social Sharing Links"},{keywords:"User Settings",state:"store_settings_edit.user",keys:"Register, New User, Change Email, Product Wishlist, Recaptcha, captcha, Terms & Conditions"},{keywords:"Social Links Settings",state:"store_settings_edit.social",keys:"Facebook Username, Twitter Handle, Social Links"},{keywords:"Contact Settings",state:"store_settings_edit.contact",keys:"Contact Form, Address, Telephone, Contact Page"},{keywords:"Placement and Misc Settings",state:"store_settings_edit.placement",keys:"Categories Menu, Brand Menu, Credit Info, Google Analytics, Addition Footer, Website Notification, Append Email Message"},{keywords:"Social Login Settings",state:"store_settings_edit.social_authentication_setup",keys:"Facebook Login, Google Login, Twitter Login, Github Login"},{keywords:"Privacy Policy Settings",state:"store_settings_edit.privacy_policy",keys:"Privacy"},{keywords:"Email Settings",state:"store_settings_edit.email_settings",keys:"Mail From Address, Mail From Name, Mail Driver, Port, Host, Mail Username, Mail Encryption, Mail Password, Mail Domain, Mailgun Password, Mail Endpoint"},{keywords:"Footer Settings",state:"store_settings_edit.manage_footer_settings",keys:"Header Advertisement, Footer Advertisement",keys:"Footer Editor"},{keywords:"Landing Page Settings",state:"store_settings_edit.landing_page",keys:"Slider, Page Content, Latest Product, Featured Product"},{keywords:"Slider Settings",state:"slider_setting",keys:"Add New Slider, Image Slide, Enable autoplay, Autoplay Speed Product, Edit New Slider"},{keywords:"CSS Style",state:"css_styles",keys:"CSS Style"},{keywords:"Manage Email Templates",state:"css_styles",keys:"Template, Name, Email"}]},"Manage Products":{display:["keywords","keys"],data:[{keywords:"Manage Brands",state:"brands",keys:"Add Brand, Edit Brand, Status, Logo"},{keywords:"Manage Categories",state:"categories",keys:"Add Category, Parent Category, Status, Edit Category, Subcategories, Add Products"},{keywords:"Manage Products",state:"products",keys:"Add Product, Product ID, Mark as Featured, Out of Stock, Comming Soon, Launching On, Available, Categories, Brand, Image, Youtube Video, Old Price, Description, Related Products, Thumbnail, Manage Options, Manage Images, Manage Specifications, Manage Ratings, Manage FAQs, Manage Awating User, Send Notification"},{keywords:"Manage Sepcification Presets",state:"specificationsPreset",keys:"Add New Preset, Edit Preset"}]},"Manage Reports and Orders":{display:["keywords","keys"],data:[{keywords:"Manage Orders",state:"orders.active",keys:"Order ID, Contact User, Order Log, Contact User, Update Payment, Payment Method, Order Status, Refund, Transaction ID, Comment, Completed, Active, Cancelled"},{keywords:"Manage Order Payments",state:"payments",keys:"Order ID, Transaction ID, Payment Method, Fee, Total Amount"},{keywords:"Order Reports",state:"order_report",keys:"Order ID, Name, Order Status, Payment Status, Placed On, Total Amount"},{keywords:"Payment Reports",state:"payment_report",keys:"Credit Amount, Debit Amount, Difference Amount"},{keywords:"Product Report",state:"product_report",keys:"Product Report, Qty, Title"}]},Other:{display:["keywords","keys"],data:[{keywords:"Manage Pages",state:"pages",keys:"Add Page, Title, Type, Description, Parent Page, Add to menu, Hide Sidebar, Active, List Order"},{keywords:"Manage Users",state:"users",keys:"New User, First Name, Last Name, Email, Role, Password, Password Confirmation, Change Password, User Order, User Details, Permission, Contact, Active, Deleted, Never Activated"},{keywords:"Manage Roles",state:"role_permission",keys:"New User Role, Title, Preset, Permission"}]},"Manage Reports":{display:["keywords","keys"],data:[{keywords:"Order Report",state:"order_report",keys:"Order Report, Order Payment Report, Order ID, Payment Status, Total, Name, Generate Excel"},{keywords:"Payment Report",state:"payment_report",keys:"Payment Report, Credit Amount, Debit Amount, Currency, Difference Amount, Generate Excel"},{keywords:"Product Report",state:"product_report",search_term:"paypal",keys:"Product Report, Title, Qty"}]},"Manage Coupons / Discounts":{display:["keywords","keys"],data:[{keywords:"Manage Coupons",state:"coupons",keys:"Add New Coupon, Discount, Title, Coupon Code, Discount Type"},{keywords:"Expired Coupons",state:"coupons.expired",keys:"Expired Coupons"},{keywords:"Up-coming Coupons",state:"coupons.upcoming",keys:"Up-coming Coupons, Upcoming Coupons"}]},"Manage Shipping Rules":{display:["keywords","keys"],data:[{keywords:"Manage Shipping Rules",state:"shippings",keys:"Add Shipping Rule, Edit Shipping Rule, Countries, Charges, Charge Type"}]},"Manage Shipping Method":{display:["keywords","keys"],data:[{keywords:"Manage Shipping Method",state:"shippingType",keys:"Add Shipping Method, Edit Shipping Method"}]},"Manage Taxes":{display:["keywords","keys"],data:[{keywords:"Manage Taxes",state:"taxes",keys:"Add Tax, Edit Tax, Tax Settings,  Apply Tax"}]},"search results":{display:"name",ajax:function(e,t){return{type:"GET",path:"searchResult",url:l.apiURL({apiURL:"product.search.term",searchQuery:e}),callback:{done:function(e){return _.map(e.data.searchResult,function(e){var t="",a={};switch(e.type){case 1:t="product_edit.details",a={productID:e.id};break;case 2:t="categories",a={mCategoryID:e.id};break;case 3:t="brands.edit",a={brandID:e.id};break;default:t="",a={}}e.state=t,e.params=a}),e.data}}}}}},callback:{onClick:function(e,t,a,o){i.go(a.state,a.params)}},debug:!0})}]).controller("HelpController",["$rootScope","$scope",function(e,t){_.has(t.ngDialogData,"templateTitle")&&(this.templateTitle=t.ngDialogData.templateTitle);new ClipboardJS(".lw-copy-action").on("success",function(e){$(e.trigger).attr("title","Copied!"),e.clearSelection()}),this.closeDialog=function(){t.closeThisDialog()}}])}(),function(){"use strict";window.angular.module("uploadManagerEngine",[]).controller("UploadManagerController",["__DataStore","appServices",function(e,t){}]).controller("UploadManagerDialogController",["__DataStore","appServices","FileUploader","__Utils","$scope",function(t,n,e,a,o){var s=this,i=s.uploader=new e({url:a.apiURL("upload_manager.upload"),autoUpload:!0,headers:{"X-XSRF-TOKEN":a.getXSRFToken()}});s.close=function(){o.closeThisDialog()},s.getFiles=function(){t.fetch("upload_manager.files",{fresh:!0}).success(function(e){n.processResponse(e,null,function(){s.files=e.data.files})})},s.getFiles(),i.filters.push({name:"customFilter",fn:function(e,t){return this.queue.length<1e3}}),i.onCompleteItem=function(e,t,a,o){n.processResponse(t,null,function(){})},i.onCompleteAll=function(){s.getFiles()},s.selectImage=function(e){var t='<img src="'+e+'"/>';CKEDITOR.instances.description.insertHtml(t),s.close()},s.selectDocument=function(e,t){var a='<a href="'+e+'"/>'+t+"</a>";CKEDITOR.instances.description.insertHtml(a),s.close()},s.delete=function(e){t.post({apiURL:"upload_manager.delete",fileName:e}).success(function(e){n.processResponse(e,null,function(){s.getFiles()})})}}])}(window),function(){"use strict";angular.module("UserApp.manage",[]).controller("ManageUsersController",["$scope","__DataStore","appServices",function(a,n,s){var o=[{name:"name",template:"#userNameColumnTemplate",orderable:!0},{name:"email",orderable:!0},{name:"role_title",orderable:!0},{name:"creation_date",orderable:!0,template:"#creationDateColumnTemplate"},{name:"last_login",orderable:!0,template:"#userLastLoginColumnTemplate"},{name:null,template:"#userActionColumnTemplate"}],i=[{name:"name",template:"#userNameColumnTemplate",orderable:!0},{name:"email",orderable:!0},{name:"role_title",orderable:!0},{name:"deleted_on",orderable:!0},{name:"last_login",orderable:!0,template:"#userLastLoginColumnTemplate"},{name:null,template:"#userActionColumnTemplate"}],r={activeTab:{id:"activeUsersTabList",status:1},deleted:{id:"deletedUsersTabList",status:5},never_activated:{id:"neverActivatedUsersTabList",status:4}},l=this;$("#manageUsersTabs a").click(function(e){e.preventDefault();var t=$(this).attr("aria-controls"),a=r[t];_.isEmpty(a)||($(this).tab("show"),l.getUsers(a.id,a.status))}),l.getUsers=function(e,t){l.usersListDataTable&&l.usersListDataTable.destroy(),l.usersListDataTable=n.dataTable("#"+e,{url:{apiURL:"manage.user.list",status:t},dtOptions:{searching:!0,order:[[2,"desc"]]},columnsData:5===t?i:o,scope:a},null,function(e){l.isDemoMode=e._options.isDemoMode})},$('.nav li a[href="#activeTab"]').triggerHandler("click",!0),l.reloadDT=function(){n.reloadDT(l.usersListDataTable)},l.delete=function(e,t){__globals.showConfirmation({text:__ngSupport.getText(__globals.getJSString("user_delete_confirm_text"),{__name__:unescape(t)}),confirmButtonText:__globals.getJSString("delete_action_button_text")},function(){n.post({apiURL:"manage.user.delete",userID:e}).success(function(e){var t=e.data.message;s.processResponse(e,{error:function(){__globals.showConfirmation({title:"Deleted!",text:t,type:"error"})}},function(){__globals.showConfirmation({title:"Deleted!",text:t,type:"success"}),l.reloadDT()})})})},l.restore=function(e,t){__globals.showConfirmation({text:__ngSupport.getText(__globals.getJSString("user_restore_confirm_text"),{__name__:t}),confirmButtonText:__globals.getJSString("restore_action_button_text")},function(){n.post({apiURL:"manage.user.restore",userID:e}).success(function(e){var t=e.data.message;s.processResponse(e,{error:function(){__globals.showConfirmation({title:"Restore!",text:t,type:"error"})}},function(){__globals.showConfirmation({title:"Restore!",text:t,type:"success"}),l.reloadDT()})})})},l.changePassword=function(e,t){s.showDialog({userID:e,name:unescape(t)},{templateUrl:__globals.getTemplateURL("user.manage.change-password")},function(e){})},l.getUserDetails=function(e){n.fetch({apiURL:"manage.users.get.detail",userID:e}).success(function(e){e.data;s.processResponse(e,null,function(){s.showDialog(e.data,{templateUrl:__globals.getTemplateURL("user.manage.user-details")},function(e){})})})},l.openPermissionDialog=function(a,o){n.fetch({apiURL:"manage.user.read.user_permissions",userId:a}).success(function(e){var t=e.data;s.processResponse(e,null,function(){s.showDialog({requestData:t,userId:a,userFullName:o},{templateUrl:__globals.getTemplateURL("user.manage.user-dynamic-permission"),controller:"ManageUsersDynamicPermissionController as manageUsersDynamicPermissionCtrl"},function(e){})})})},l.contactDialog=function(e){s.showDialog({userId:e},{templateUrl:__globals.getTemplateURL("user.manage.contact")},function(e){})},l.addNewUser=function(e){s.showDialog(l,{templateUrl:__globals.getTemplateURL("user.manage.add")},function(e){_.has(e.value,"user_added")&&1==e.value.user_added&&l.reloadDT()})}}]).controller("UserAddController",["$scope","__Form","appServices","__DataStore",function(t,e,a,o){var n=this;n=e.setup(n,"add_new_user_form","userData"),o.fetch("manage.user.add.read.supportData").success(function(e){var t=e.data;a.processResponse(e,null,function(){n.userRoles=t.userRoles})}),n.submit=function(){e.process("manage.user.add",n).success(function(e){a.processResponse(e,null,function(){t.closeThisDialog({user_added:!0})})})},n.closeDialog=function(){t.closeThisDialog({user_added:!1})}}]).controller("ContactUserController",["$scope","__Form","appServices","__DataStore",function(t,a,o,e){var n=this;(n=a.setup(n,"contact_form","userData",{secured:!0,unsecuredFields:["message"]})).ngDialogData=t.ngDialogData,e.fetch({apiURL:"manage.user.contact.info",userId:n.ngDialogData.userId}).success(function(e){var t=e.data;o.processResponse(e,null,function(){n.userData=t,n=a.updateModel(n,n.userData)})}),n.submit=function(){a.process("manage.user.contact.process",n).success(function(e){o.processResponse(e,null,function(){t.closeThisDialog()})})},n.closeDialog=function(){t.closeThisDialog()}}]).controller("ManageUsersDynamicPermissionController",["$scope","__Form","__DataStore","appServices",function(t,e,a,o){var n=this;(n=e.setup(n,"user_dynamic_access","accessData",{secured:!0,unsecuredFields:[]})).ngDialogData=t.ngDialogData,n.userId=n.ngDialogData.userId,n.fullName=n.ngDialogData.userFullName,n.requestData=n.ngDialogData.requestData,n.permissions=n.requestData.permissions,n.userRoleTitle=n.ngDialogData.requestData.userRoleTitle,n.accessData.allow_permissions=n.requestData.allow_permissions,n.accessData.deny_permissions=n.requestData.deny_permissions,n.accessData.inherit_permissions=n.requestData.inherit_permissions,n.disablePermissions=function(e,a){_.map(e.children,function(t){_.includes(t.dependencies,a)&&_.delay(function(e){$('input[name="'+t.id+'"]').attr("disabled",!0)},500)})},n.checkedPermission={},_.map(n.accessData.allow_permissions,function(e){n.checkedPermission[e]="2"}),_.map(n.accessData.deny_permissions,function(a){n.checkedPermission[a]="3",_.map(n.permissions,function(e){var t=_.pluck(e.children,"id");_.includes(t,a)&&n.disablePermissions(e,a),_.has(e,"children_permission_group")&&_.map(e.children_permission_group,function(e){var t=_.pluck(e.children,"id");_.includes(t,a)&&n.disablePermissions(e,a)})})}),_.map(n.accessData.inherit_permissions,function(a){n.checkedPermission[a]="1",_.map(n.permissions,function(e){var t=_.pluck(e.children,"id");_.includes(t,a)&&0==e.children[0].inheritStatus&&"1"==e.children[0].result&&n.disablePermissions(e,a),_.has(e,"children_permission_group")&&_.map(e.children_permission_group,function(e){var t=_.pluck(e.children,"id");_.includes(t,a)&&0==e.children[0].inheritStatus&&"1"==e.children[0].result&&n.disablePermissions(e,a)})})}),n.checkPermission=function(a,o){_.isString(o)||(o=o.toString()),"2"==(n.checkedPermission[a]=o)?(_.includes(n.accessData.allow_permissions,a)||n.accessData.allow_permissions.push(a),_.includes(n.accessData.deny_permissions,a)&&(n.accessData.deny_permissions=_.without(n.accessData.deny_permissions,a))):("3"==o?_.includes(n.accessData.deny_permissions,a)||n.accessData.deny_permissions.push(a):_.includes(n.accessData.deny_permissions,a)&&(n.accessData.deny_permissions=_.without(n.accessData.deny_permissions,a)),_.includes(n.accessData.allow_permissions,a)&&(n.accessData.allow_permissions=_.without(n.accessData.allow_permissions,a))),_.map(n.permissions,function(t){var e=_.pluck(t.children,"id");_.includes(e,a)&&t.children[0].id==a&&_.map(t.children,function(e){_.includes(e.dependencies,a)&&"3"==o?$('input[name="'+e.id+'"]').attr("disabled",!0):_.includes(e.dependencies,a)&&"1"==o&&t.children[0].result&&0==t.children[0].inheritStatus?$('input[name="'+e.id+'"]').attr("disabled",!0):$('input[name="'+e.id+'"]').attr("disabled",!1)}),_.has(t,"children_permission_group")&&_.map(t.children_permission_group,function(t){var e=_.pluck(t.children,"id");_.includes(e,a)&&t.children[0].id==a&&_.map(t.children,function(e){_.includes(e.dependencies,a)&&"3"==o?$('input[name="'+e.id+'"]').attr("disabled",!0):_.includes(e.dependencies,a)&&"1"==o&&t.children[0].result&&0==t.children[0].inheritStatus?$('input[name="'+e.id+'"]').attr("disabled",!0):$('input[name="'+e.id+'"]').attr("disabled",!1)})})})},n.submit=function(){e.process({apiURL:"manage.user.write.user_permissions",userId:n.userId},n).success(function(e){o.processResponse(e,null,function(){t.closeThisDialog()})})},n.closeDialog=function(){t.closeThisDialog()}}])}(),function(){"use strict";angular.module("UserApp.manageUserChangePassword",[]).controller("ManageUserChangePasswordController",["$scope","__Form","appServices",function(t,e,a){var o=this;(o=e.setup(o,"change_password_form","changePasswordData",{secured:!0})).ngDialogData=t.ngDialogData,o.title=__ngSupport.getText(__globals.getJSString("user_change_password_title_text"),{__name__:unescape(o.ngDialogData.name)}),o.userID=o.ngDialogData.userID,o.submit=function(){e.process({apiURL:"manage.user.change_password.process",userID:o.userID},o).success(function(e){a.processResponse(e,null,function(){t.closeThisDialog()})})},o.closeDialog=function(){t.closeThisDialog()}}])}(),function(){"use strict";angular.module("ManageApp.userDetailDialog",[]).controller("ManageUserDetailsDialog",["$scope",function(e){this.ngDialogData=e.ngDialogData,this.userDetails=this.ngDialogData,this.closeDialog=function(){e.closeThisDialog()}}])}(),function(){"use strict";angular.module("UserApp.profile",[]).controller("UserProfileController",["__Form","appServices",function(t,a){var o=this;(o=t.setup(o,"user_profile__form","profileData")).request_completed=!1,t.fetch("user.profile.details").success(function(e){a.processResponse(e,null,function(){t.updateModel(o,e.data.profile),o.request_completed=!0})})}])}(),function(){"use strict";angular.module("UserApp.profileEdit",[]).controller("UserProfileEditController",["__Form","appServices",function(t,a){var o=this;(o=t.setup(o,"user_profile_edit_form","profileData")).request_completed=!1,t.fetch("user.profile.details").success(function(e){a.processResponse(e,null,function(){t.updateModel(o,e.data.profile),o.request_completed=!0})}),o.submit=function(){t.process("user.profile.update",o).success(function(e){a.processResponse(e,null,function(){})})}}])}(),function(){"use strict";angular.module("UserApp.changePassword",[]).controller("UserChangePasswordController",["__Form","appServices","__Utils","$state",function(e,t,a,o){var n=this;(n=e.setup(n,"user_password_update_form","userData",{secured:!0})).submit=function(){e.process("user.change_password.process",n).success(function(e){t.processResponse(e,null,function(){n.userData={},document.location.href==e.data.passwordRoute?window.location=window.appConfig.appBaseURL:o.go("dashboard")})})}}])}(),function(){"use strict";angular.module("UserApp.changeEmail",[]).controller("UserChangeEmailController",["__Form","appServices",function(e,a){var o=this;o.requestSuccess=!1,o.pageStatus=!1,o=e.setup(o,"user_change_email_form","userData",{secured:!0}),e.fetch("user.change_email.support_data").success(function(e){var t=e.data;a.processResponse(e,null,function(){o.changeEmail=t.newEmail,o.formattedDate=t.formattedDate,o.humanReadableDate=t.humanReadableDate,o.pageStatus=!0})}),o.submit=function(){e.process("user.change_email.process",o).success(function(e){var t=e.data;a.processResponse(e,null,function(){o.userData={},1==e.reaction&&(o.activationRequired=t.activationRequired,o.requestSuccess=!0,$(".lw-form").slideUp())})})}}])}(),function(){"use strict";angular.module("ManageApp.category",[]).controller("CategoryController",["$scope","__DataStore","appServices","$state","__Utils","$rootScope",function(e,t,a,o,n,s){var i=this,r=_.isEmpty(o.params.mCategoryID)?null:o.params.mCategoryID,l=o.current.name;i.currentStateName=l,i.pageContentLoaded=!1,i.parentCategoryExist=!1,i.categoryID=r,i.dtCategoriesColumnsData=[{name:"name",orderable:!0,template:"#categoriesColumnActionSubcategories"},{name:"status",orderable:!0,template:"#categoriesColumnStatus"},{name:null,template:"#categoriesColumnActionAddcategory"},{name:null,template:"#categoriesColumnActionAddProduct"},{name:null,template:"#categoriesColumnActionTemplate"}],i.getCategories=function(){i.categoriesDataTable&&i.categoriesDataTable.destroy(),i.categoriesDataTable=t.dataTable("#categoriesTabList",{url:{apiURL:"manage.category.list","categoryID?":r},dtOptions:{searching:!0},columnsData:i.dtCategoriesColumnsData,scope:e}),r?t.fetch({apiURL:"category.get.supportData",catID:r}).success(function(e){a.processResponse(e,null,function(){i.parentCategory=e.data.categoryData,i.isParentInactive=i.parentCategory.status,i.pageContentLoaded=!0,i.parentCategoryExist=!0,i.parentData=e.data.parentData,i.isInactiveParent=e.data.isInactiveParent})}):_.isEmpty(o.params.brandID)?i.pageContentLoaded=!0:url={apiURL:"manage.brand.product.list",brandId:o.params.brandID}},_.isEmpty(o.params.mCategoryID)&&_.defer(function(){i.getCategories()});_.isEmpty(o.params.mCategoryID)||i.getCategories();i.reloadDT=function(){t.reloadDT(i.categoriesDataTable)},i.detailDialog=function(e){t.fetch({apiURL:"manage.product.detailSupportData",productID:e}).success(function(e){var t=e.data;a.showDialog(t,{templateUrl:__globals.getTemplateURL("product.manage.detail-dialog")},function(e){})})},i.add=function(e){this.catID=e,t.fetch("category.fancytree.support-data").success(function(e){i.categories=e.data.categories,a.showDialog(i,{templateUrl:__globals.getTemplateURL("category.add-dialog")},function(e){_.has(e.value,"category_added")&&!0===e.value.category_added&&i.reloadDT()})})},i.edit=function(e){t.fetch({apiURL:"manage.category.get.details",catID:e}).success(function(e){a.processResponse(e,null,function(){i.categoryData=e.data,0===e.data.status?i.categoryData.status=!1:i.categoryData.status=!0,a.showDialog({id:i.categoryData.id,name:i.categoryData.name,status:i.categoryData.status,parent_cat:i.categoryData.parent_id},{templateUrl:__globals.getTemplateURL("category.edit-dialog")},function(e){_.has(e.value,"category_updated")&&!0===e.value.category_updated&&(i.reloadDT(),i.getProducts())})})})},i.deleteDialog=function(e,t){a.showDialog({categoryID:e,name:t},{templateUrl:__globals.getTemplateURL("category.delete-dialog")},function(e){_.has(e.value,"category_deleted")&&!0===e.value.category_deleted&&i.reloadDT()})}}])}(),function(){"use strict";angular.module("ManageApp.categoryAddDialog",[]).controller("CategoryAddDialogController",["$scope","$state","appServices","__DataStore",function(t,a,o,e){var n=this;e.fetch("category.fancytree.support-data").success(function(e){n.categories=e.data.categories,n.specificationPreset=e.data.specificationPreset,o.showDialog(n,{templateUrl:__globals.getTemplateURL("category.add-dialog")},function(e){_.has(e.value,"category_added")&&!0===e.value.category_added&&t.$parent.categoryCtrl.reloadDT(),a.go("categories")})})}])}(),function(){"use strict";angular.module("ManageApp.categoryAdd",[]).controller("CategoryAddController",["$scope","__Form","$state","appServices","__DataStore",function(t,e,a,o,n){var s=this;(s=e.setup(s,"category_add_form","categoryData")).categoryStatus=!1,s.categoryData.status=!0,s.assign_specification_select_config=__globals.getSelectizeOptions({valueField:"_id",labelField:"title",searchField:["title"]}),t.ngDialogData.catID?s.categoryData.parent_cat=t.ngDialogData.catID:s.categoryData.parent_cat=a.params.mCategoryID;s.categoryData.categories=t.ngDialogData.categories,_.forEach(s.categoryData.categories,function(e){e.key==s.categoryData.parent_cat&&(s.categoryStatus=!0,s.categoryName=__ngSupport.getText(__globals.getJSString("category_add_title_text"),{__name__:e.title}))}),s.submit=function(){e.process("manage.category.add",s).success(function(e){o.processResponse(e,null,function(e){t.closeThisDialog({category_added:!0})})})},s.closeDialog=function(){t.closeThisDialog()}}])}(),function(){"use strict";angular.module("ManageApp.categoryEditDialog",[]).controller("CategoryEditDialogController",["$scope","$state","appServices","__DataStore",function(a,o,n,e){e.fetch({apiURL:"manage.category.get.details",catID:o.params.catID}).success(function(t){n.processResponse(t,null,function(e){n.showDialog(t.data,{templateUrl:__globals.getTemplateURL("category.edit-dialog")},function(e){_.has(e.value,"category_updated")&&!0===e.value.category_updated&&a.$parent.categoryCtrl.reloadDT(),o.go("categories")})})})}])}(),function(){"use strict";angular.module("ManageApp.categoryEdit",[]).controller("CategoryEditController",["$scope","__Form","$state","appServices",function(t,e,a,o){var n=this;n.categoryStatus=!1,n.assign_specification_select_config=__globals.getSelectizeOptions({valueField:"_id",labelField:"title",searchField:["title"]}),n.categoryId=a.params.catID,n.updateURL={apiURL:"manage.category.update",catID:a.params.catID},n=e.setup(n,"form_category_edit","categoryData"),(n=e.updateModel(n,t.ngDialogData)).categoryData.parent_cat=t.ngDialogData.parent_id,n.categoryData.categories=t.ngDialogData.categories,_.forEach(n.categoryData.categories,function(e){e.key==n.categoryData.parent_cat&&(n.categoryStatus=!0,n.categoryName=e.title)}),n.update=function(){e.process(n.updateURL,n).success(function(e){o.processResponse(e,function(e){1===e&&t.closeThisDialog({category_updated:!0})})})},n.closeDialog=function(){t.closeThisDialog(),a.go("categories")}}])}(),function(){"use strict";angular.module("ManageApp.categoryDelete",[]).controller("CategoryDeleteController",["$scope","__Form","appServices","$state","__DataStore",function(t,a,o,e,n){var s=this;(s=a.setup(s,"form_category_delete","categoryData",{secured:!0})).categoryID=t.ngDialogData.categoryID,s.categoryName=_.unescape(t.ngDialogData.name),s.submit=function(e){a.process({apiURL:"manage.category.delete",categoryID:e},s).success(function(e){o.processResponse(e,function(e){1===e&&t.closeThisDialog({category_deleted:!0})})})},s.closeDialog=function(){t.closeThisDialog()}}])}(),function(){"use strict";angular.module("ManageApp.brand",[]).controller("BrandListController",["$scope","__DataStore","appServices",function(e,t,a){var o=this;o.brandsListDataTable=t.dataTable("#manageBrandList",{url:"manage.brand.list",dtOptions:{searching:!0,order:[[1,"asc"]],rowCallback:function(e,t,a){$("td:eq(0)",e).css("text-align","center"),$("td:eq(1)",e).css("text-align","center")}},columnsData:[{name:"logo_url",template:"#brandLogoColumnTemplate"},{name:"name",orderable:!0,template:"#brandNameColumnTemplate"},{name:"creation_date",orderable:!0,template:"#brandCreatedDateColumnTemplate"},{name:"status",orderable:!0,template:"#statusColumnTemplate"},{name:null,template:"#brandColumnActionTemplate"}],scope:e}),o.reloadDT=function(){t.reloadDT(o.brandsListDataTable)},o.detailDialog=function(e){t.fetch({apiURL:"manage.brand.detailSupportData",brandID:e}).success(function(e){var t=e.data;a.processResponse(e,null,function(){a.showDialog(t,{templateUrl:__globals.getTemplateURL("brand.manage.detail-dialog")},function(e){})})})},o.delete=function(e,t){a.showDialog({brandId:e,brandName:unescape(t)},{templateUrl:__globals.getTemplateURL("brand.manage.delete-dialog")},function(e){_.has(e.value,"brand_deleted")&&e.value.brand_deleted&&o.reloadDT()})}}])}(),function(){"use strict";angular.module("ManageApp.brandDetailDialog",[]).controller("BrandDetailDialogController",["$scope",function(e){this.ngDialogData=e.ngDialogData,this.brandData=this.ngDialogData,this.closeDialog=function(){e.closeThisDialog()}}])}(),function(){"use strict";angular.module("ManageApp.brandAddDialog",[]).controller("BrandAddDialogController",["$scope","$state","appServices",function(t,a,e){e.showDialog(this,{templateUrl:__globals.getTemplateURL("brand.manage.add-dialog")},function(e){_.has(e.value,"brand_added")&&!0===e.value.brand_added&&t.$parent.brandListCtrl.reloadDT(),a.go("brands")})}])}(),function(){"use strict";angular.module("ManageApp.brandAdd",[]).controller("BrandAddController",["$scope","__Form","appServices","FileUploader","__Utils","appNotify",function(t,e,a,o,n,s){var i=this;(i=e.setup(i,"manage_brand_add","brandData",{secured:!1})).brandData.status=!0,i.imagesSelectConfig=__globals.getSelectizeOptions({valueField:"name",labelField:"name",render:{item:function(e,t){return n.template("#logoListItemTemplate",e)},option:function(e,t){return n.template("#logoListOptionTemplate",e)}},searchField:["name"]}),i.images_count=0,i.getTempImagesMedia=function(){e.fetch("media.uploaded.images",{fresh:!0}).success(function(e){a.processResponse(e,null,function(){i.image_files=e.data.files,0<e.data.files.length&&(i.images_count=e.data.files.length)})})},i.getTempImagesMedia();var r=i.uploader=new o({url:n.apiURL("media.upload.image"),autoUpload:!0,headers:{"X-XSRF-TOKEN":n.getXSRFToken()}});r.filters.push({name:"customFilter",fn:function(e,t){return this.queue.length<1e3}}),i.currentUploadedFileCount=0,i.loadingStatus=!1,r.onAfterAddingAll=function(){i.loadingStatus=!0,s.info(__globals.getJSString("loading_text"),{sticky:!0})},r.onBeforeUploadItem=function(e){i.loadingStatus=!0},r.onSuccessItem=function(e,t){a.processResponse(t,{error:function(){},otherError:function(e){3==e&&s.error(t.data.message,{sticky:!1})}},function(){i.currentUploadedFileCount++})},r.onCompleteAll=function(){i.loadingStatus=!1,0<i.currentUploadedFileCount&&s.success(i.currentUploadedFileCount+" "+__globals.getJSString("file_uploaded_text"),{sticky:!1}),i.getTempImagesMedia(),i.currentUploadedFileCount=0},i.submit=function(){e.process("manage.brand.add",i).success(function(e){a.processResponse(e,null,function(){t.closeThisDialog({brand_added:!0,brand:e.data.brand})})})},i.showUploadedMediaDialog=function(){a.showDialog({image_files:i.image_files},{templateUrl:__globals.getTemplateURL("product.manage.uploaded-media")},function(e){_.has(e.value,"files")?(i.image_files=e.value.files,i.images_count=e.value.files.length):i.getTempImagesMedia()})},i.close=function(){t.closeThisDialog()}}])}(),function(){"use strict";angular.module("ManageApp.brandEditDialog",[]).controller("BrandEditDialogController",["$scope","$state","__DataStore","appServices",function(a,o,e,n){e.fetch({apiURL:"manage.brand.editSupportData",brandID:o.params.brandID}).success(function(t){n.processResponse(t,null,function(e){n.showDialog(t.data,{templateUrl:__globals.getTemplateURL("brand.manage.edit-dialog")},function(e){_.has(e.value,"brand_updated")&&!0===e.value.brand_updated&&a.$parent.brandListCtrl.reloadDT(),o.go("brands")})})})}])}(),function(){"use strict";angular.module("ManageApp.brandEdit",[]).controller("BrandEditController",["$scope","__Form","appServices","$state","FileUploader","__Utils","appNotify",function(t,e,a,o,n,s,i){var r=this;t.ngDialogData;r.brandId=o.params.brandID,r.updateURL={apiURL:"manage.brand.edit.process",brandID:o.params.brandID},r=e.setup(r,"manage_brand_add","brandData",{secured:!1}),(r=e.updateModel(r,t.ngDialogData)).imagesSelectConfig=__globals.getSelectizeOptions({valueField:"name",labelField:"name",render:{item:function(e,t){return s.template("#logoListItemTemplate",e)},option:function(e,t){return s.template("#logoListOptionTemplate",e)}},searchField:["name"]}),r.images_count=0,r.getTempImagesMedia=function(){e.fetch("media.uploaded.images",{fresh:!0}).success(function(e){a.processResponse(e,null,function(){r.image_files=e.data.files,0<e.data.files.length&&(r.images_count=e.data.files.length)})})},r.getTempImagesMedia();var l=r.uploader=new n({url:s.apiURL("media.upload.image"),autoUpload:!0,headers:{"X-XSRF-TOKEN":s.getXSRFToken()}});l.filters.push({name:"customFilter",fn:function(e,t){return this.queue.length<1e3}}),r.currentUploadedFileCount=0,r.loadingStatus=!1,l.onAfterAddingAll=function(){r.loadingStatus=!0,i.info(__globals.getJSString("loading_text"),{sticky:!0})},l.onBeforeUploadItem=function(e){r.loadingStatus=!0},l.onSuccessItem=function(e,t){a.processResponse(t,{error:function(){},otherError:function(e){3==e&&i.error(t.data.message,{sticky:!1})}},function(){r.currentUploadedFileCount++})},l.onCompleteAll=function(){r.loadingStatus=!1,0<r.currentUploadedFileCount&&i.success(r.currentUploadedFileCount+" "+__globals.getJSString("file_uploaded_text"),{sticky:!1}),r.getTempImagesMedia(),r.currentUploadedFileCount=0},r.submit=function(){e.process(r.updateURL,r).success(function(e){a.processResponse(e,null,function(){t.closeThisDialog({brand_updated:!0})})})},r.showUploadedMediaDialog=function(){a.showDialog({image_files:r.image_files},{templateUrl:__globals.getTemplateURL("product.manage.uploaded-media")},function(e){_.has(e.value,"files")?(r.image_files=e.value.files,r.images_count=e.value.files.length):r.getTempImagesMedia()})},r.close=function(){t.closeThisDialog()}}])}(),function(){"use strict";angular.module("ManageApp.brandDeleteDialog",[]).controller("BrandDeleteDialogController",["$scope","__Form","appServices",function(t,e,a){var o=this,n=t.ngDialogData.brandId,s=t.ngDialogData.brandName;(o=e.setup(o,"delete_brand_form","brandData",{secured:!0})).brandData.delete_related_products=!1,o.notificationMessage=__ngSupport.getText(__globals.getJSString("brand_delete_text"),{__name__:unescape(s)}),o.submit=function(){e.process({apiURL:"manage.brand.delete",brandID:n},o).success(function(e){a.processResponse(e,null,function(){t.closeThisDialog({brand_deleted:!0})})})},o.close=function(){t.closeThisDialog()}}])}(),function(){"use strict";angular.module("ManageProductApp.add",[]).controller("ManageProductAddController",["__Form","$state","appServices","FileUploader","__Utils","$stateParams","appNotify","__DataStore","$rootScope",function(t,a,o,e,n,s,i,r,l){var c=this;c.categoryStatus=!1,c.currentStateName=a.current.name,(c=t.setup(c,"form_product_add","productData",{secured:!1})).productData.out_of_stock=0;var d=moment().format("YYYY-MM-DD HH:mm");if(c.releaseDateConfig={format:"YYYY-MM-DD HH:mm"},c.productData.launching_date=d,c.productData.categories=[],_.has(s,"categoryID")&&!_.isEmpty(s.categoryID)){var p=s.categoryID;c.productData.categoryID=p,c.productData.categories=[p]}c.imagesSelectConfig=__globals.getSelectizeOptions({valueField:"name",labelField:"name",render:{item:function(e,t){return n.template("#imageListItemTemplate",e)},option:function(e,t){return n.template("#imageListOptionTemplate",e)}},searchField:["name"]}),c.brandsSelectConfig=__globals.getSelectizeOptions({valueField:"value",labelField:"name",searchField:["name"]}),c.relatedProductsSelectConfig=__globals.getSelectizeOptions({maxItems:1e3,searchField:["name","product_id"]}),c.getAddProductData=function(){t.fetch({apiURL:"manage.product.add.supportdata","categoryId?":c.productData.categoryID}).success(function(e){var t=e.data;o.processResponse(e,null,function(){c.related_products=t.related_products,c.store_currency_symbol=t.store_currency_symbol,c.store_currency=t.store_currency,c.fancytree_categories=t.categories,c.activeBrands=t.activeBrands,c.parentData=t.parentData,c.parentCategoryExist=t.isParentExist,c.categoryDetail=t.categoryDetail,c.specificationPreset=t.specificationPreset,c.isParentExist=!0,_.isUndefined(c.productData.categoryID)&&(c.isParentExist=!1),_.forEach(t.categories,function(e){e.key==c.productData.categoryID&&(c.categoryStatus=!0,c.categoryName=__ngSupport.getText(__globals.getJSString("product_add_title_text"),{__name__:e.title}))})})})},c.getAddProductData(),c.images_count=0,c.getTempImagesMedia=function(){t.fetch("media.uploaded.images",{fresh:!0}).success(function(e){o.processResponse(e,null,function(){c.image_files=e.data.files,0<e.data.files.length&&(c.images_count=e.data.files.length)})})},c.getTempImagesMedia();var u=c.uploader=new e({url:n.apiURL("media.upload.image"),autoUpload:!0,headers:{"X-XSRF-TOKEN":n.getXSRFToken()}});u.filters.push({name:"customFilter",fn:function(e,t){return this.queue.length<1e3}}),c.currentUploadedFileCount=0,c.loadingStatus=!1,u.onAfterAddingAll=function(){c.loadingStatus=!0,i.info(__globals.getJSString("loading_text"),{sticky:!0})},u.onBeforeUploadItem=function(e){c.loadingStatus=!0},u.onSuccessItem=function(e,t){o.processResponse(t,{error:function(){},otherError:function(e){3==e&&i.error(t.data.message,{sticky:!1})}},function(){c.currentUploadedFileCount++})},u.onCompleteAll=function(){c.loadingStatus=!1,0<c.currentUploadedFileCount&&i.success(c.currentUploadedFileCount+" "+__globals.getJSString("file_uploaded_text"),{sticky:!1}),c.getTempImagesMedia(),c.currentUploadedFileCount=0},c.addCategory=function(e){this.catID=e,r.fetch("category.fancytree.support-data",{fresh:!0}).success(function(e){c.categories=e.data.categories,o.showDialog(c,{templateUrl:__globals.getTemplateURL("category.add-dialog")},function(e){_.has(e.value,"category_added")&&1==e.value.category_added&&r.fetch("category.fancytree.support-data",{fresh:!0}).success(function(e){c.fancytree_categories=e.data.categories})})})},c.submit=function(e){c.productData.getClientTimeZone=Intl.DateTimeFormat().resolvedOptions().timeZone,3!=c.productData.out_of_stock&&(c.productData.launching_date=null),t.process("manage.product.add",c).success(function(e){o.processResponse(e,null,function(){c.productId=e.data.productId,l.canAccess("manage.product.list")&&l.canAccess("manage.product.option.list")&&!1===c.productData.publish?a.go("product_edit.options",{productID:c.productId}):a.go("products",{mCategoryID:p})})})},c.saveAndPublish=function(){c.productData.publish=!0,c.submit(null)},c.saveAndAddOptions=function(){c.productData.publish=!1,c.submit(null)},c.showUploadedMediaDialog=function(){o.showDialog({image_files:c.image_files},{templateUrl:__globals.getTemplateURL("product.manage.uploaded-media")},function(e){_.has(e.value,"files")?(c.image_files=e.value.files,c.images_count=e.value.files.length):c.getTempImagesMedia()})},c.addBrand=function(){o.showDialog(c,{templateUrl:__globals.getTemplateURL("brand.manage.add-dialog")},function(e){_.has(e.value,"brand_added")&&!0===e.value.brand_added&&c.getAddProductData()})}}])}(),function(){"use strict";angular.module("ManageProductApp.uploadedMedia",[]).controller("ManageProductUploadedMediaController",["$scope","__DataStore","appServices","$state","$rootScope",function(e,t,o,a,n){var s=this;s.image_files=[],s.files=e.ngDialogData.image_files,s.uploadedMediaFileCount=s.files.length,s.any_file_selected=!1,_.isEmpty(s.files)||_.forEach(s.files,function(e,t){s.image_files.push({name:e.name,path:e.path,exist:!1})});s.all_files_selected=!1,s.selectAll=function(){s.all_files_selected?(s.any_file_selected=!0,s.unSelectedFilesCount=0):(s.any_file_selected=!1,s.unSelectedFilesCount=s.image_files.length),angular.forEach(s.image_files,function(e,t){s.image_files[t].exist=s.all_files_selected})},s.select=function(){s.unSelectedFilesCount=0,_.forEach(s.image_files,function(e){0==e.exist&&s.unSelectedFilesCount++}),0==s.unSelectedFilesCount&&0!=s.uploadedMediaFileCount?(s.all_files_selected=!0,s.any_file_selected=!0):0<s.unSelectedFilesCount&&0!=s.uploadedMediaFileCount?(s.all_files_selected=!1,s.any_file_selected=!0):(s.all_files_selected=!1,s.any_file_selected=!1)},s.getTempImagesMedia=function(){t.fetch("media.uploaded.images",{fresh:!0}).success(function(e){o.processResponse(e,null,function(){s.files=e.data.files,s.image_files=[],_.isEmpty(s.files)||("store_settings_edit.general"==a.current.name?_.forEach(s.files,function(e,t){s.imagesExtention=e.name.split(".").pop(),"png"==s.imagesExtention?s.image_files.push({name:e.name,path:e.path,exist:!1}):"ico"==s.imagesExtention&&s.image_files.push({name:e.name,path:e.path,exist:!1})}):_.forEach(s.files,function(e,t){s.image_files.push({name:e.name,path:e.path,exist:!1})}))})})},s.delete=function(e){t.post({apiURL:"media.delete",fileName:e}).success(function(e){s.all_files_selected=!1,o.processResponse(e,null,function(){"store_settings_edit.general"==a.current.name&&n.$broadcast("lw-upload-image-deleted",!0),s.getTempImagesMedia()})})},s.deleteMultipleFiles=function(){var a=[];angular.forEach(s.image_files,function(e,t){e.exist&&a.push(e.name)}),_.isEmpty(a)||t.post("media.delete.multiple",{files:a}).success(function(e){o.processResponse(e,null,function(){s.getTempImagesMedia()})})},s.close=function(){"store_settings_edit.general"==a.current.name?e.closeThisDialog():e.closeThisDialog({files:s.files})}}])}(),function(){"use strict";angular.module("ManageProductApp.details",[]).controller("ManageEditProductDetailsController",["__DataStore","appServices","$stateParams","__Form","$state","$rootScope",function(e,a,t,o,n,s){var i=this,r=t.productID,l={detailsTab:{id:"detailsTabList"},optionsTab:{id:"optionsTabList"},imagesTab:{id:"imagesTabList"},specificationsTab:{id:"specificationsTabList"},ratingsTab:{id:"ratingsTabList"},faqTab:{id:"faqTabList"},awatingUserTab:{id:"awatingUserTabList"}};$("#manageProductEditTabs a").click(function(e){e.preventDefault();var t=$(this).attr("aria-controls"),a=l[t];_.isEmpty(a)||$(this).tab("show")}),(i=o.setup(i,"update_product_status_form","productData")).initialContentLoaded=!1,s.$on("productData",function(e,t){i.productName=t.name}),e.fetch({apiURL:"manage.product.fetch.name",productID:r}).success(function(t){a.processResponse(t,null,function(){i.productName=__ngSupport.getText(__globals.getJSString("product_edit_title_text"),{__name__:t.data.productName.name});var e=t.data;i.isMultipleCategory=e.isMultipleCategory,i.categoryData=e.categoryData,i.detailsUrl=e.detailsUrl,i.initialContentLoaded=!0,i=o.updateModel(i,{active:t.data.status})})}),_.defer(function(e){if("product_edit.details"==n.current.name)$('.nav li a[href="#detailsTab"]').triggerHandler("click",!0);else if("product_edit.options"==n.current.name){$('.nav li a[href="#optionsTab"]').triggerHandler("click",!0)}else if("product_edit.images"==n.current.name){$('.nav li a[href="#imagesTab"]').triggerHandler("click",!0)}else if("product_edit.specification"==n.current.name){$('.nav li a[href="#specificationsTab"]').triggerHandler("click",!0)}else if("product_edit.ratings"==n.current.name){$('.nav li a[href="#ratingsTab"]').triggerHandler("click",!0)}else if("product_edit.faq"==n.current.name){$('.nav li a[href="#faqTab"]').triggerHandler("click",!0)}else if("product_edit.awating_user"==n.current.name){$('.nav li a[href="#awatingUserTab"]').triggerHandler("click",!0)}},0),i.submit=function(){o.process({apiURL:"manage.product.update_status",productID:r},i).success(function(e){a.processResponse(e,null,function(){})})}}])}(),function(){"use strict";angular.module("ManageProductApp.edit",[]).controller("ManageProductEditController",["__DataStore","appServices","$stateParams",function(e,t,a){var o=this;e.fetch({apiURL:"manage.product.details",productID:a.productID}).success(function(e){t.processResponse(e,null,function(){o.product=e.data.productName})})}])}(),function(){"use strict";angular.module("ManageProductApp.editDetails",[]).controller("ManageProductEditDetailsController",["__Form","$state","appServices","FileUploader","__Utils","$stateParams","appNotify","$rootScope","__DataStore","$scope",function(n,e,a,t,o,s,i,r,l,c){var d=this,p=s.productID;d.productId=p,(d=n.setup(d,"form_product_edit","productData",{secured:!1})).imagesSelectConfig=__globals.getSelectizeOptions({valueField:"name",labelField:"name",render:{item:function(e,t){return o.template("#imageListItemTemplate",e)},option:function(e,t){return o.template("#imageListOptionTemplate",e)}},searchField:["name"]}),d.relatedProductsSelectConfig=__globals.getSelectizeOptions({maxItems:1e3,searchField:["name","product_id"]}),d.brandsSelectConfig=__globals.getSelectizeOptions({valueField:"value",labelField:"name",searchField:["name"]}),d.pageStatus=!1,d.productAvailableExist=!1,d.releaseDateConfig={format:"YYYY-MM-DD HH:mm"},d.getProductEditDetails=function(){n.fetch({apiURL:"manage.product.edit.details.supportdata",productID:p}).success(function(o){a.processResponse(o,null,function(){a.delayAction(function(){var e=o.data,t={name:e.product.name},a=moment().format("YYYY-MM-DD HH:mm");d.related_products=e.related_products,d.categories=e.product.categories,d.store_currency_symbol=e.store_currency_symbol,d.store_currency=e.store_currency,d.fancytree_categories=o.data.categories,d.activeBrands=e.activeBrands,d.out_of_stock=e.product.outOfStock,d.pageStatus=!0,n.updateModel(d,e.product),_.isEmpty(e.product.__data)&&_.isEmpty(d.productData.launching_date)&&(d.productData.launching_date=a),r.$emit("productData",t)})})})},d.getProductEditDetails(),d.images_count=0,d.getTempImagesMedia=function(){n.fetch("media.uploaded.images",{fresh:!0}).success(function(e){a.processResponse(e,null,function(){d.image_files=e.data.files,0<e.data.files.length&&(d.images_count=e.data.files.length)})})},d.getTempImagesMedia();var u=d.uploader=new t({url:o.apiURL("media.upload.image"),autoUpload:!0,headers:{"X-XSRF-TOKEN":o.getXSRFToken()}});u.filters.push({name:"customFilter",fn:function(e,t){return this.queue.length<1e3}}),d.currentUploadedFileCount=0,d.loadingStatus=!1,u.onAfterAddingAll=function(){d.loadingStatus=!0,i.info(__globals.getJSString("loading_text"),{sticky:!0})},u.onBeforeUploadItem=function(e){d.loadingStatus=!0},u.onSuccessItem=function(e,t){a.processResponse(t,{error:function(){},otherError:function(e){3==e&&i.error(t.data.message,{sticky:!1})}},function(){d.currentUploadedFileCount++})},u.onCompleteAll=function(){d.loadingStatus=!1,0<d.currentUploadedFileCount&&i.success(d.currentUploadedFileCount+" "+__globals.getJSString("file_uploaded_text"),{sticky:!1}),d.getTempImagesMedia(),d.currentUploadedFileCount=0},d.addCategory=function(e){this.catID=e,l.fetch("category.fancytree.support-data",{fresh:!0}).success(function(e){d.categories=e.data.categories,a.showDialog(d,{templateUrl:__globals.getTemplateURL("category.add-dialog")},function(e){_.has(e.value,"category_added")&&1==e.value.category_added&&l.fetch("category.fancytree.support-data",{fresh:!0}).success(function(e){d.fancytree_categories=e.data.categories})})})},d.submit=function(){d.productData.getClientTimeZone=Intl.DateTimeFormat().resolvedOptions().timeZone,3!=d.productData.outOfStock&&(d.productData.launching_date=null),n.process({apiURL:"manage.product.edit",productID:p},d).success(function(e){a.processResponse(e,null,function(){1==e.reaction&&d.getProductEditDetails(),1==e.reaction&&0==d.productData.outOfStock&&0!=d.out_of_stock&&a.showDialog(d,{templateUrl:__globals.getTemplateURL("product.manage.send-mail-dialog")},function(e){})})})},d.showUploadedMediaDialog=function(){a.showDialog({image_files:d.image_files},{templateUrl:__globals.getTemplateURL("product.manage.uploaded-media")},function(e){_.has(e.value,"files")?(d.image_files=e.value.files,d.images_count=e.value.files.length):d.getTempImagesMedia()})},d.addBrand=function(){a.showDialog(d,{templateUrl:__globals.getTemplateURL("brand.manage.add-dialog")},function(e){_.has(e.value,"brand_added")&&!0===e.value.brand_added&&d.getProductEditDetails()})},d.closeDialog=function(){c.closeThisDialog()}}])}(),function(){"use strict";angular.module("ManageProductApp.notifyMailCustomer",[]).controller("ManageProductNotifyMailController",["__Form","$state","__Utils","$stateParams","__DataStore","$scope","appServices","$rootScope",function(e,t,a,o,n,s,i,r){var l=this,c=o.productID,d=s.ngDialogData.notifyUserId,p=s.ngDialogData.mailType;l=e.setup(l,"product_notify_mail_form","productNotifyMailData",{secured:!1}),l.productNotifyMailData.awatingUserList=1==p?s.ngDialogData.awatingUserList:null;l.productNotifyMailData.mailType=p,l.submit=function(){e.process({apiURL:"manage.product.awating_user.notify_mail.send",productId:c,notifyUserId:d||null},l).success(function(e){i.processResponse(e,null,function(){r.$broadcast("awating_user_added_or_updated",!0),s.closeThisDialog({send_mail_to_customer:!0})})})},l.closeDialog=function(){s.closeThisDialog()}}])}(),function(){"use strict";angular.module("ManageProductApp.images",[]).controller("ProductImagesController",["$scope","__DataStore","appServices","$stateParams",function(e,n,s,t){var i=this,a=t.productID;i.imagesListDataTable=n.dataTable("#productImagesList",{url:{apiURL:"manage.product.image.list",productID:a},dtOptions:{searching:!0,rowReorder:!0,paginate:!1},columnsData:[{name:"list_order",orderable:!0,template:"#productImageColumnListOrderTemplate"},{name:"thumbnail",template:"#productImageThumbnailColumnTemplate"},{name:"title",orderable:!0},{name:null,template:"#productImageActionColumnTemplate"}],scope:e}),$("#productImagesList").on("row-reorder.dt",function(e,t,a){var o=[];_.forEach(t,function(e,t){o.push({_id:_.trim(e.node.id.replace("rowid_","")),newPosition:e.newPosition,oldPosition:e.oldPosition})}),n.post("manage.product.image.update.list.order",{productImageListOrder:o}).success(function(e){s.processResponse(e,{error:function(){i.reloadDT()}},function(){i.reloadDT()})})}),i.reloadDT=function(){n.reloadDT(i.imagesListDataTable)},i.add=function(){s.showDialog({},{templateUrl:__globals.getTemplateURL("product.manage.Images.add-dialog")},function(e){_.has(e.value,"image_added")&&!0===e.value.image_added&&i.reloadDT()})},i.edit=function(t){n.fetch({apiURL:"manage.product.image.edit.supportdata",imageID:t,productID:a}).success(function(e){s.processResponse(e,null,function(){s.showDialog({image_id:t,prdouct_id:a,imageData:e.data.prdouct_image},{templateUrl:__globals.getTemplateURL("product.manage.Images.edit-dialog")},function(e){_.has(e.value,"image_updated")&&!0===e.value.image_updated&&i.reloadDT()})})})},i.delete=function(e,t){__globals.showConfirmation({text:__ngSupport.getText(__globals.getJSString("product_image_delete_confirm_text"),{__title__:t}),confirmButtonText:__globals.getJSString("delete_action_button_text")},function(){n.post({apiURL:"manage.product.image.delete",imageID:e,productID:a}).success(function(e){var t=e.data.message;s.processResponse(e,{error:function(){__globals.showConfirmation({title:"Deleted!",text:t,type:"error"})}},function(){__globals.showConfirmation({title:"Deleted!",text:t,type:"success"}),i.reloadDT()})})})}}])}(),function(){"use strict";angular.module("ManageProductApp.addImage",[]).controller("ProductImageAddController",["$scope","__Form","appServices","FileUploader","__Utils","$stateParams","appNotify",function(t,e,a,o,n,s,i){var r=this;(r=e.setup(r,"form_product_add_image","imageData",{secured:!1})).imagesSelectConfig=__globals.getSelectizeOptions({valueField:"name",labelField:"name",render:{item:function(e,t){return n.template("#imageListItemTemplate",e)},option:function(e,t){return n.template("#imageListOptionTemplate",e)}},searchField:["name"]}),r.images_count=0,r.getTempImagesMedia=function(){e.fetch("media.uploaded.images",{fresh:!0}).success(function(e){a.processResponse(e,null,function(){r.image_files=e.data.files,0<e.data.files.length&&(r.images_count=e.data.files.length)})})},r.getTempImagesMedia();var l=r.uploader=new o({url:n.apiURL("media.upload.image"),autoUpload:!0,headers:{"X-XSRF-TOKEN":n.getXSRFToken()}});l.filters.push({name:"customFilter",fn:function(e,t){return this.queue.length<1e3}}),r.currentUploadedFileCount=0,r.loadingStatus=!1,l.onAfterAddingAll=function(){r.loadingStatus=!0,i.info(__globals.getJSString("loading_text"),{sticky:!0})},l.onBeforeUploadItem=function(e){r.loadingStatus=!0},l.onSuccessItem=function(e,t){a.processResponse(t,{error:function(){},otherError:function(e){3==e&&i.error(t.data.message,{sticky:!1})}},function(){r.currentUploadedFileCount++})},l.onCompleteAll=function(){r.loadingStatus=!1,0<r.currentUploadedFileCount&&i.success(r.currentUploadedFileCount+" "+__globals.getJSString("file_uploaded_text"),{sticky:!1}),r.getTempImagesMedia(),r.currentUploadedFileCount=0},r.submit=function(){e.process({apiURL:"manage.product.image.add",productID:s.productID},r).success(function(e){a.processResponse(e,null,function(){t.closeThisDialog({image_added:!0})})})},r.showUploadedMediaDialog=function(){a.showDialog({image_files:r.image_files},{templateUrl:__globals.getTemplateURL("product.manage.uploaded-media")},function(e){_.has(e.value,"files")?(r.image_files=e.value.files,r.images_count=e.value.files.length):r.getTempImagesMedia()})},r.cancel=function(){t.closeThisDialog()}}])}(),function(){"use strict";angular.module("ManageProductApp.editImage",[]).controller("ProductImageEditController",["$scope","__Form","appServices",function(t,e,a){var o=this,n=t.ngDialogData;o=e.setup(o,"form_product_edit_image","imageData",{secured:!1}),(o=e.updateModel(o,n.imageData)).submit=function(){e.process({apiURL:"manage.product.image.edit",productID:n.prdouct_id,imageID:n.image_id},o).success(function(e){a.processResponse(e,null,function(){t.closeThisDialog({image_updated:!0})})})},o.cancel=function(){t.closeThisDialog()}}])}(),function(){"use strict";angular.module("ManageProductApp.options",[]).service("ImageDataService",["$q","__DataStore","__Form","appServices",function(t,o,e,n){this.getImages=function(e){var a=t.defer();return o.fetch({apiURL:"manage.product.image.read.data_list",productID:e}).success(function(t){n.processResponse(t,null,function(e){a.resolve(t.data)})}),a.promise}}]).controller("ProductOptionsController",["$scope","__DataStore","appServices","$stateParams","ImageDataService",function(e,o,n,t,a){var s=this,i=t.productID;s.optionListDataTable=o.dataTable("#productOptionList",{url:{apiURL:"manage.product.option.list",productID:i},dtOptions:{searching:!0,order:[[0,"asc"]]},columnsData:[{name:"name",orderable:!0},{name:"type",orderable:!0,template:"#typeColumnTemplate"},{name:null,template:"#productOptionValuesColumnTemplate"},{name:null,template:"#productOptionActionColumnTemplate"}],scope:e}),s.reloadDT=function(){o.reloadDT(s.optionListDataTable)},s.selectAddOption=function(e){n.showDialog({type:e},{templateUrl:__globals.getTemplateURL("product.manage.options.add-dialog"),controller:"ProductOptionAddController as addOptionCtrl",resolve:{GetImages:function(){return a.getImages(i)}}},function(e){_.has(e.value,"option_added")&&!0===e.value.option_added&&s.reloadDT()})},s.edit=function(t){o.fetch({apiURL:"manage.product.option.edit.supportdata",optionID:t,productID:i}).success(function(e){n.processResponse(e,null,function(){n.showDialog({option_id:t,prdouct_id:i,optionData:e.data.product_option},{templateUrl:__globals.getTemplateURL("product.manage.options.edit-dialog")},function(e){_.has(e.value,"option_updated")&&!0===e.value.option_updated&&s.reloadDT()})})})},s.values=function(t,a){o.fetch({apiURL:"manage.product.option.value.list",productID:i,optionID:t},{fresh:!0}).success(function(e){n.processResponse(e,null,function(){n.showDialog({option_id:t,prdouct_id:i,option_name:a,option_type:e.data.optionType,option_values:e.data.option_values,productImages:e.data.images,isOptionValueImagesUsed:e.data.isOptionValueImagesUsed},{templateUrl:__globals.getTemplateURL("product.manage.options.values.list-dialog")},function(e){})})})},s.addValues=function(e,t){n.showDialog({option_id:e,option_name:t,prdouct_id:i},{templateUrl:__globals.getTemplateURL("product.manage.options.values.add-dialog")},function(e){})},s.delete=function(e,t){__globals.showConfirmation({text:__ngSupport.getText(__globals.getJSString("product_option_delete_confirm_text"),{__name__:t}),confirmButtonText:__globals.getJSString("delete_action_button_text")},function(){o.post({apiURL:"manage.product.option.delete",optionID:e,productID:i}).success(function(e){var t=e.data.message;n.processResponse(e,{error:function(){__globals.showConfirmation({title:"Deleted!",text:t,type:"error"})}},function(){__globals.showConfirmation({title:"Deleted!",text:t,type:"success"}),s.reloadDT()})})})}}])}(),function(){"use strict";angular.module("ManageProductApp.addOption",[]).controller("ProductOptionAddController",["$scope","__Form","appServices","$stateParams","FileUploader","__Utils","appNotify","GetImages",function(t,e,a,o,n,s,i,r){var l=this;l.addOptionType=t.ngDialogData.type,l.productID=o.productID,(l=e.setup(l,"form_product_add_option","optionData",{secured:!1})).productImages=r.images,l.isOptionValueImagesUsed=r.isOptionValueImagesUsed,l.imagesSelectConfig=__globals.getSelectizeOptions({valueField:"name",labelField:"name",render:{item:function(e,t){return s.template("#imageListItemTemplate",e)},option:function(e,t){return s.template("#imageListItemImageTemplate",e)}},searchField:["name"]}),l.productImagesSelectConfig=__globals.getSelectizeOptions({valueField:"id",labelField:"title",searchField:["title"],maxItems:100,plugins:["remove_button"],onDropdownOpen:function(e){this.renderCache={}},onDropdownClose:function(e){this.renderCache={}},render:{item:function(e,t){return s.template("#productImageItemTemplate",{item:e,itemId:e.id,selectedIds:__globals.filterArrayValue(_.flatten(_.pluck(l.optionData.values,"slider_images")))})},option:function(e,t){var a=__globals.filterArrayValue(_.flatten(_.pluck(l.optionData.values,"slider_images")));return _.includes(a,e.id)?'<div class="lw-selectize-item lw-disabled-selectize-option"><span class="lw-selectize-item-thumb"> <img src="'+e.thumbnail_url+'"/> '+t(e.title)+"- <small> Already Selected</small> </span></div>":'<div class="lw-selectize-item"><span class="lw-selectize-item-thumb"> <img src="'+e.thumbnail_url+'"/> '+t(e.title)+"</span></div>"}}}),l.images_count=0,l.getTempImagesMedia=function(){e.fetch("media.uploaded.images",{fresh:!0}).success(function(e){a.processResponse(e,null,function(){l.image_files=e.data.files,0<e.data.files.length&&(l.images_count=e.data.files.length)})})},l.getTempImagesMedia(),2==l.addOptionType?l.optionData.values=[{name:"",addon_price:"",image:"",slider_images:[]}]:l.optionData.values=[{name:"",addon_price:"",slider_images:[]}];l.addNewValue=function(){2==l.addOptionType?l.optionData.values.push({name:"",addon_price:"",image:"",slider_images:[]}):l.optionData.values.push({name:"",addon_price:"",slider_images:[]})},l.remove=function(a){!_.isEmpty(l.optionData.values)&&1<l.optionData.values.length&&_.remove(l.optionData.values,function(e,t){return a==t})},l.checkUnique=function(e,t){if(1<l.optionData.values.length)_.forEach(l.optionData.values,function(e,n){var s=e.name,i="values."+n+".name";_.isEmpty(s)?l.form_product_add_option[i].$setValidity("unique",!0):_.find(l.optionData.values,function(e,t){if(_.isEmpty(s))a=s;else var a=s.toLowerCase();if(_.isEmpty(e.name))o=e.name;else var o=e.name.toLowerCase();o==a&&n!=t?l.form_product_add_option[i].$setValidity("unique",!1):l.form_product_add_option[i].$setValidity("unique",!0)})});else{var a="values."+e+".name";l.form_product_add_option[a].$setValidity("unique",!0)}};var c=l.uploader=new n({url:s.apiURL("media.upload.process"),autoUpload:!0,headers:{"X-XSRF-TOKEN":s.getXSRFToken()}});c.filters.push({name:"customFilter",fn:function(e,t){return this.queue.length<1e3}}),l.currentUploadedFileCount=0,l.loadingStatus=!1,c.onAfterAddingAll=function(){l.loadingStatus=!0,i.info(__globals.getJSString("loading_text"),{sticky:!0})},c.onBeforeUploadItem=function(e){l.loadingStatus=!0},c.onSuccessItem=function(e,t){l.optionData.values[l.newImageIndex].thumbnailURL=t.data.thumbnailURL,l.imageFile=t.data.fileName,l.optionData.values[l.newImageIndex].image=l.imageFile,l.newImageIndex=null,a.processResponse(t,{error:function(){},otherError:function(e){3==e&&i.error(t.data.message,{sticky:!1})}},function(){l.currentUploadedFileCount++})},l.newImageIndex=null,l.addImages=function(e,t){l.newImageIndex=e},c.onCompleteAll=function(){l.loadingStatus=!1,0<l.currentUploadedFileCount&&i.success(l.currentUploadedFileCount+" "+__globals.getJSString("file_uploaded_text"),{sticky:!1}),l.getTempImagesMedia(),l.currentUploadedFileCount=0},l.submit=function(){l.optionData.type=l.addOptionType,e.process({apiURL:"manage.product.option.add",productID:o.productID},l).success(function(e){a.processResponse(e,null,function(){t.closeThisDialog({option_added:!0})})})},l.showUploadedMediaDialog=function(){a.showDialog({image_files:l.image_files},{templateUrl:__globals.getTemplateURL("product.manage.uploaded-media")},function(e){_.has(e.value,"files")?(l.image_files=e.value.files,l.images_count=e.value.files.length):l.getTempImagesMedia()})},l.cancel=function(){t.closeThisDialog()}}])}(),function(){"use strict";angular.module("ManageProductApp.editOption",[]).controller("ProductOptionEditController",["$scope","__Form","appServices","$stateParams",function(t,e,a,o){var n=this,s=t.ngDialogData;n.optionID=s.option_id,n=e.setup(n,"form_product_edit_option","optionData",{secured:!1}),(n=e.updateModel(n,s.optionData)).submit=function(){e.process({apiURL:"manage.product.option.edit",productID:s.prdouct_id,optionID:s.option_id},n).success(function(e){a.processResponse(e,null,function(){t.closeThisDialog({option_updated:!0})})})},n.cancel=function(){t.closeThisDialog()}}])}(),function(){"use strict";angular.module("ManageProductApp.optionValues",[]).controller("ProductOptionValuesController",["$scope","__Form","__DataStore","appServices","FileUploader","__Utils","appNotify",function(t,a,o,n,e,s,i){var r=this,l=t.ngDialogData,c=l.prdouct_id,d=l.option_id;r.optionLableID=l.prdouct_id,r.optionType=l.option_type,r.productImages=l.productImages,r.productID=c,r.isOptionValueImagesUsed=l.isOptionValueImagesUsed,(r=a.setup(r,"form_product_edit_option_values","optionData",{secured:!1})).notification_message=__ngSupport.getText(__globals.getJSString("product_option_value_add_form_notification"),{__option_name__:l.option_name}),r.imagesSelectConfig=__globals.getSelectizeOptions({valueField:"name",labelField:"name",render:{item:function(e,t){return s.template("#imageListItemTemplate",e)},option:function(e,t){return s.template("#imageListOptionTemplate",e)}},searchField:["name"]});var p=__globals.filterArrayValue(_.flatten(_.pluck(l.option_values,"slider_images")));r.productImagesSelectConfig=__globals.getSelectizeOptions({valueField:"id",labelField:"title",searchField:["title"],maxItems:100,plugins:["remove_button"],onDelete:function(e){_.isEmpty(_.intersection(p,__globals.filterArrayValue(e)))||o.post({apiURL:"manage.product.image.read.process_unset",productID:c,imageId:e}).success(function(e){n.processResponse(e,null,function(e){})})},onDropdownOpen:function(e){this.renderCache={}},onDropdownClose:function(e){this.renderCache={}},render:{item:function(e,t){return s.template("#productImageItemTemplate",{item:e,itemId:e.id,selectedIds:__globals.filterArrayValue(_.flatten(_.pluck(r.optionData.values,"slider_images")))})},option:function(e,t){var a=__globals.filterArrayValue(_.flatten(_.pluck(r.optionData.values,"slider_images")));return _.includes(a,e.id)?'<div class="lw-selectize-item lw-disabled-selectize-option"><span class="lw-selectize-item-thumb"> <img src="'+e.thumbnail_url+'"/> '+t(e.title)+"- <small> Already Selected</small> </span></div>":'<div class="lw-selectize-item"><span class="lw-selectize-item-thumb"> <img src="'+e.thumbnail_url+'"/> '+t(e.title)+"</span></div>"}}}),r.images_count=0,r.getTempImagesMedia=function(){a.fetch("media.uploaded.images",{fresh:!0}).success(function(e){n.processResponse(e,null,function(){r.image_files=e.data.files,0<e.data.files.length&&(r.images_count=e.data.files.length)})})},r.getTempImagesMedia(),r.optionData.values=[],r.optionData.optionID=d,(r=a.updateModel(r,{values:l.option_values})).addNewValue=function(){r.optionData.values.push({name:"",addon_price:"",image:"",slider_images:[]})},r.remove=function(a){!_.isEmpty(r.optionData.values)&&1<r.optionData.values.length&&_.remove(r.optionData.values,function(e,t){return a==t})},r.checkUnique=function(e,t){if(1<r.optionData.values.length)_.forEach(r.optionData.values,function(e,n){var s=e.name,i="values."+n+".name";_.isEmpty(s)?r.form_product_add_option[i].$setValidity("unique",!0):_.find(r.optionData.values,function(e,t){if(_.isEmpty(s))a=s;else var a=s.toLowerCase();if(_.isEmpty(e.name))o=e.name;else var o=e.name.toLowerCase();o==a&&n!=t?r.form_product_add_option[i].$setValidity("unique",!1):r.form_product_add_option[i].$setValidity("unique",!0)})});else{var a="values."+e+".name";r.form_product_add_option[a].$setValidity("unique",!0)}};var u=r.uploader=new e({url:s.apiURL("media.upload.process"),autoUpload:!0,headers:{"X-XSRF-TOKEN":s.getXSRFToken()}});u.filters.push({name:"customFilter",fn:function(e,t){return this.queue.length<1e3}}),r.currentUploadedFileCount=0,r.loadingStatus=!1,u.onAfterAddingAll=function(){r.loadingStatus=!0,i.info(__globals.getJSString("loading_text"),{sticky:!0})},u.onBeforeUploadItem=function(e){r.loadingStatus=!0},u.onSuccessItem=function(e,t){r.optionData.values[r.newImageIndex].thumbnailURL=t.data.thumbnailURL,r.imageFile=t.data.fileName,r.optionData.values[r.newImageIndex].image=r.imageFile,r.newImageIndex=null,n.processResponse(t,{error:function(){},otherError:function(e){3==e&&i.error(t.data.message,{sticky:!1})}},function(){r.currentUploadedFileCount++})},r.newImageIndex=null,r.addImages=function(e,t){r.newImageIndex=e},u.onCompleteAll=function(){r.loadingStatus=!1,0<r.currentUploadedFileCount&&i.success(r.currentUploadedFileCount+" "+__globals.getJSString("file_uploaded_text"),{sticky:!1}),r.getTempImagesMedia(),r.currentUploadedFileCount=0},r.fetchOptionValues=function(){a.fetch({apiURL:"manage.product.option.value.list",productID:c,optionID:d}).success(function(e){n.processResponse(e,null,function(){r=a.updateModel(r,{values:e.data.option_values})})})},r.remove=function(a){!_.isEmpty(r.optionData.values)&&1<r.optionData.values.length&&_.remove(r.optionData.values,function(e,t){return a==t})},r.delete=function(t,e){o.post({apiURL:"manage.product.option.value.delete",optionID:d,productID:c,optionValueID:t,optionType:e}).success(function(e){n.processResponse(e,null,function(){_.remove(r.optionData.values,function(e){return e.id==t})})})},r.checkUnique=function(e,t){if(1<r.optionData.values.length)_.forEach(r.optionData.values,function(e,n){var s=e.name,i="values."+n+".name";_.isEmpty(s)?r.form_product_edit_option_values[i].$setValidity("unique",!0):_.find(r.optionData.values,function(e,t){if(_.isEmpty(s))a=s;else var a=s.toLowerCase();if(_.isEmpty(e.name))o=e.name;else var o=e.name.toLowerCase();o==a&&n!=t?r.form_product_edit_option_values[i].$setValidity("unique",!1):r.form_product_edit_option_values[i].$setValidity("unique",!0)})});else{var a="values."+e+".name";r.form_product_edit_option_values[a].$setValidity("unique",!0)}},r.submit=function(){r.optionData.type=r.optionType,a.process({apiURL:"manage.product.option.value.edit",productID:c,optionID:d},r).success(function(e){n.processResponse(e,null,function(){t.closeThisDialog()})})},r.showUploadedMediaDialog=function(){n.showDialog({image_files:r.image_files},{templateUrl:__globals.getTemplateURL("product.manage.uploaded-media")},function(e){_.has(e.value,"files")?(r.image_files=e.value.files,r.images_count=e.value.files.length):r.getTempImagesMedia()})},r.cancel=function(){t.closeThisDialog()}}])}(),function(){"use strict";angular.module("ManageProductApp.addOptionValues",[]).controller("ProductOptionValuesAddController",["$scope","__Form","appServices",function(t,e,a){var r=this,o=t.ngDialogData;(r=e.setup(r,"form_product_add_option","optionData",{secured:!1})).optionData.values=[{name:"",addon_price:""}],r.notification_message=__ngSupport.getText(__globals.getJSString("product_option_value_add_form_notification"),{__option_name__:o.option_name}),r.addNewValue=function(){r.optionData.values.push({name:"",addon_price:""})},r.remove=function(a){!_.isEmpty(r.optionData.values)&&1<r.optionData.values.length&&_.remove(r.optionData.values,function(e,t){return a==t})},r.checkUnique=function(e,t){if(1<r.optionData.values.length)_.forEach(r.optionData.values,function(e,n){var s=e.name,i="values."+n+".name";_.isEmpty(s)?r.form_product_add_option[i].$setValidity("unique",!0):_.find(r.optionData.values,function(e,t){if(_.isEmpty(s))a=s;else var a=s.toLowerCase();if(_.isEmpty(e.name))o=e.name;else var o=e.name.toLowerCase();o==a&&n!=t?r.form_product_add_option[i].$setValidity("unique",!1):r.form_product_add_option[i].$setValidity("unique",!0)})});else{var a="values."+e+".name";r.form_product_add_option[a].$setValidity("unique",!0)}},r.submit=function(){e.process({apiURL:"manage.product.option.value.add",productID:o.prdouct_id,optionID:o.option_id},r).success(function(e){a.processResponse(e,null,function(){t.closeThisDialog()})})},r.cancel=function(){t.closeThisDialog()}}])}(),function(){"use strict";angular.module("ManageProductApp.specification",[]).controller("ProductSpecificationController",["$scope","__DataStore","appServices","$stateParams","__Form",function(e,a,o,t,n){var s=this,i=t.productID;s.initialPageContentLoaded=!1,(s=n.setup(s,"form_specification_values_add","specificationData")).assign_specification_select_config=__globals.getSelectizeOptions({valueField:"_id",labelField:"title",searchField:["title"]}),s.specification_select_config=__globals.getSelectizeOptions({valueField:"label",labelField:"label",searchField:["label"],plugins:["restore_on_backspace","remove_button"],maxItems:1e3,delimiter:",",persist:!0,create:function(e){return{_id:e,label:e}}}),s.getSpecificationList=function(){a.fetch({apiURL:"manage.product.specification.list",productID:i}).success(function(t){o.processResponse(t,null,function(){var e=t.data;s.specification_presets__id=e.presetId,s.isSpecificationExist=e.isSpecificationExist,s.specificationData.specifications=e.specifications,s.presetTitle=e.presetTitle,s.specificationList=e.specificationList,s.otherSpecifications=e.otherSpecifications,s.oldSpecification=e.oldSpecification,s.initialPageContentLoaded=!0})})},s.getSpecificationList(),s.addSpecification=function(e,t){n.process({apiURL:"manage.product.specification.add",productID:i,presetType:e},s).success(function(e){o.processResponse(e,null,function(){s.getSpecificationList()})})},s.changeSpecificationPreset=function(e){if(!_.isUndefined(e)||!_.isEmpty(e)){var t={presetId:e,isDelete:"delete"==e};a.post({apiURL:"manage.product.specification.change_preset",productID:i},t).success(function(e){o.processResponse(e,null,function(){s.getSpecificationList()})})}},s.add=function(){o.showDialog({otherSpecifications:s.otherSpecifications},{templateUrl:__globals.getTemplateURL("product.manage.specification.add-dialog")},function(e){_.has(e.value,"specification_added")&&!0===e.value.specification_added&&s.getSpecificationList()})},s.edit=function(e){a.fetch({apiURL:"manage.product.specification.edit",productID:i,specificationID:e}).success(function(e){o.processResponse(e,null,function(){o.showDialog({specificationValues:e.data.secificationValues,specificationCollection:e.data.specificationCollection,assignSpecificationData:e.data.assignSpecificationData},{templateUrl:__globals.getTemplateURL("product.manage.specification.edit-dialog")},function(e){_.has(e.value,"specification_updated")&&!0===e.value.specification_updated&&s.getSpecificationList()})})})},s.delete=function(e,t){__globals.showConfirmation({text:__ngSupport.getText(__globals.getJSString("product_specification_delete_confirm_text"),{__name__:t}),confirmButtonText:__globals.getJSString("delete_action_button_text")},function(){a.post({apiURL:"manage.product.specification.delete",specificationID:e,productID:i}).success(function(e){var t=e.data.message;o.processResponse(e,{error:function(){__globals.showConfirmation({title:"Deleted!",text:t,type:"error"})}},function(){__globals.showConfirmation({title:"Deleted!",text:t,type:"success"}),s.getSpecificationList()})})})}}])}(),function(){"use strict";angular.module("ManageProductApp.addSpecification",[]).controller("ProductSpecificationAddController",["$scope","__Form","appServices","$stateParams","__DataStore",function(t,e,a,o,n){var s=this;(s=e.setup(s,"form_product_add_specification","specificationData",{secured:!1})).specification_label_select_config=__globals.getSelectizeOptions({valueField:"id",labelField:"label",searchField:["label"],create:function(e){return{id:e,label:e}}}),s.specification_value_select_config=__globals.getSelectizeOptions({valueField:"label",labelField:"label",searchField:["label"],plugins:["restore_on_backspace","remove_button"],maxItems:1e3,delimiter:",",persist:!0,create:function(e){return{label:String(e),label:e}}}),s.specificationCollection=t.ngDialogData.otherSpecifications,s.specValues=[],s.getSelectedSpecification=function(a){var e=parseInt(a);_.isNaN(e)||_.forEach(s.specificationCollection,function(e,t){e.id==a&&(s.specValues=e.specValues)})},s.submit=function(){e.process({apiURL:"manage.product.specification.add",productID:o.productID,presetType:2},s).success(function(e){a.processResponse(e,null,function(){t.closeThisDialog({specification_added:!0})})})},s.cancel=function(){t.closeThisDialog()}}])}(),function(){"use strict";angular.module("ManageProductApp.addFaq",[]).controller("ProductFaqsAddController",["$scope","__Form","appServices","$stateParams",function(t,e,a,o){var n=this;(n=e.setup(n,"product_faq_add_form","addFaqData")).submit=function(){e.process({apiURL:"manage.product.faq.add",productId:o.productID},n).success(function(e){a.processResponse(e,null,function(){t.closeThisDialog({faq_added:!0})})})},n.cancel=function(){t.closeThisDialog()}}])}(),function(){"use strict";angular.module("ManageProductApp.editFaq",[]).controller("ProductFaqsEditontroller",["$scope","__Form","appServices","$stateParams",function(t,e,a,o){var n=this,s=t.ngDialogData;n=e.setup(n,"product_faq_edit_form","EditFaqData"),(n=e.updateModel(n,s.faqData)).submit=function(){e.process({apiURL:"manage.product.faq.update",productId:o.productID,faqID:n.EditFaqData._id},n).success(function(e){a.processResponse(e,null,function(){t.closeThisDialog({faq_updated:!0})})})},n.cancel=function(){t.closeThisDialog()}}])}(),function(){"use strict";angular.module("ManageProductApp.editSpecification",[]).controller("ProductSpecificationEditController",["$scope","__Form","appServices","$stateParams",function(t,e,a,o){var n=this,s=t.ngDialogData;n=e.setup(n,"form_specification_edit","specificationData"),(n=e.updateModel(n,s.specificationValues)).specification_name_select_config=__globals.getSelectizeOptions({valueField:"name",labelField:"name",searchField:["name"],create:function(e){return{_id:e,name:e}}}),n.specification_value_select_config=__globals.getSelectizeOptions({valueField:"value",labelField:"value",searchField:["value"],create:function(e){return{value:e}}}),n.submit=function(){e.process({apiURL:"manage.product.specification.update",productID:o.productID,specificationID:n.specificationData._id},n).success(function(e){a.processResponse(e,null,function(){t.closeThisDialog({specification_updated:!0})})})},n.cancel=function(){t.closeThisDialog()}}])}(),function(){"use strict";angular.module("ManageApp.productRatingList",[]).controller("ProductRatingListController",["$scope","__DataStore","appServices","$state","__Utils","$rootScope",function(e,t,a,o,n,s){var i=this;(i=this).productRatingDataTable=t.dataTable("#lwProductRatingList",{url:"manage.product.rating.read.list",dtOptions:{searching:!0},columnsData:[{name:"productName",orderable:!0},{name:"formatRating",orderable:!0},{name:"createdAt",orderable:!0,template:"#creationDateColumnTemplate"}],scope:e}),i.reloadDT=function(){t.reloadDT(i.productRatingDataTable)},e.$on("product_rating_added_or_updated",function(e){e&&i.reloadDT()})}])}(),function(){"use strict";angular.module("ManageApp.productList",[]).controller("ProductListController",["$scope","__DataStore","appServices","$state","__Utils","$rootScope",function(e,a,o,t,n,s){var i=this,r=_.isEmpty(t.params.mCategoryID)?null:t.params.mCategoryID,l=t.current.name;i.currentStateName=l,i.pageContentLoaded=!1,i.parentCategoryExist=!1,i.categoryID=r;var c,d=[{name:"thumbnail",template:"#productThumbnailColumnTemplate"},{name:"name",orderable:!0,template:"#nameColumnTemplate"},{name:"featured",orderable:!0,template:"#featuredProductColumnTemplate"},{name:"out_of_stock",orderable:!0,template:"#outOfStockColumnTemplate"},{name:"status",orderable:!0,template:"#productStatusColumnTemplate"},{name:"creation_date",orderable:!0,template:"#creationDateColumnTemplate"},{name:"categories_id",template:"#productCategoriesColumnTemplate"},{name:"brand",template:"#productBrandColumnTemplate"},{name:null,template:"#productActionColumnTemplate"}];i=this;c=_.isEmpty(r)?_.isEmpty(t.params.brandID)?"manage.product.list":{apiURL:"manage.brand.product.list",brandId:t.params.brandID}:{apiURL:"manage.category.product.list",categoryID:r};if(i.category={},i.categoryStatus=!1,i.pageStatus=!1,i.brandStatus=!1,s.canAccess("manage.product.list")||s.canAccess("manage.brand.product.list")||s.canAccess("manage.category.product.list")){$('.nav li a[href="#manageProducts"]').triggerHandler("click",!0)}i.getProducts=function(){i.productsListDataTable&&i.productsListDataTable.destroy(),i.productsListDataTable=a.dataTable("#productsTabList",{url:c,dtOptions:{searching:!0,order:[[1,"asc"]]},columnsData:d,scope:e},null,function(e){i.category=e._options.category,i.parentData=e._options.parentData,_.isEmpty(i.category)?i.categoryStatus=!1:i.categoryStatus=!0,i.brand=e._options.brand,_.isEmpty(i.brand)?i.brandStatus=!1:i.brandStatus=!0,i.pageStatus=!0})},_.defer(function(){i.getProducts()}),i.reloadDT=function(){a.reloadDT(i.productsListDataTable)},i.detailDialog=function(e){a.fetch({apiURL:"manage.product.detailSupportData",productID:e}).success(function(e){var t=e.data;o.showDialog(t,{templateUrl:__globals.getTemplateURL("product.manage.detail-dialog")},function(e){})})},i.add=function(e){this.catID=e,a.fetch("category.fancytree.support-data").success(function(e){i.categories=e.data.categories,o.showDialog(i,{templateUrl:__globals.getTemplateURL("category.add-dialog")},function(e){_.has(e.value,"category_added")&&!0===e.value.category_added&&i.reloadDT()})})},i.productDelete=function(e,t){__globals.showConfirmation({text:__ngSupport.getText(__globals.getJSString("product_delete_confirm_text"),{__name__:unescape(t)}),confirmButtonText:__globals.getJSString("delete_action_button_text")},function(){a.post({apiURL:"manage.product.delete",productID:e}).success(function(e){var t=e.data.message;o.processResponse(e,{error:function(){__globals.showConfirmation({title:__globals.getJSString("confirm_error_title"),text:t,type:"error"})}},function(){__globals.showConfirmation({title:__globals.getJSString("confirm_error_title"),text:t,type:"success"}),i.reloadDT()})})})}}]).controller("ProductDetailDialogController",["$scope",function(e){var t=this;t.ngDialogData=e.ngDialogData,t.productData=t.ngDialogData,t.currencySymbol=t.ngDialogData.currencySymbol,t.closeDialog=function(){e.closeThisDialog()}}])}(),function(){"use strict";angular.module("ManageProductApp.seoMeta",[]).controller("ProductSeoMetaController",["$scope","__DataStore","appServices","$stateParams","__Form",function(e,t,a,o,n){var s=this,i=o.productID;s.initialPageContentLoaded=!1,(s=n.setup(s,"form_seo_meta","seoMeta")).fetchSeoMeta=function(){t.fetch({apiURL:"manage.product.seo_meta.read",productID:i}).success(function(t){a.processResponse(t,null,function(){var e=t.data;n.updateModel(s,e.seo_meta),s.initialPageContentLoaded=!0})})},s.fetchSeoMeta(),s.submit=function(){n.process({apiURL:"manage.product.seo_meta.write",productID:i},s).success(function(e){a.processResponse(e,null,function(){s.fetchSeoMeta()})})}}])}(),function(){"use strict";angular.module("ManageProductApp.ratings",[]).controller("ManageProductRatingsListController",["$scope","__DataStore","appServices","$stateParams",function(e,a,o,n){var s=this;s.contentLoaded=!1,s.ratingListDataTable=a.dataTable("#lwItemRatingsTable",{url:{apiURL:"manage.product.ratings.read.list",productId:n.productID},columnsData:[{name:"fname",orderable:!0,template:"#itemFullNameTemplate"},{name:"formatRating",orderable:!1},{name:"review",orderable:!0},{name:"rated_on",template:"#itemRatedOnTemplate"},{name:null,template:"#itemRatingsColumnActionTemplate"}],dtOptions:{searching:!0},scope:e},null,function(e){s.totalRatingAvg=e._options.totalRatingAvg,s.contentLoaded=!0}),s.reloadDT=function(){a.reloadDT(s.ratingListDataTable)},s.delete=function(e,t){__globals.showConfirmation({html:__globals.getJSString("delete_rating"),confirmButtonText:__globals.getJSString("delete_action_button_text")},function(){a.post({apiURL:"manage.product.rating.write.delete",productId:n.productID,ratingId:e}).success(function(e){var t=e.data.message;o.processResponse(e,{error:function(e){__globals.showConfirmation({title:__globals.getJSString("confirm_error_title"),text:t,type:"error"})}},function(e){__globals.showConfirmation({title:__globals.getJSString("confirm_error_title"),text:t,type:"success"}),s.reloadDT()})})})}}])}(),function(){"use strict";angular.module("ManageProductApp.faqs",[]).controller("ManageProductFaqsListController",["$scope","__DataStore","appServices","$stateParams",function(e,a,o,n){var s=this;s.faqListDataTable=a.dataTable("#lwItemFaqsTable",{url:{apiURL:"manage.product.faq.read.list",productId:n.productID},columnsData:[{name:"question",orderable:!0,template:"#questionColumnActionTemplate"},{name:"created_at",orderable:!0},{name:null,template:"#itemfaqsColumnActionTemplate"}],dtOptions:{searching:!0},scope:e},null,function(e){}),s.reloadDT=function(){a.reloadDT(s.faqListDataTable)},s.showDetailDialog=function(e){a.fetch({apiURL:"manage.product.faq.detail.supportData",productId:n.productID,faqID:e}).success(function(e){var t=e.data;o.showDialog({faqDetailData:t},{templateUrl:__globals.getTemplateURL("product.manage.faq.detail-dialog")},function(e){_.has(e.value,"faq_updated")&&!0===e.value.faq_updated&&s.reloadDT()})})},s.addFaqs=function(){o.showDialog({},{templateUrl:__globals.getTemplateURL("product.manage.faq.add-dialog")},function(e){_.has(e.value,"faq_added")&&!0===e.value.faq_added&&s.reloadDT()})},s.edit=function(e){a.fetch({apiURL:"manage.product.faq.editData",productId:n.productID,faqID:e}).success(function(e){o.processResponse(e,null,function(){o.showDialog({faqData:e.data.faqData},{templateUrl:__globals.getTemplateURL("product.manage.faq.edit-dialog")},function(e){_.has(e.value,"faq_updated")&&!0===e.value.faq_updated&&s.reloadDT()})})})},s.delete=function(e,t){__globals.showConfirmation({html:__globals.getJSString("delete_faq"),confirmButtonText:__globals.getJSString("delete_action_button_text")},function(){a.post({apiURL:"manage.product.faq.delete",productId:n.productID,faqID:e}).success(function(e){var t=e.data.message;o.processResponse(e,{error:function(e){__globals.showConfirmation({title:__globals.getJSString("confirm_error_title"),text:t,type:"error"})}},function(e){__globals.showConfirmation({title:__globals.getJSString("confirm_error_title"),text:t,type:"success"}),s.reloadDT()})})})}}]).controller("FaqDetailController",["$scope","__DataStore","appServices","$stateParams",function(e,t,a,o){this.ngDialogData=e.ngDialogData,this.faqDetailData=this.ngDialogData.faqDetailData.faqDetailData,this.closeDialog=function(){e.closeThisDialog()}}])}(),function(){"use strict";angular.module("ManageProductApp.awatingUser",[]).controller("ProductAwatingUserListController",["$scope","__DataStore","appServices","$stateParams",function(e,t,o,n){var s=this;s.isShowDeleteBtn=!1,s.selectedRows=[],s.getAwatingUserList=function(){t.fetch({apiURL:"manage.product.awating_user.read.list",productId:n.productID}).success(function(a){o.processResponse(a,null,function(e){var t=a.data;s.awatingUserList=t.awatingUserData,s.productOutOfStock=t.productOutOfStock})})},s.getAwatingUserList(),s.checkIsSelected=function(){s.anySelected=!1,_.defer(function(){_.forEach(s.awatingUserList,function(e){e.isSelected&&(s.anySelected=!0)}),s.isShowDeleteBtn=s.anySelected})},s.sendNotificationMailDialog=function(e,t){o.showDialog({awatingUserList:s.awatingUserList,mailType:e,notifyUserId:t},{templateUrl:__globals.getTemplateURL("product.manage.awating-user.customer-mail-dialog")},function(e){})},s.deleteAllAwatingUser=function(){var a=$("#lwUserDeleteSelectedConfirmTextMsg");__globals.showConfirmation({html:a.attr("data-message"),confirmButtonText:a.attr("data-delete-button-text")},function(){t.post({apiURL:"manage.product.awating_user.delete.multipleUser",productId:n.productID},s).success(function(e){var t=e.data.message;o.processResponse(e,{error:function(e){__globals.showConfirmation({title:a.attr("data-success-text"),text:t,type:"error"})}},function(e){__globals.showConfirmation({title:a.attr("data-success-text"),text:t,type:"success"}),s.getAwatingUserList(),s.isShowDeleteBtn=!1})})})},s.deleteAwatingUser=function(e){var a=$("#lwUserDeleteConfirmTextMsg");__globals.showConfirmation({html:__globals.getReplacedString(a),confirmButtonText:a.attr("data-delete-button-text")},function(){t.post({apiURL:"manage.product.awating_user.delete",productId:n.productID,notifyUserId:e}).success(function(e){var t=e.data.message;o.processResponse(e,{error:function(e){__globals.showConfirmation({title:a.attr("data-success-text"),text:t,type:"error"})}},function(e){__globals.showConfirmation({title:a.attr("data-success-text"),text:t,type:"success"}),s.getAwatingUserList(),s.isShowDeleteBtn=!1})})})},e.$on("awating_user_added_or_updated",function(e){e&&s.getAwatingUserList()})}])}(),function(){"use strict";angular.module("ManageApp.orderDetails",[]).controller("ManageOrderDetailsController",["__DataStore","$stateParams","appServices",function(e,t,a){var o=this,n=t.orderId;o.discountStatus=!1,o.initialContendLoaded=!1,e.fetch({apiURL:"manage.order.details.dialog",orderID:n}).success(function(t){a.processResponse(t,null,function(){var e=t.data.orderDetails.data;o.billingAddress=e.address.billingAddress,o.shippingAddress=e.address.shippingAddress,o.sameAddress=e.address.sameAddress,o.user=e.user,o.order=e.order,o.orderProducts=e.orderProducts,o.coupon=e.coupon,o.taxes=e.taxes,o.shipping=e.shipping}),o.initialContendLoaded=!0}),o.contactUserDialog=function(){e.fetch({apiURL:"manage.order.get.user.details",orderID:n}).success(function(e){o.userData=e.data,a.processResponse(e,null,function(){a.showDialog(e.data,{templateUrl:__globals.getTemplateURL("order.manage.contact-user")},function(e){})})})}}])}(),function(){"use strict";angular.module("ManagePagesApp.list",[]).controller("ManagePagesListController",["$scope","__DataStore","appServices","$rootScope","$state",function(e,n,s,t,a){var i=this;i.parentPageID=a.params.parentPageID;var o={searching:!0,order:[[1,"asc"]],paginate:i.parent=!1};t.canAccess("manage.page.update.list.order")&&(o={searching:!0,order:[[1,"asc"]],paginate:!1,rowReorder:!0,rowReorder:{selector:"td:nth-child(2)"}});i.pagesListDataTable=n.dataTable("#lwPagesTable",{url:{apiURL:"manage.pages.fetch.datatable.source","parentPageID?":i.parentPageID?i.parentPageID:null},columnsData:[{name:"title",orderable:true,template:"#pagesColumnTitleTemplate"},{name:"list_order",orderable:true,template:"#pagesColumnListOrderTemplate"},{name:"type",orderable:true,template:"#pagesColumnTypeTemplate"},{name:"created_at",orderable:true,template:"#pagesColumnTimeTemplate"},{name:"updated_at",orderable:true,template:"#pagesColumnUpdatedTimeTemplate"},{name:"add_to_menu",template:"#pagesColumnAddToMenuTemplate"},{name:"status",orderable:true,template:"#pagesColumnActiveTemplate"},{name:null,template:"#pagesColumnActionTemplate"}],dtOptions:o,scope:e}),$("#lwPagesTable").on("row-reorder.dt",function(e,t,a){var o=[];_.forEach(t,function(e,t){o.push({_id:_.trim(e.node.id.replace("rowid_","")),newPosition:e.newPosition,oldPosition:e.oldPosition})}),n.post("manage.page.update.list.order",{pages_list_order:o}).success(function(e){s.processResponse(e,{error:function(){i.reloadDT()}},function(){i.reloadDT()})})}),i.parentPageID&&n.fetch({apiURL:"manage.pages.get.parent.page",parentPageID:i.parentPageID}).success(function(e){i.parentPage=e.data,i.parent=!0,i.parentPageID=i.parentPageID});i.reloadDT=function(){n.reloadDT(i.pagesListDataTable)},i.delete=function(e,t){__globals.showConfirmation({text:__ngSupport.getText(__globals.getJSString("page_delete_confirm_text"),{__name__:unescape(t)}),confirmButtonText:__globals.getJSString("delete_action_button_text")},function(){n.post({apiURL:"manage.pages.delete",pageID:e}).success(function(e){var t=e.data.message;s.processResponse(e,{error:function(e){__globals.showConfirmation({title:__globals.getJSString("confirm_error_title"),text:t,type:"error"})}},function(e){__globals.showConfirmation({title:__globals.getJSString("confirm_error_title"),text:t,type:"success"}),i.reloadDT()})})})}}])}(),function(){"use strict";angular.module("ManagePagesApp.add.dialog",[]).controller("ManagePagesAddDialogController",["$scope","$state","appServices","__DataStore",function(t,a,o,e){var n=this;e.fetch("manage.pages.get.page_type").success(function(e){n.page=e.data,o.showDialog(n,{templateUrl:__globals.getTemplateURL("pages.manage.add")},function(e){_.has(e.value,"page_added")&&!0===e.value.page_added&&t.$parent.managePagesListCtrl.reloadDT(),a.go("pages")})})}])}(),function(){"use strict";angular.module("ManagePagesApp.add",[]).controller("ManagePagesAddController",["$scope","__Form","$state","appServices",function(t,e,a,o){var n=this;if((n=e.setup(n,"manage_pages_add","pageData")).pagesSelectConfig=__globals.getSelectizeOptions({valueField:"value",labelField:"text",searchField:["text"]}),t.ngDialogData){var s=t.ngDialogData.page;n.pageType=s.type,n.pageLink=s.link,n.pages=s.fancytree_data}n.pageData.add_to_menu=!0,n.pageData.hide_sidebar=!1,n.pageData.active=!0,n.pageData.type="1",n.pageData.open_as="_blank",n.descriptionRequired=!0,n.externalLinkRequired=!1,n.openAsRequired=!1,n.pageTypeChanged=function(){var e=n.pageData.type;1==e?(n.descriptionRequired=!0,n.externalLinkRequired=!1,n.openAsRequired=!1):2==e&&(n.descriptionRequired=!1,n.externalLinkRequired=!0,n.openAsRequired=!0)},n.submit=function(){e.process("manage.pages.add",n).success(function(e){o.processResponse(e,null,function(){t.closeThisDialog({page_added:!0})})})},n.close=function(){t.closeThisDialog()}}])}(),function(){"use strict";angular.module("ManagePagesApp.edit.dialog",[]).controller("ManagePagesEditDialogController",["$scope","$state","appServices","__DataStore",function(a,o,n,e){e.fetch({apiURL:"manage.pages.get.details",pageID:o.params.pageID}).success(function(t){n.processResponse(t,null,function(e){n.showDialog(t.data,{templateUrl:__globals.getTemplateURL("pages.manage.edit")},function(e){_.has(e.value,"page_updated")&&!0===e.value.page_updated&&a.$parent.managePagesListCtrl.reloadDT(),o.go("pages")})})})}])}(),function(){"use strict";angular.module("ManagePagesApp.edit",[]).controller("ManagePagesEditController",["$scope","__Form","appServices","$state",function(t,e,a,o){var n=this;n.updateURL={apiURL:"manage.pages.update",pageID:o.params.pageID},n=e.setup(n,"form_page_edit","pageData"),(n=e.updateModel(n,t.ngDialogData.pageDetails)).pagesSelectConfig=__globals.getSelectizeOptions({valueField:"value",labelField:"text",searchField:["text"]}),n.ngDialogData=t.ngDialogData,n.type=n.ngDialogData.pageDetails.type,3!=n.type&&(n.pageType=n.ngDialogData.configItems.pageType,n.pageLink=n.ngDialogData.configItems.pageLinks,n.getPageType=function(){if(n.ngDialogData){n.pages=n.ngDialogData.pageDetails.fancytree_data;var e=n.ngDialogData.pageDetails.type;1==e?(n.descriptionRequired=!0,n.externalLinkRequired=!1,n.openAsRequired=!1):2==e&&(n.descriptionRequired=!1,n.externalLinkRequired=!0,n.openAsRequired=!0)}},n.getPageType());n.update=function(){e.process(n.updateURL,n).success(function(e){a.processResponse(e,null,function(e){t.closeThisDialog({page_updated:!0})})})},n.cancel=function(){t.closeThisDialog()}}])}(),function(){"use strict";angular.module("ManagePagesApp.page.details",[]).controller("PageDetailsController",["$state","appServices","__DataStore",function(e,t,a){var o=this;o.getPageInfo=function(){a.fetch({apiURL:"manage.display.page.details",pageID:e.params.pageID},o).success(function(e){t.processResponse(e,null,function(){o.pageDetails=e.data})})},o.getPageInfo()}])}(),function(){"use strict";angular.module("manageApp.storeSettingsEdit",[]).controller("EditStoreSettingsController",["$state","$scope",function(t,e){var s=this;e.$on("$stateChangeStart",function(e,t,a,o,n){_.defer(function(){var e=t.name;"store_settings_edit.general"==e?(s.generalPanelClass="panel-collapse collapse in",s.generalPanelStatus=!0):s.generalPanelClass="panel-collapse collapse","store_settings_edit.currency"==e?(s.currencylPanelClass="panel-collapse collapse in",s.currencyPanelStatus=!0):s.currencylPanelClass="panel-collapse collapse","store_settings_edit.order"==e?(s.orderPanelClass="panel-collapse collapse in",s.orderPanelStatus=!0):s.orderPanelClass="panel-collapse collapse","store_settings_edit.product"==e?(s.productsPanelClass="panel-collapse collapse in",s.productPanelStatus=!0):s.productsPanelClass="panel-collapse collapse","store_settings_edit.placement"==e?(s.placementPanelClass="panel-collapse collapse in",s.placementPanelStatus=!0):s.placementPanelClass="panel-collapse collapse","store_settings_edit.contact"==e?(s.contactPanelClass="panel-collapse collapse in",s.contactPanelStatus=!0):s.contactPanelClass="panel-collapse collapse","store_settings_edit.term_condition"==e?(s.termsConditionsPanelClass="panel-collapse collapse in",s.termsConditionPanelStatus=!0):s.termsConditionsPanelClass="panel-collapse collapse","store_settings_edit.privacy_policy"==e?(s.privacyPolicyPanelClass="panel-collapse collapse in",s.privacyPolicyPanelStatus=!0):s.privacyPolicyPanelClass="panel-collapse collapse","store_settings_edit.social"==e?(s.socialPanelClass="panel-collapse collapse in",s.socialPanelStatus=!0):s.socialPanelClass="panel-collapse collapse","store_settings_edit.social_authentication_setup"==e?(s.socialLoginPanelClass="panel-collapse collapse in",s.socialLoginPanelStatus=!0):s.socialLoginPanelClass="panel-collapse collapse","store_settings_edit.language"==e?(s.languagePanelClass="panel-collapse collapse in",s.languagePanelStatus=!0):s.languagePanelClass="panel-collapse collapse","store_settings_edit.css-style"==e?(s.cssStylePanelClass="panel-collapse collapse in",s.cssStylePanelStatus=!0):s.cssStylePanelClass="panel-collapse collapse"})}),s.getPage=function(e){e&&_.defer(function(){switch(e){case 1:t.go("store_settings_edit.general"),s.generalPanelStatus=!0;break;case 2:t.go("store_settings_edit.currency"),s.currencyPanelStatus=!0;break;case 3:t.go("store_settings_edit.order"),s.orderPanelStatus=!0;break;case 4:t.go("store_settings_edit.product"),s.productPanelStatus=!0;break;case 5:t.go("store_settings_edit.placement"),s.placementPanelStatus=!0;break;case 6:t.go("store_settings_edit.contact"),s.contactPanelStatus=!0;break;case 7:t.go("store_settings_edit.term_condition"),s.termsConditionPanelStatus=!0;break;case 8:t.go("store_settings_edit.privacy_policy"),s.privacyPolicyPanelStatus=!0;break;case 9:t.go("store_settings_edit.social"),s.socialPanelStatus=!0;break;case 10:t.go("store_settings_edit.css-style"),s.cssStylePanelStatus=!0;break;case 11:t.go("store_settings_edit.social_authentication_setup"),s.socialLoginPanelStatus=!0}})},"store_settings_edit.general"==t.current.name?(s.generalPanelClass="panel-collapse collapse in",s.generalPanelStatus=!0):s.generalPanelClass="panel-collapse collapse";"store_settings_edit.currency"==t.current.name?(s.currencylPanelClass="panel-collapse collapse in",s.currencyPanelStatus=!0):s.currencylPanelClass="panel-collapse collapse";"store_settings_edit.order"==t.current.name?(s.orderPanelClass="panel-collapse collapse in",s.orderPanelStatus=!0):s.orderPanelClass="panel-collapse collapse";"store_settings_edit.product"==t.current.name?(s.productsPanelClass="panel-collapse collapse in",s.productPanelStatus=!0):s.productsPanelClass="panel-collapse collapse";"store_settings_edit.placement"==t.current.name?(s.placementPanelClass="panel-collapse collapse in",s.placementPanelStatus=!0):s.placementPanelClass="panel-collapse collapse";"store_settings_edit.contact"==t.current.name?(s.contactPanelClass="panel-collapse collapse in",s.contactPanelStatus=!0):s.contactPanelClass="panel-collapse collapse";"store_settings_edit.term_condition"==t.current.name?(s.termsConditionsPanelClass="panel-collapse collapse in",s.termsConditionPanelStatus=!0):s.termsConditionsPanelClass="panel-collapse collapse";"store_settings_edit.privacy_policy"==t.current.name?(s.privacyPolicyPanelClass="panel-collapse collapse in",s.privacyPolicyPanelStatus=!0):s.privacyPolicyPanelClass="panel-collapse collapse";"store_settings_edit.social"==t.current.name?(s.socialPanelClass="panel-collapse collapse in",s.socialPanelStatus=!0):s.socialPanelClass="panel-collapse collapse";"store_settings_edit.social_authentication_setup"==t.current.name?(s.socialLoginPanelClass="panel-collapse collapse in",s.socialLoginPanelStatus=!0):s.socialLoginPanelClass="panel-collapse collapse";"store_settings_edit.language"==t.current.name?(s.languagePanelClass="panel-collapse collapse in",s.languagePanelStatus=!0):s.languagePanelClass="panel-collapse collapse";"store_settings_edit.css-style"==t.current.name?(s.cssStylePanelClass="panel-collapse collapse in",s.cssStylePanelStatus=!0):s.cssStylePanelClass="panel-collapse collapse"}])}(),function(){"use strict";angular.module("manageApp.GeneralSettings",[]).controller("GeneralController",["$scope","$state","appServices",function(e,t,a){a.showDialog({},{templateUrl:__globals.getTemplateURL("store.general")},function(e){t.go("store_settings_edit")})}]).controller("GeneralSettingsController",["__Form","$scope","appServices","$state","FileUploader","__Utils","appNotify","$rootScope",function(a,e,o,t,n,s,i,r){var l=this;l.pageStatus=!1,l.icoFiles=[],(l=a.setup(l,"form_general_settings","editData",{secured:!0,modelUpdateWatcher:!1,unsecuredFields:["store_name"]})).logo_images_select_config=__globals.getSelectizeOptions({valueField:"name",labelField:"name",render:{item:function(e,t){return s.template("#imageListItemTemplate",e)},option:function(e,t){return s.template("#imageListOptionTemplate",e)}},searchField:["name"]}),l.timezone_select_config=__globals.getSelectizeOptions({valueField:"value",labelField:"text",searchField:["text"]});var c="";a.fetch({apiURL:"store.settings.edit.supportdata",formType:1}).success(function(e){var t=e.data;c=t.store_settings.logo_background_color,l.themeColors=t.store_settings.theme_colors,l.homePageList=t.store_settings.home_page_setting,l.timezoneData=t.store_settings.timezone_list,l.languages=t.store_settings.locale_list,o.processResponse(e,null,function(){_.isEmpty(t.store_settings)||(a.updateModel(l,t.store_settings),l.editData.logo_background_color=c),l.pageStatus=!0})}),l.selectThemeColor=function(e){l.editData.logo_background_color=e,$("#lwchangeHeaderColor").css("background","#"+e)},l.imageChange=function(e){l.editData.invoice_image==l.editData.logo_image&&(1==e?l.editData.logo_image="":2==e&&(l.editData.invoice_image=""))},l.images_count=0,l.faviconFilesCount=0,l.getTempImagesMedia=function(){a.fetch("media.uploaded.images",{fresh:!0}).success(function(e){o.processResponse(e,null,function(){l.logoImages=e.data.files;var a=[],o=[];_.forEach(l.logoImages,function(e,t){l.imagesExtention=e.name.split(".").pop(),"png"==l.imagesExtention?a.push(e):"ico"==l.imagesExtention&&o.push(e)}),l.logo_images=a,l.icoFiles=o,0<l.logo_images.length||0<l.icoFiles.length?(l.images_count=l.logo_images.length,l.faviconFilesCount=l.icoFiles.length):(l.images_count=0,l.faviconFilesCount=0)})})},l.getTempImagesMedia(),r.$on("lw-upload-image-deleted",function(e,t){t&&l.getTempImagesMedia()});var d=l.uploader=new n({url:s.apiURL("media.upload.image"),autoUpload:!0,headers:{"X-XSRF-TOKEN":s.getXSRFToken()}});d.filters.push({name:"customFilter",fn:function(e,t){if("image/png"==e.type||"image/x-icon"==e.type)return this.queue.length<1e3}}),l.currentUploadedFileCount=0,l.loadingStatus=!1,d.onAfterAddingAll=function(){l.loadingStatus=!0,i.info(__globals.getJSString("loading_text"),{sticky:!0})},d.onBeforeUploadItem=function(e){l.loadingStatus=!0},d.onSuccessItem=function(e,t){o.processResponse(t,null,function(){l.currentUploadedFileCount++})},d.onSuccessItem=function(e,t){o.processResponse(t,null,function(){"png"!==e._file.name.split(".").pop()&&"ico"!==e._file.name.split(".").pop()||l.currentUploadedFileCount++})},d.onCompleteAll=function(){l.loadingStatus=!1,0===l.currentUploadedFileCount&&i.warn(__globals.getJSString("logo_empty_file_uploaded_text"),{sticky:!1}),0<l.currentUploadedFileCount&&i.success(l.currentUploadedFileCount+" "+__globals.getJSString("file_uploaded_text"),{sticky:!1}),l.getTempImagesMedia(),l.currentUploadedFileCount=0},l.submit=function(){a.process({apiURL:"store.settings.edit",formType:1},l).success(function(e){o.processResponse(e,null,function(){1==e.data.showRealodButton&&__globals.showConfirmation({title:e.data.message,text:e.data.textMessage,type:"success",showCancelButton:!0,confirmButtonClass:"btn-success",confirmButtonText:__globals.getJSString("reload_text"),confirmButtonColor:"#337ab7",closeOnConfirm:!1},function(){location.reload()})})})},l.showUploadedMediaDialog=function(){o.showDialog({image_files:_.merge(l.logo_images,l.icoFiles)},{templateUrl:__globals.getTemplateURL("product.manage.uploaded-media")},function(e){_.has(e.value,"files")?(l.logo_images=e.value.files,l.images_count=e.value.files.length):"$closeButton"==e.value&&l.getTempImagesMedia()})},l.closeDialog=function(){l.editData.logo_background_color!=c&&$("#lwchangeHeaderColor").css("background","#"+c),e.closeThisDialog()}}])}(),function(){"use strict";angular.module("manageApp.CurrencySettings",[]).controller("CurrencyController",["$scope","$state","appServices",function(e,t,a){a.showDialog({},{templateUrl:__globals.getTemplateURL("store.currency")},function(e){t.go("store_settings_edit")})}]).controller("CurrencySettingsController",["__Form","appServices","$scope",function(o,t,e){var s=this;s.isZeroDecimalCurrency=!1,s.currencyExist=!1,s.manageCurrecnyTab=function(e){e.preventDefault()},s.generateCurrenciesArray=function(e,t){if(!t)return e;var a=[];return _.forEach(e,function(e,t){a.push({currency_code:t,currency_name:e.name})}),a.push({currency_code:"other",currency_name:__globals.getJSString("other")}),a},s.checkIsZeroDecimalCurrency=function(e,a){var t=_.filter(e,function(e,t){return t===a});s.isZeroDecimalCurrency=Boolean(t.length)},s.checkIsPaypalSupported=function(a){var e=_.filter(s.options,function(e,t){return t==a});s.isPaypalSupport=Boolean(e.length)},s.formatCurrency=function(t,a){_.defer(function(){var e=$("#lwCurrencyFormat").attr("data-format");s.currency_format_preview=e.split("{__currencySymbol__}").join(t).split("{__amount__}").join(100).split("{__currencyCode__}").join(a)})},s.pageStatus=!1,(s=o.setup(s,"edit_currency_configuration","editData",{secured:!0,unsecuredFields:["currency_symbol"]})).currencies_select_config=__globals.getSelectizeOptions({valueField:"currency_code",labelField:"currency_name",searchField:["currency_code","currency_name"]}),s.multi_currencies_select_config=__globals.getSelectizeOptions({valueField:"currency_code",labelField:"currency_name",searchField:["currency_code","currency_name"],plugins:["remove_button"],maxItems:1e3,delimiter:","}),s.is_support_paypal=!0,o.fetch({apiURL:"store.settings.edit.supportdata",formType:2}).success(function(a){t.processResponse(a,null,function(){var e=a.data,t=e.store_settings.currencies;s.options=t.options,s.currencies=t.details,s.zeroDecimal=t.zero_decimal,s.autoRefreshList=e.store_settings.autoRefreshList,s.paymentOptionList=e.paymentOptionList,_.defer(function(){s.currencies_options=s.generateCurrenciesArray(t.details,!0),s.multi_curency_list=s.prepareMultiCurrencies(s.currencies_options),s.currentSelectCurrency(s.editData.currency,s.editData.paymentOptionList,s.currencies_options)}),_.isEmpty(e.store_settings)||(s.checkIsZeroDecimalCurrency(s.zeroDecimal,e.store_settings.currency_value),s.checkIsPaypalSupported(e.store_settings.currency),s.default_currency_format=e.store_settings.default_currency_format,s=o.updateModel(s,e.store_settings),_.forEach(s.currencies,function(e,t){t==s.editData.currency_value&&(s.currencySymbol=e.symbol)}),"other"==e.store_settings.currency&&(s.currencySymbol=e.store_settings.currency_symbol),s.formatCurrency(s.currencySymbol,s.editData.currency_value)),s.pageStatus=!0})}),s.currentSelectCurrency=function(a,e,t){s.currencyExist=!1,s.currenyLabel="",_.map(t,function(e,t){a==e.currency_code&&(s.currenyLabel=e.currency_name)}),(_.includes(e,"16")||_.includes(e,"18")||_.includes(e,"11"))&&"INR"!=a&&(s.currencyExist=!0),(_.includes(e,"1")||_.includes(e,"14")||_.includes(e,"20"))&&"INR"==a&&(s.currencyExist=!0),"TRY"!=a&&_.includes(e,"14")&&(s.currencyExist=!0),"NGN"!=a&&_.includes(e,"20")&&(s.currencyExist=!0)},s.prepareMultiCurrencies=function(e){var t=[];return _.forEach(e,function(e){"TWD"!=e.currency_code&&"other"!=e.currency_code&&t.push(e)}),t},s.useDefaultFormat=function(e,t,a){s.editData.currency_format=e;var o=$("#lwSymbol"),n=(t=o.html(o.attr("data")).text(),s.editData.currency_format);s.currency_format_preview=n.split("{__currencySymbol__}").join(t).split("{__amount__}").join(100).split("{__currencyCode__}").join(a)},s.updateCurrencyPreview=function(e,t,a){if(1==a){var o=$("#lwSymbol");e=o.html(o.attr("data")).text()}_.isUndefined(e)&&(e=""),_.isUndefined(t)&&(t="");var n=$("#lwCurrencyFormat").attr("data-format");s.currency_format_preview=n.split("{__currencySymbol__}").join(e).split("{__amount__}").join(100).split("{__currencyCode__}").join(t)},s.submit=function(){o.process({apiURL:"store.settings.edit",formType:2},s).success(function(e){t.processResponse(e,null,function(){1==e.data.showRealodButton&&__globals.showConfirmation({title:e.data.message,text:e.data.textMessage,type:"success",showCancelButton:!0,confirmButtonClass:"btn-success",confirmButtonText:__globals.getJSString("reload_text"),confirmButtonColor:"#337ab7"},function(){location.reload()})})})},s.currencyChange=function(a,e,t){s.currentSelectCurrency(a,e,t),s.checkIsZeroDecimalCurrency(s.zeroDecimal,a),_.isEmpty(a)||"other"==a?(s.editData.currency_value="",s.editData.currency_symbol=""):(_.forEach(s.currencies,function(e,t){t==a&&(s.editData.currency_value=a,s.editData.currency_symbol=e.ASCII,s.currencySymbol=e.symbol)}),s.is_support_paypal=!0),s.updateCurrencyPreview(s.currencySymbol,s.editData.currency_value),s.checkIsPaypalSupported(s.editData.currency_value)},s.currencyValueChange=function(a){if(s.checkIsZeroDecimalCurrency(s.zeroDecimal,a),_.isEmpty(a)||"other"==a)_.isEmpty(a)?s.editData.currency="":s.editData.currency="other";else{var o={};_.forEach(s.currencies,function(e,t){t==a&&(o=e)}),_.isEmpty(o)?s.editData.currency="other":(s.editData.currency=a,s.editData.currency_symbol=o.ASCII,s.currencySymbol=o.symbol)}s.checkIsPaypalSupported(a),_.isUndefined(s.editData.currency_value)&&(s.currencySymbol=""),s.updateCurrencyPreview(s.currencySymbol,s.editData.currency_value)},s.closeDialog=function(){e.closeThisDialog()}}])}(),function(){"use strict";angular.module("manageApp.OrderSettings",[]).controller("OrderController",["$scope","$state","appServices",function(e,t,a){a.showDialog({},{templateUrl:__globals.getTemplateURL("store.order")},function(e){t.go("store_settings_edit")})}]).controller("OrderSettingsController",["__Form","appServices","$scope","$state",function(a,o,t,n){var s=this;(s=a.setup(s,"form_order_and_currency_settings","editData",{secured:!0,modelUpdateWatcher:!1,unsecuredFields:["payment_check_text","payment_bank_text","payment_cod_text","payment_other_text"]})).pageStatus=!1,s.cancellation_statuses_config=__globals.getSelectizeOptions({maxItems:1e3,searchField:["name","product_id"],plugins:["remove_button"]}),a.fetch({apiURL:"store.settings.edit.supportdata",formType:3}).success(function(e){var t=e.data;o.processResponse(e,null,function(){_.isEmpty(t.store_settings)||a.updateModel(s,t.store_settings),s.order_statuses=__globals.generateKeyValueItems(t.store_settings.order_statuses),s.pageStatus=!0})}),s.addStripeKeys=function(e){1==e?s.editData.isLiveStripeKeysExist=!1:s.editData.isTestingStripeKeysExist=!1},s.addRazorpayKeys=function(e){1==e?s.editData.isLiveRazorPayKeysExist=!1:s.editData.isTestingRazorPayKeysExist=!1},s.addIyzipayKeys=function(e){1==e?s.editData.isLiveIyzipayKeyExist=!1:s.editData.isTestingIyzipayKeyExist=!1},s.submit=function(){a.process({apiURL:"store.settings.edit",formType:3},s).success(function(e){o.processResponse(e,null,function(){s.editData.logo_image="",1==e.data.showRealodButton&&__globals.showConfirmation({title:e.data.message,text:e.data.textMessage,type:"success",showCancelButton:!0,confirmButtonClass:"btn-success",confirmButtonText:__globals.getJSString("reload_text"),confirmButtonColor:"#337ab7",closeOnConfirm:!1},function(){location.reload()}),"taxes"==n.current.name&&t.closeThisDialog()})})},s.closeDialog=function(){t.closeThisDialog()}}])}(),function(){"use strict";angular.module("manageApp.PaymentSettings",[]).controller("PaymentController",["$scope","$state","appServices",function(e,t,a){a.showDialog({},{templateUrl:__globals.getTemplateURL("store.payment")},function(e){t.go("store_settings_edit")})}]).controller("PaymentSettingsController",["__Form","appServices","$scope","$state",function(a,o,t,n){var s=this;(s=a.setup(s,"form_payment_and_currency_settings","editData",{secured:!0,modelUpdateWatcher:!1,unsecuredFields:["payment_check_text","payment_bank_text","payment_cod_text","payment_other_text"]})).pageStatus=!1,s.enable_paypal=!1,s.enable_stripe=!1,s.enable_paytm=!1,s.enable_razorpay=!1,s.enable_paystack=!1,s.enable_iyzico=!1,s.enable_instamojo=!1,s.enable_cod=!1,s.enable_check=!1,s.enable_bank=!1,s.enable_other=!1,s.paymentOptionConfig=__globals.getSelectizeOptions({maxItems:1e3,searchField:["name"],plugins:["remove_button"]}),s.showPaymentPageTab=function(e){e.preventDefault()},a.fetch({apiURL:"store.settings.edit.supportdata",formType:13}).success(function(e){var t=e.data;o.processResponse(e,null,function(){_.isEmpty(t.store_settings)||a.updateModel(s,t.store_settings),__pr(t);var e=s.editData.select_payment_option;s.enable_paypal=_.includes(e,1),s.enable_stripe=_.includes(e,6),s.enable_paytm=_.includes(e,16),s.enable_razorpay=_.includes(e,11),s.enable_paystack=_.includes(e,20),s.enable_iyzico=_.includes(e,14),s.enable_instamojo=_.includes(e,18),s.enable_cod=_.includes(e,4),s.enable_check=_.includes(e,2),s.enable_bank=_.includes(e,3),s.enable_other=_.includes(e,5),s.paymentOptions=__globals.generateKeyValueItems(t.store_settings.paymentOptions),s.pageStatus=!0})}),s.changePaymentSetting=function(e,t){_.isEmpty(s.editData.select_payment_option)&&(s.editData.select_payment_option=[]),e?_.includes(s.editData.select_payment_option,t)||s.editData.select_payment_option.push(t):e||_.includes(s.editData.select_payment_option,t)&&_.remove(s.editData.select_payment_option,function(e){return e==t})},s.selectPaymentOptions=function(e){s.optionId=e},s.addStripeKeys=function(e){1==e?s.editData.isLiveStripeKeysExist=!1:s.editData.isTestingStripeKeysExist=!1},s.addRazorpayKeys=function(e){1==e?s.editData.isLiveRazorPayKeysExist=!1:s.editData.isTestingRazorPayKeysExist=!1},s.addIyzipayKeys=function(e){1==e?s.editData.isLiveIyzipayKeysExist=!1:s.editData.isTestingIyzipayKeysExist=!1},s.addPaytmKeys=function(e){1==e?s.editData.isLivePaytmKeysExist=!1:s.editData.isTestingPaytmKeysExist=!1},s.addInstamojoKeys=function(e){1==e?s.editData.isLiveInstamojoKeysExist=!1:s.editData.isTestingInstamojoKeysExist=!1},s.addPayStackKeys=function(e){1==e?s.editData.isLivePayStackKeysExist=!1:s.editData.isTestingPayStackKeysExist=!1},s.addPaypalKeys=function(e){1==e?s.editData.isLivePaypalKeysExist=!1:s.editData.isTestingPaypalKeysExist=!1},s.submit=function(){a.process({apiURL:"store.settings.edit",formType:13},s).success(function(e){o.processResponse(e,null,function(){s.editData.logo_image="",1==e.data.showRealodButton&&__globals.showConfirmation({title:e.data.message,text:e.data.textMessage,type:"success",showCancelButton:!0,confirmButtonClass:"btn-success",confirmButtonText:__globals.getJSString("reload_text"),confirmButtonColor:"#337ab7",closeOnConfirm:!1},function(){location.reload()}),"taxes"==n.current.name&&t.closeThisDialog()})})},s.closeDialog=function(){t.closeThisDialog()}}])}(),function(){"use strict";angular.module("manageApp.PlacementSettings",[]).controller("PlacementsController",["$scope","$state","appServices",function(e,t,a){a.showDialog({},{templateUrl:__globals.getTemplateURL("store.placement")},function(e){t.go("store_settings_edit")})}]).controller("PlacementSettingsController",["__Form","$scope","appServices",function(a,e,o){var n=this;n.pageStatus=!1,(n=a.setup(n,"form_placement_settings","editData",{secured:!0,modelUpdateWatcher:!1,unsecuredFields:["addtional_page_end_content","global_notification","append_email_message"]})).categories_menu_placement_select_config=__globals.getSelectizeOptions({valueField:"value",labelField:"name",searchField:["name"]}),n.brand_menu_placement_select_config=__globals.getSelectizeOptions({valueField:"value",labelField:"name",searchField:["name"]}),a.fetch({apiURL:"store.settings.edit.supportdata",formType:5}).success(function(e){var t=e.data;n.menu_placement=t.store_settings.menu_placement,o.processResponse(e,null,function(){_.isEmpty(t.store_settings)||a.updateModel(n,t.store_settings),n.pageStatus=!0})}),n.submit=function(){a.process({apiURL:"store.settings.edit",formType:5},n).success(function(e){o.processResponse(e,null,function(){n.editData.logo_image="",1==e.data.showRealodButton&&__globals.showConfirmation({title:e.data.message,text:e.data.textMessage,type:"success",showCancelButton:!0,confirmButtonClass:"btn-success",confirmButtonText:__globals.getJSString("reload_text"),confirmButtonColor:"#337ab7",closeOnConfirm:!1},function(){location.reload()})})})},n.closeDialog=function(){e.closeThisDialog()}}])}(),function(){"use strict";angular.module("manageApp.ProductSettings",[]).controller("ProductController",["$scope","$state","appServices",function(e,t,a){a.showDialog({},{templateUrl:__globals.getTemplateURL("store.product")},function(e){t.go("store_settings_edit")})}]).controller("ProductSettingsController",["__Form","appServices","$scope",function(a,o,e){var n=this;n.pageStatus=!1,(n=a.setup(n,"form_product_settings_edit","editData",{secured:!0,modelUpdateWatcher:!1})).editData.credit_info=!0,n.manageProductSettingTab=function(e){e.preventDefault()},a.fetch({apiURL:"store.settings.edit.supportdata",formType:4}).success(function(e){var t=e.data;o.processResponse(e,null,function(){_.isEmpty(t.store_settings)||a.updateModel(n,t.store_settings),n.pageStatus=!0})}),n.submit=function(){a.process({apiURL:"store.settings.edit",formType:4},n).success(function(e){o.processResponse(e,null,function(){1==e.data.showRealodButton&&__globals.showConfirmation({title:e.data.message,text:e.data.textMessage,type:"success",showCancelButton:!0,confirmButtonClass:"btn-success",confirmButtonText:__globals.getJSString("reload_text"),confirmButtonColor:"#337ab7",closeOnConfirm:!1},function(){location.reload()})})})},n.closeDialog=function(){e.closeThisDialog()}}])}(),function(){"use strict";angular.module("manageApp.ContactSettings",[]).controller("ContactController",["$scope","$state","appServices",function(e,t,a){a.showDialog({},{templateUrl:__globals.getTemplateURL("store.contact")},function(e){t.go("store_settings_edit")})}]).controller("ContactSettingsController",["__Form","appServices","$scope",function(a,o,e){var n=this;n.pageStatus=!1,n=a.setup(n,"form_contact_settings","editData",{secured:!0,modelUpdateWatcher:!1,unsecuredFields:["contact_address"]}),a.fetch({apiURL:"store.settings.edit.supportdata",formType:6}).success(function(e){var t=e.data;o.processResponse(e,null,function(){_.isEmpty(t.store_settings)||a.updateModel(n,t.store_settings),n.pageStatus=!0})}),n.submit=function(){a.process({apiURL:"store.settings.edit",formType:6},n).success(function(e){o.processResponse(e,null,function(){n.editData.logo_image="",1==e.data.showRealodButton&&__globals.showConfirmation({title:e.data.message,text:e.data.textMessage,type:"success",showCancelButton:!0,confirmButtonClass:"btn-success",confirmButtonText:__globals.getJSString("reload_text"),confirmButtonColor:"#337ab7",closeOnConfirm:!1},function(){location.reload()})})})},n.closeDialog=function(){e.closeThisDialog()}}])}(),function(){"use strict";angular.module("manageApp.SliderSettings",[]).controller("SliderListController",["__Form","appServices","__DataStore","$scope",function(e,o,n,t){var s=this;s.getSliderData=function(){n.fetch("store.settings.slider.read.list").success(function(a){o.processResponse(a,null,function(e){var t=a.data;s.sliderList=t.sliderDataCollection})})},s.getSliderData(),t.$on("alider_added_or_updated",function(e){e&&s.getSliderData()}),s.delete=function(e,t){var a=$("#lwSliderDeleteTextMsg");__globals.showConfirmation({html:__globals.getReplacedString(a,"__title__",_.unescape(t)),confirmButtonText:a.attr("data-delete-button-text")},function(){n.post({apiURL:"store.settings.slider.write.delete",sliderID:e,title:t}).success(function(e){var t=e.data.message;o.processResponse(e,{error:function(e){__globals.showConfirmation({title:a.attr("data-error-text"),text:t,type:"error"})}},function(e){__globals.showConfirmation({title:a.attr("data-success-text"),text:t,type:"success"}),s.getSliderData()})})})}}]).controller("SliderAddController",["$scope","__DataStore","appServices","FileUploader","__Utils","appNotify","$state","__Form",function(e,t,o,a,n,s,i,r){var l=this;l.showLoader=!0,(l=r.setup(l,"slider_add_form","sliderAddData",{secured:!0})).imagesSelectConfig=__globals.getSelectizeOptions({valueField:"name",labelField:"name",render:{item:function(e,t){return n.template("#imageListItemTemplate",e)},option:function(e,t){return n.template("#imageListItemImageTemplate",e)}},searchField:["name"]}),l.sliderAddData.auto_play=!0,l.sliderAddData.autoPlayTimeout=6;var c=document.getElementById("lw-slides-wrapper"),d=Sortable.create(c,{animation:150,handle:".lw-handle-div",onEnd:function(e){var t=d.toArray();_.map(t,function(e,t){l.sliderAddData.slides[e].orderIndex=parseInt(t)})}});l.images_count=0,l.getTempImagesMedia=function(){r.fetch("media.uploaded.images",{fresh:!0}).success(function(e){o.processResponse(e,null,function(){l.image_files=e.data.files,0<e.data.files.length&&(l.images_count=e.data.files.length)})})},l.getTempImagesMedia(),l.sliderAddData.slides=[{caption_1:"",caption_1_color:"ffffff",caption_2:"",caption_2_color:"ffffff",caption_3:"",bg_color:"282828",image:"",orderIndex:0}],l.addNewValue=function(){var e=_.last(l.sliderAddData.slides).orderIndex;l.sliderAddData.slides.push({caption_1:"",caption_1_color:"ffffff",caption_2:"",caption_2_color:"ffffff",caption_3:"",bg_color:"282828",image:"",orderIndex:e+1})},l.remove=function(a){!_.isEmpty(l.sliderAddData.slides)&&1<l.sliderAddData.slides.length&&_.remove(l.sliderAddData.slides,function(e,t){return a==t})};var p=l.uploader=new a({url:n.apiURL("media.upload.image"),autoUpload:!0,headers:{"X-XSRF-TOKEN":n.getXSRFToken()}});p.filters.push({name:"customFilter",fn:function(e,t){return this.queue.length<1e3}}),l.currentUploadedFileCount=0,l.loadingStatus=!1,p.onAfterAddingAll=function(){l.loadingStatus=!0,$("#lw-spinner-widget-"+l.newImageIndex).show(),$("#lwFileupload-"+l.newImageIndex).attr("disabled",!0),s.info(__globals.getJSString("loading_text"),{sticky:!0})},p.onBeforeUploadItem=function(e){l.loadingStatus=!0},p.onSuccessItem=function(e,t){$("#lw-spinner-widget-"+l.newImageIndex).hide(),$("#lwFileupload-"+l.newImageIndex).attr("disabled",!1),l.thumbnailURL=t.data.thumbnailURL,l.sliderAddData.slides[l.newImageIndex].thumbnailURL=t.data.thumbnailURL,l.imageFile=t.data.fileName,l.sliderAddData.slides[l.newImageIndex].image=l.imageFile,l.newImageIndex=null,o.processResponse(t,{error:function(){},otherError:function(e){3==e&&s.error(t.data.message,{sticky:!1})}},function(){l.currentUploadedFileCount++})},l.newImageIndex=null,l.addImages=function(e,t){l.newImageIndex=e},p.onCompleteAll=function(){l.loadingStatus=!1,0<l.currentUploadedFileCount&&s.success(l.currentUploadedFileCount+" "+__globals.getJSString("file_uploaded_text"),{sticky:!1}),l.getTempImagesMedia(),l.currentUploadedFileCount=0},l.submit=function(){r.process({apiURL:"store.settings.slider.write.addSlider",formType:16},l).success(function(a){o.processResponse(a,null,function(e){if(1==e){var t=a.data;i.go("slider_setting_edit",{sliderID:t.title})}})})}}]).controller("SliderEditController",["$scope","__DataStore","__Form","FileUploader","$state","appServices","__Utils","appNotify","$rootScope",function(e,t,a,o,n,s,i,r,l){var c=this;c.SliderId=n.params.sliderID,c.showLoader=!0,(c=a.setup(c,"slider_edit_form","sliderEditData",{secured:!0})).imagesSelectConfig=__globals.getSelectizeOptions({valueField:"name",labelField:"name",render:{item:function(e,t){return i.template("#imageListItemTemplate",e)},option:function(e,t){return i.template("#imageListOptionTemplate",e)}},searchField:["name"]});var d=document.getElementById("lw-slides-wrapper"),p=Sortable.create(d,{animation:150,handle:".lw-handle-div",onEnd:function(e){var t=p.toArray();_.map(t,function(e,t){c.sliderEditData.slides[e].orderIndex=parseInt(t)})}});c.images_count=0,c.getTempImagesMedia=function(){a.fetch("media.uploaded.images",{fresh:!0}).success(function(e){s.processResponse(e,null,function(){c.image_files=e.data.files,0<e.data.files.length&&(c.images_count=e.data.files.length)})})},c.getTempImagesMedia(),c.getSliderEditData=function(){t.fetch({apiURL:"store.settings.slider.read.update.data",sliderID:c.SliderId}).success(function(e){var t=e.data;s.processResponse(e,null,function(){c.sliderEditData=t.sliderCollection,c.sliderTitle=t.sliderTitle,c.showLoader=!1,c=a.updateModel(c,c.sliderEditData)})})},c.getSliderEditData(),c.addNewValue=function(){var e=0;_.isEmpty(c.sliderEditData.slides)||(e=_.last(c.sliderEditData.slides).orderIndex),c.sliderEditData.slides.push({caption_1:"",caption_1_color:"ffffff",caption_2:"",caption_2_color:"ffffff",caption_3:"",bg_color:"282828",image:"",orderIndex:e+1})},c.remove=function(a){(!_.isEmpty(c.sliderEditData.slides)||!_.isEmpty(c.sliderEditData.configuration)&&1<c.sliderEditData.slides.length||1<c.sliderEditData.configuration.length)&&(_.remove(c.sliderEditData.slides,function(e,t){return a==t}),_.remove(c.sliderEditData.configuration,function(e,t){return a==t}))};var u=c.uploader=new o({url:i.apiURL("media.upload.image"),autoUpload:!0,headers:{"X-XSRF-TOKEN":i.getXSRFToken()}});u.filters.push({name:"customFilter",fn:function(e,t){return this.queue.length<1e3}}),c.currentUploadedFileCount=0,c.loadingStatus=!1,u.onAfterAddingAll=function(){c.loadingStatus=!0,$("#lw-spinner-widget-"+c.newImageIndex).show(),$("#lwFileupload-"+c.newImageIndex).attr("disabled",!0),r.info(__globals.getJSString("loading_text"),{sticky:!0})},u.onBeforeUploadItem=function(e){c.loadingStatus=!0},u.onSuccessItem=function(e,t){$("#lw-spinner-widget-"+c.newImageIndex).hide(),$("#lwFileupload-"+c.newImageIndex).attr("disabled",!1),_.isEmpty(t.data.thumbnailURL)||(c.thumbnailURL=t.data.thumbnailURL),c.sliderEditData.slides[c.newImageIndex].thumbnailURL=t.data.thumbnailURL,c.sliderEditData.slides[c.newImageIndex].newImageExist=!0,c.sliderEditData.slides[c.newImageIndex].oldImageName=c.sliderEditData.slides[c.newImageIndex].image,c.imageFile=t.data.fileName,c.sliderEditData.slides[c.newImageIndex].image=c.imageFile,c.newImageIndex=null,s.processResponse(t,{error:function(){},otherError:function(e){3==e&&r.error(t.data.message,{sticky:!1})}},function(){c.currentUploadedFileCount++})},c.newImageIndex=null,c.addImages=function(e,t){c.newImageIndex=e},u.onCompleteAll=function(){c.loadingStatus=!1,0<c.currentUploadedFileCount&&r.success(c.currentUploadedFileCount+" "+__globals.getJSString("file_uploaded_text"),{sticky:!1}),c.getTempImagesMedia(),c.currentUploadedFileCount=0},c.submit=function(){a.process({apiURL:"store.settings.slider.write.update",sliderID:c.SliderId,formType:16},c).success(function(e){s.processResponse(e,null,function(){c.getSliderEditData()})})}}])}(),function(){"use strict";angular.module("manageApp.privacyPolicySettings",[]).controller("PrivacyPolicyController",["$scope","$state","appServices",function(e,t,a){a.showDialog({},{templateUrl:__globals.getTemplateURL("store.privacy-policy")},function(e){t.go("store_settings_edit")})}]).controller("PrivacyPolicySettingsController",["__Form","appServices","$scope",function(a,o,e){var n=this;n.pageStatus=!1,n=a.setup(n,"form_privacy_policy_settings","editData",{secured:!0,modelUpdateWatcher:!1,unsecuredFields:["privacy_policy"]}),a.fetch({apiURL:"store.settings.edit.supportdata",formType:8}).success(function(e){var t=e.data;o.processResponse(e,null,function(){_.isEmpty(t.store_settings)||a.updateModel(n,t.store_settings),n.pageStatus=!0})}),n.submit=function(){a.process({apiURL:"store.settings.edit",formType:8},n).success(function(e){o.processResponse(e,null,function(){1==e.data.showRealodButton&&__globals.showConfirmation({title:e.data.message,text:e.data.textMessage,type:"success",showCancelButton:!0,confirmButtonClass:"btn-success",confirmButtonText:__globals.getJSString("reload_text"),confirmButtonColor:"#337ab7",closeOnConfirm:!1},function(){location.reload()})})})},n.closeDialog=function(){e.closeThisDialog()}}])}(),function(){"use strict";angular.module("manageApp.landingPageSettings",[]).controller("LandingPageSettingController",["__Form","appServices","$scope","FileUploader","__Utils","appNotify",function(e,a,t,o,n,s){var i=this;i.pageStatus=!1,i.landingPageEditData=[],i.sliderIndex=null,i.pageContentIndex=null,i.latestProductIndex=null,i.featureProductIndex=null,i.popularPageIndex=null,i.banner1Index=null,i.banner2Index=null,i.productTabIndex=null,i.selectedItem=0,(i=e.setup(i,"form_landing_page_settings","editData",{secured:!0,modelUpdateWatcher:!1})).slider_option_config=__globals.getSelectizeOptions({valueField:"title",labelField:"title",searchField:["title"]}),i.productSelectConfig=__globals.getSelectizeOptions({valueField:"id",labelField:"name",searchField:["name"],plugins:["remove_button"],maxItems:1e3,delimiter:","}),i.home_page_select_config=__globals.getSelectizeOptions({valueField:"id",labelField:"name",searchField:["name"]});var r=i.uploader=new o({url:n.apiURL("media.upload.image"),autoUpload:!0,headers:{"X-XSRF-TOKEN":n.getXSRFToken()}});r.filters.push({name:"customFilter",fn:function(e,t){return this.queue.length<1e3}}),i.currentUploadedFileCount=0,i.loadingStatus=!1,r.onAfterAddingAll=function(){i.loadingStatus=!0,s.info(__globals.getJSString("loading_text"),{sticky:!0})},r.onBeforeUploadItem=function(e){i.loadingStatus=!0},r.onSuccessItem=function(e,t){i.thumbnailURL=t.data.thumbnailURL,i.imageFile=t.data.fileName,i.editData.landingPageData[i.newImageIndex][i.newImageItemThumb]=i.thumbnailURL,i.editData.landingPageData[i.newImageIndex][i.newImageItemName]=i.imageFile,i.newImageIndex=null,i.newImageItemThumb=null,i.newImageItemName=null,a.processResponse(t,{error:function(){},otherError:function(e){3==e&&s.error(t.data.message,{sticky:!1})}},function(){i.currentUploadedFileCount++})},i.newImageIndex=null,i.newImageItemThumb=null,i.newImageItemName=null,i.addImages=function(e,t,a){i.newImageIndex=e,i.newImageItemThumb=t,i.newImageItemName=a},r.onCompleteAll=function(){i.loadingStatus=!1,0<i.currentUploadedFileCount&&s.success(i.currentUploadedFileCount+" "+__globals.getJSString("file_uploaded_text"),{sticky:!1}),i.currentUploadedFileCount=0},i.showActiveTab=function(o){_.delay(function(){var e=i.editData.landingPageData[o].identity,t=$('#lwListTab span a[href="#'+e+'"]'),a=$(".list-group-item");_.forEach(a,function(e){$(e).removeClass("active")}),$(t[0]).tab("show")},500)},i.getLandingPageData=function(){e.fetch({apiURL:"store.settings.landing_page.edit.supportData",formType:18},{fresh:!0}).success(function(t){a.processResponse(t,null,function(){i.editData.landingPageData=[];var e=t.data;i.landingPageEditData=[],i.sliderList=e.sliderList,i.productList=e.productList,_.defer(function(){i.editData.landingPageData=e.landingPageEditData,_.forEach(i.editData.landingPageData,function(e){"Slider"==e.identity?i.sliderIndex=e.orderIndex:"PageContent"==e.identity?i.pageContentIndex=e.orderIndex:"latestProduct"==e.identity?i.latestProductIndex=e.orderIndex:"featuredProduct"==e.identity?i.featureProductIndex=e.orderIndex:"popularProduct"==e.identity?i.popularPageIndex=e.orderIndex:"bannerContent1"==e.identity?i.banner1Index=e.orderIndex:"bannerContent2"==e.identity?i.banner2Index=e.orderIndex:"productTabContent"==e.identity&&(i.productTabIndex=e.orderIndex)})}),i.homePageSetting=__globals.generateKeyValueItems(e.home_page_setting),i.editData.home_page=e.home_page,i.showActiveTab(i.selectedItem),i.pageStatus=!0})})},i.getLandingPageData(),i.prepareTitle=function(e){var t=e.replace(/([A-Z])/g," $1").trim();return t.charAt(0).toUpperCase()+t.slice(1)},i.showLandingPageTab=function(e,t){i.selectedItem=t,e.preventDefault();var a=$(".list-group-item");_.forEach(a,function(e){$(e).removeClass("active")})};var l=document.getElementById("lwListTab"),c=new Sortable(l,{animation:150,onEnd:function(e){var t=$(".list-group-item");_.forEach(t,function(e,t){$(e).hasClass("active")&&(i.selectedItem=t)}),_.delay(function(){var e=c.toArray();_.map(e,function(e,t){i.editData.landingPageData[e].orderIndex=parseInt(t)},1e3)})}});i.submit=function(){e.process({apiURL:"store.settings.landing_page.write.edit",formType:18},i).success(function(e){a.processResponse(e,null,function(){i.getLandingPageData()})})},i.closeDialog=function(){t.closeThisDialog()}}])}(),function(){"use strict";angular.module("manageApp.manageFooterSettings",[]).controller("ManageFooterSettingController",["__Form","appServices","$scope","__DataStore",function(a,n,e,t){var o=this;o.pageStatus=!1,(o=a.setup(o,"manage_footer_settings","editData",{secured:!0})).getFooterTemplateData=function(){a.fetch({apiURL:"store.settings.get.edit.footer_template.data",formType:17}).success(function(e){var t=e.data.footerTemplateData;n.processResponse(e,null,function(){o.footerViewData=t.public_footer_template,o.footerTemplateData=t,o.replaceString=t.replaceString,o.templateDataExist=t.templateDataExist,a.updateModel(o,t),o.pageStatus=!0})})},o.getFooterTemplateData(),e.$on("footer_template_added_or_updated",function(e){e&&o.getEmailTemplateData()}),o.resetFooterTemlate=function(){o.editData.public_footer_template=o.footerViewData},o.defaultEmailTemlate=function(e){var o=$("#lwTemlateDeleteConfirmTextMsg");__globals.showConfirmation({html:__globals.getReplacedString(o,"__title__",unescape(e)),confirmButtonText:o.attr("data-delete-button-text")},function(){t.post({apiURL:"store.settings.footer_template.delete",footerTemplateId:"public_footer_template"}).success(function(t){var a=t.data.message;n.processResponse(t,{error:function(e){__globals.showConfirmation({title:o.attr("data-success-text"),text:a,type:"error"})}},function(e){__globals.showConfirmation({title:t.data.message,text:t.data.textMessage,type:"success",showCancelButton:!0,confirmButtonClass:"btn-success",confirmButtonText:$("#lwReloadBtnText").attr("data-message"),confirmButtonColor:"#337ab7"},function(){location.reload()})})})})},new ClipboardJS(".lw-copy-action").on("success",function(e){$(e.trigger).attr("title","Copied!"),e.clearSelection()}),o.submit=function(){a.process({apiURL:"store.settings.footer_template.edit",formType:17,footerTemplateId:"public_footer_template"},o).success(function(e){n.processResponse(e,null,function(){__globals.showConfirmation({title:e.data.message,text:e.data.textMessage,type:"success",showCancelButton:!0,confirmButtonClass:"btn-success",confirmButtonText:$("#lwReloadBtnText").attr("data-message"),confirmButtonColor:"#337ab7"},function(){location.reload()})})})}}])}(),function(){"use strict";angular.module("manageApp.userSettings",[]).controller("UserSettingEditController",["$scope","$state","appServices",function(e,t,a){a.showDialog({},{templateUrl:__globals.getTemplateURL("store.user")},function(e){t.go("store_settings_edit")})}]).controller("userSettingsController",["__Form","appServices","$scope",function(a,o,e){var n=this;n.pageStatus=!1,(n=a.setup(n,"form_user_settings","editData",{secured:!0,modelUpdateWatcher:!1,unsecuredFields:["term_condition"]})).addRecaptchaKeys=function(e){n.editData.isRecaptchaKeyExist=!1},a.fetch({apiURL:"store.settings.edit.supportdata",formType:7}).success(function(e){var t=e.data;o.processResponse(e,null,function(){_.isEmpty(t.store_settings)||a.updateModel(n,t.store_settings),n.pageStatus=!0})}),n.submit=function(){a.process({apiURL:"store.settings.edit",formType:7},n).success(function(e){o.processResponse(e,null,function(){1==e.data.showRealodButton&&__globals.showConfirmation({title:e.data.message,text:e.data.textMessage,type:"success",showCancelButton:!0,confirmButtonClass:"btn-success",confirmButtonText:__globals.getJSString("reload_text"),confirmButtonColor:"#337ab7",closeOnConfirm:!1},function(){location.reload()})})})},n.closeDialog=function(){e.closeThisDialog()}}])}(),function(){"use strict";angular.module("manageApp.CssStyleSettings",[]).controller("CssStyleSettingsController",["$scope","__Form","appServices",function(e,a,o){var n=this;n.pageStatus=!1,n=a.setup(n,"edit_css_style_configuration","editData",{secured:!0,modelUpdateWatcher:!1,unsecuredFields:["custom_css"]});var t=document.getElementById("custom_css"),s=CodeMirror.fromTextArea(t,{lineNumbers:!0,mode:"css",readOnly:!1,autofocus:!0,lineWrapping:!0});a.fetch({apiURL:"store.settings.edit.supportdata",formType:9}).success(function(e){var t=e.data;o.processResponse(e,null,function(){var e=t.store_settings;a.updateModel(n,e),_.isEmpty(e.custom_css)||s.setValue(e.custom_css),_.defer(function(){s.setCursor({line:0,ch:0})})}),n.pageStatus=!0}),n.submit=function(){n.editData.custom_css=s.getValue(),a.process({apiURL:"store.settings.edit",formType:9},n).success(function(e){o.processResponse(e,null,function(){1==e.data.showRealodButton&&__globals.showConfirmation({title:e.data.message,text:e.data.textMessage,type:"success",showCancelButton:!0,confirmButtonClass:"btn-success",confirmButtonText:__globals.getJSString("reload_text"),confirmButtonColor:"#337ab7",closeOnConfirm:!1},function(){location.reload()})})})}}])}(),function(){"use strict";angular.module("manageApp.socialSettings",[]).controller("SocialController",["$scope","$state","appServices",function(e,t,a){a.showDialog({},{templateUrl:__globals.getTemplateURL("store.social")},function(e){t.go("store_settings_edit")})}]).controller("SocialSettingsController",["__Form","appServices","$scope",function(a,o,e){var n=this;n.pageStatus=!1,n=a.setup(n,"form_social_settings","editData",{secured:!0,modelUpdateWatcher:!1}),a.fetch({apiURL:"store.settings.edit.supportdata",formType:10}).success(function(e){var t=e.data;o.processResponse(e,null,function(){_.isEmpty(t.store_settings)||a.updateModel(n,t.store_settings),n.pageStatus=!0})}),n.submit=function(){a.process({apiURL:"store.settings.edit",formType:10},n).success(function(e){o.processResponse(e,null,function(){1==e.data.showRealodButton&&__globals.showConfirmation({title:e.data.message,text:e.data.textMessage,type:"success",showCancelButton:!0,confirmButtonClass:"btn-success",confirmButtonText:__globals.getJSString("reload_text"),confirmButtonColor:"#337ab7",closeOnConfirm:!1},function(){location.reload()})})})},n.closeDialog=function(){e.closeThisDialog()}}]).controller("SocialLoginController",["$scope","$state","appServices",function(e,t,a){a.showDialog({},{templateUrl:__globals.getTemplateURL("store.social-login")},function(e){t.go("store_settings_edit")})}]).controller("SocialLoginSetupSettingsController",["$scope","$state","__Form","appServices",function(e,t,a,o){var n=this;n.pageStatus=!1,n=a.setup(n,"edit_social_login_configuration","editData",{secured:!0}),a.fetch({apiURL:"store.settings.edit.supportdata",formType:11}).success(function(e){var t=e.data;o.processResponse(e,null,function(){_.isEmpty(t.store_settings)||a.updateModel(n,t.store_settings),n.pageStatus=!0})}),n.showDetails=function(e){1==e?n.editData.isFacebookKeyExist=!1:2==e?n.editData.isGoogleKeyExist=!1:3==e?n.editData.isTwitterKeyExist=!1:4==e&&(n.editData.isGithubKeyExist=!1)},n.submit=function(){a.process({apiURL:"store.settings.edit",formType:11},n).success(function(e){o.processResponse(e,null,function(){1==e.data.showRealodButton&&__globals.showConfirmation({title:e.data.message,text:e.data.textMessage,type:"success",showCancelButton:!0,confirmButtonClass:"btn-success",confirmButtonText:__globals.getJSString("reload_text"),confirmButtonColor:"#337ab7",closeOnConfirm:!1},function(){location.reload()})})})},n.closeDialog=function(){e.closeThisDialog()}}])}(),function(){"use strict";angular.module("manageApp.EmailTemplateSettings",[]).controller("EmailTemplateListController",["$scope","__Form","appServices","$http","__Utils",function(e,t,a,o,n){var s=this;t.fetch({apiURL:"store.settings.get.email-template.data"}).success(function(e){var t=e.data;a.processResponse(e,null,function(){s.emailTemplateData=t.emailTemplateData})})}]).controller("EmailTemplateEditController",["$scope","__Form","appServices","$http","__Utils","$stateParams","__DataStore","$rootScope",function(e,a,n,t,o,s,i,r){var l=this;l.pageStatus=!1;var c=s.emailTemplateId;(l=a.setup(l,"email_template_form","dynamicEmailData",{secured:!0})).getEmailTemplateData=function(){a.fetch({apiURL:"store.settings.get.edit.email-template.data",templateId:c}).success(function(e){var t=e.data.emailTemplateData;n.processResponse(e,null,function(){l.emailTemplateView=t.templateViewData,l.emailTemplateData=t,l.emailSubjectKey=t.emailSubjectKey,l.replaceString=t.replaceString,l.subjectExists=t.subjectExists,l.templateDataExist=t.templateDataExist,l.emailSubject=t.emailSubject,a.updateModel(l,t),l.pageStatus=!0})})},l.getEmailTemplateData(),e.$on("template_added_or_updated",function(e){e&&l.getEmailTemplateData()}),l.resetEmailTemlate=function(){l.dynamicEmailData.templateViewData=l.emailTemplateView;l.dynamicEmailData.templateViewData},l.useDefaultEmailSubject=function(e){!0===l.subjectExists&&i.post({apiURL:"store.settings.email_subject.delete",emaiSubjectId:e}).success(function(e){e.data.message;n.processResponse(e,{}),r.$broadcast("template_added_or_updated",!0)})},l.defaultEmailTemlate=function(e){var o=$("#lwTemlateDeleteConfirmTextMsg");__globals.showConfirmation({html:__globals.getReplacedString(o,"__title__",unescape(e)),confirmButtonText:o.attr("data-delete-button-text")},function(){i.post({apiURL:"store.settings.email_template.delete",emailTemplateId:c}).success(function(t){var a=t.data.message;n.processResponse(t,{error:function(e){__globals.showConfirmation({title:o.attr("data-success-text"),text:a,type:"error"})}},function(e){__globals.showConfirmation({title:t.data.message,text:t.data.textMessage,type:"success",showCancelButton:!0,confirmButtonClass:"btn-success",confirmButtonText:$("#lwReloadBtnText").attr("data-message"),confirmButtonColor:"#337ab7"},function(){location.reload()})})})})},new ClipboardJS(".lw-copy-action").on("success",function(e){$(e.trigger).attr("title","Copied!"),e.clearSelection()}),l.submit=function(){a.process({apiURL:"store.settings.email_template.edit",emailTemplateId:c},l).success(function(e){n.processResponse(e,null,function(){__globals.showConfirmation({title:e.data.message,text:e.data.textMessage,type:"success",showCancelButton:!0,confirmButtonClass:"btn-success",confirmButtonText:$("#lwReloadBtnText").attr("data-message"),confirmButtonColor:"#337ab7"},function(){location.reload()})})})}}])}(),function(){"use strict";angular.module("manageApp.emailSettings",[]).controller("EmailSettingEditController",["$scope","$state","appServices",function(e,t,a){a.showDialog({},{templateUrl:__globals.getTemplateURL("store.email")},function(e){t.go("store_settings_edit")})}]).controller("EmailSettingDialogController",["__Form","appServices","$scope",function(a,o,e){var n=this;n.pageStatus=!1,(n=a.setup(n,"form_email_settings","editData",{secured:!0,modelUpdateWatcher:!1,unsecuredFields:["append_email_message"]})).uiSwitch={size:"normal"},n.email_driver_config=__globals.getSelectizeOptions({valueField:"id",labelField:"name"}),a.fetch({apiURL:"store.settings.edit.supportdata",formType:15}).success(function(e){var t=e.data;o.processResponse(e,null,function(){n.maildrivers=t.store_settings.mail_drivers;var e=t.store_settings.mail_encryption_types;n.mail_encryption_types=[],_.forEach(e,function(e,t){n.mail_encryption_types.push({id:t,name:e})}),_.isEmpty(t.store_settings)||a.updateModel(n,t.store_settings),n.pageStatus=!0})}),n.submit=function(){a.process({apiURL:"store.settings.edit",formType:15},n).success(function(e){o.processResponse(e,null,function(){1==e.data.showRealodButton&&__globals.showConfirmation({title:e.data.message,text:e.data.textMessage,type:"success",showCancelButton:!0,confirmButtonClass:"btn-success",confirmButtonText:__globals.getJSString("reload_text"),confirmButtonColor:"#337ab7",closeOnConfirm:!1},function(){location.reload()})})})},n.closeDialog=function(){e.closeThisDialog()}}])}(),function(e,T){"use strict";T.module("ManageApp.payment",[]).controller("PaymentListController",["__Utils","__Form","$state","appServices","$scope","__DataStore",function(e,t,a,o,n,s){var i=this;(i=t.setup(i,"manage_payment_list","paymentData")).paymentData.duration=5;var r=moment().startOf("month").format("YYYY-MM-DD"),l=moment().endOf("month").format("YYYY-MM-DD"),c=moment().subtract(1,"months").startOf("month").format("YYYY-MM-DD"),d=moment().subtract(1,"months").endOf("month").format("YYYY-MM-DD"),p=moment().startOf("week").format("YYYY-MM-DD"),u=moment().endOf("week").format("YYYY-MM-DD"),g=moment().weekday(-7).format("YYYY-MM-DD"),m=moment().weekday(-1).format("YYYY-MM-DD"),f=moment().format("YYYY-MM-DD"),D=moment().subtract(1,"day").format("YYYY-MM-DD"),h=moment().subtract(1,"year").startOf("year").format("YYYY-MM-DD"),y=moment().subtract(1,"year").endOf("year").format("YYYY-MM-DD"),b=moment().startOf("year").format("YYYY-MM-DD"),S=moment().endOf("year").format("YYYY-MM-DD"),C=moment().subtract(30,"day").format("YYYY-MM-DD");f=moment().format("YYYY-MM-DD");i.paymentData.start=f,i.paymentData.end=f,i.startDateConfig={time:!1},i.endDateConfig={minDate:moment().format("YYYY-MM-DD"),time:!1},n.$watch("paymentListCtrl.paymentData.start",function(e,t){var a=T.element("#end");_.isEmpty(e)?a.bootstrapMaterialDatePicker("setMinDate",""):a.bootstrapMaterialDatePicker("setMinDate",e)}),i.startDateUpdated=function(e){i.paymentData.duration&&e!=r&&e!=c&&e!=p&&e!=g&&(i.paymentData.duration=7),i.paymentData.start=e},i.endDateUpdated=function(e){i.paymentData.duration&&e!=l&&e!=d&&e!=u&&e!=m&&(i.paymentData.duration=7),i.paymentData.start>i.paymentData.end&&(i.paymentData.end=e),i.paymentData.end=e};var v=[{name:"order_uid",orderable:!0,template:"#orderPaymentColumnUIDTemplate"},{name:"txn",orderable:!0,template:"#orderPaymentTransactionIDTemplate"},{name:"formattedFee",orderable:!0,template:"#orderPaymentFeeTemplate"},{name:"formattedPaymentOn",orderable:!0,template:"#creationDateColumnTemplate"},{name:"formattedPaymentMethod",orderable:!0},{name:"totalAmount",orderable:!0,template:"#orderPaymentTotalAmountTemplate"},{name:null,orderable:!(i.durationChange=function(e){if(e)switch(e){case 1:i.paymentData.start=r,i.paymentData.end=l;break;case 2:i.paymentData.start=c,i.paymentData.end=d;break;case 3:i.paymentData.start=p,i.paymentData.end=u;break;case 4:i.paymentData.start=g,i.paymentData.end=m;break;case 5:i.paymentData.start=f,i.paymentData.end=f;break;case 6:i.paymentData.start=D,i.paymentData.end=D;break;case 7:i.paymentData.start=h,i.paymentData.end=y;break;case 8:i.paymentData.start=b,i.paymentData.end=S;break;case 9:i.paymentData.start=C,i.paymentData.end=f}}),template:"#orderPaymentActionTemplate"}];i.getPaymentList=function(){i.orderPaymentsListDataTable&&i.orderPaymentsListDataTable.destroy(),i.orderPaymentsListDataTable=s.dataTable("#managePaymentList",{url:{apiURL:"manage.order.payment.list",startDate:i.paymentData.start,endDate:i.paymentData.end},dtOptions:{searching:!0,rowCallback:function(e,t,a){t.isTestOrder&&$(e).addClass("lw-sandbox-order")}},columnsData:v,scope:n},null,i.tableData=function(e){i.tableStatus=e.data,i.paymentDuration=__globals.generateKeyValueItems(e._options.duration),i.excelDownloadURL=e._options.excelDownloadURL,i.isEmptySanboxRecords=e._options.isEmptySanboxRecords})},i.getPaymentList(),i.orderDetailsDialog=function(e){s.fetch({apiURL:"manage.order.details.dialog",orderID:e}).success(function(t){o.processResponse(t,null,function(){var e=t.data;o.showDialog({orderDetails:e.orderDetails},{templateUrl:__globals.getTemplateURL("order.manage.details")},function(e){_.has(e.value,"order_updated")&&!0===e.value.order_updated&&i.reloadDT()})})})},i.paymentDetailsDialog=function(e){s.fetch({apiURL:"manage.order.payment.detail.dialog",orderPaymentID:e}).success(function(e){i.orderPaymentData=e.data,o.processResponse(e,null,function(){o.showDialog(i.orderPaymentData,{templateUrl:__globals.getTemplateURL("order.manage.payment-details-dialog")},function(e){})})})},i.deleteSandBoxOrder=function(e,t,a){2==a&&o.showDialog({paymentId:e,orderUid:t},{templateUrl:__globals.getTemplateURL("order.manage.payment-delete-dialog")},function(e){_.has(e.value,"payment_deleted")&&!0===e.value.payment_deleted&&i.getPaymentList()}),1==a&&__globals.showConfirmation({text:__globals.getJSString("delete_sandbox_payment_msg"),confirmButtonText:__globals.getJSString("delete_action_button_text")},function(){s.post({apiURL:"manage.order.payment.delete.sandbox",paymentId:e}).success(function(e){var t=e.data.message;o.processResponse(e,{error:function(){__globals.showConfirmation({title:__globals.getJSString("confirm_error_title"),text:t,type:"error"})}},function(){__globals.showConfirmation({title:__globals.getJSString("confirm_error_title"),text:t,type:"success"}),i.getPaymentList()})})})}}])}(window,window.angular),function(){"use strict";angular.module("ManageApp.orderList",[]).controller("ManageOrderListController",["$scope","__DataStore","appServices","$state","__Auth","$rootScope",function(a,o,n,t,e,s){var i=this;i.userInfo=e.authInfo().designation;var r=null;_.isEmpty(t.params.userID)||(r=t.params.userID);var l=[{name:"order_uid",orderable:!0,template:"#orderColumnIdTemplate"},{name:"fname",orderable:!0,template:"#userNameColumnIdTemplate"},{name:"status",orderable:!0,template:"#orderStatusColumnIdTemplate"},{name:"paymentStatus",orderable:!0,template:"#paymentActionColumnTemplate"},{name:"paymentMethod",template:"#orderPaymentMethodColumnIdTemplate"},{name:"creation_date",orderable:!0,template:"#orderColumnTimeTemplate"},{name:"total_amount",orderable:!0,template:"#orderColumnTotalAmountTemplate"},{name:null,template:"#orderActionColumnTemplate"}],c={active:{id:"activeTabList",route:"orders.active",status:1},cancelled:{id:"cancelledTabList",route:"orders.cancelled",status:3},completed:{id:"completedTabList",route:"orders.complete",status:6}};$("#adminOrderList a").click(function(e){e.preventDefault();var t=$(this).attr("aria-controls"),a=c[t];_.isEmpty(a)||($(this).tab("show"),i.getOrders(a.id,a.status))}),i.getOrders=function(e,t){i.cartOrderListDataTable&&i.cartOrderListDataTable.destroy(),i.cartOrderListDataTable=o.dataTable("#"+e,{url:{apiURL:"manage.order.list",status:t,"userID?":r},dtOptions:{searching:!0,order:[[5,"desc"]],columnDefs:[{targets:[1],visible:1===i.userInfo,searchable:!1}],rowCallback:function(e,t,a){t.isTestOrder&&$(e).addClass("lw-sandbox-order")}},columnsData:l,scope:a},null,i.userData=function(e){i.userFullName=e._options.userFullName,i.isEmptySanboxRecords=e._options.isEmptySanboxRecords,i.manageOrdersTitle=__ngSupport.getText(__globals.getJSString("manage_order_title"),{__name__:i.userFullName})})},_.defer(function(e){if("orders.active"==t.current.name)$('.nav li a[href="#active"]').triggerHandler("click",!0);else if("orders.cancelled"==t.current.name){$('.nav li a[href="#cancelled"]').triggerHandler("click",!0)}else if("orders.completed"==t.current.name){$('.nav li a[href="#completed"]').triggerHandler("click",!0)}},0),i.goToActiveTab=function(e){e.preventDefault(),t.go("orders.active",{userID:r})},i.goToCancelledTab=function(e){e.preventDefault(),t.go("orders.cancelled",{userID:r})},i.goToCompletedTab=function(e){e.preventDefault(),t.go("orders.completed",{userID:r})},i.reloadDT=function(){o.reloadDT(i.cartOrderListDataTable)},i.orderDetailsDialog=function(e){o.fetch({apiURL:"manage.order.details.dialog",orderID:e}).success(function(t){n.processResponse(t,null,function(){var e=t.data;n.showDialog({orderDetails:e.orderDetails},{templateUrl:__globals.getTemplateURL("order.manage.details")},function(e){_.has(e.value,"order_updated")&&!0===e.value.order_updated&&i.reloadDT()})})})},i.logDetailsDialog=function(e){o.fetch({apiURL:"manage.order.log.details.dialog",orderID:e}).success(function(t){n.processResponse(t,null,function(){var e=t.data;n.showDialog({order:e.cartOrder,orderLog:e.orderLog},{templateUrl:__globals.getTemplateURL("order.manage.log")},function(e){})})})},i.updateDialog=function(t,a){o.fetch({apiURL:"manage.order.update.support.data",orderID:t}).success(function(e){e.data;n.processResponse(e,null,function(){n.showDialog({order:e.data.order,orderID:t},{templateUrl:__globals.getTemplateURL("order.manage.update")},function(e){_.has(e.value,"order_updated")&&!0===e.value.order_updated&&(i.orderStatus=e.value.updateData.status,i.paymentStatus=e.value.updateData.paymentStatus,3==i.orderStatus&&2==i.paymentStatus&&i.showConfirmationOnOrderUpdate(t,a),i.reloadDT())})})})},i.showConfirmationOnOrderUpdate=function(t,a){__globals.showConfirmation({title:__globals.getJSString("order_refund_string"),text:__globals.getJSString("order_refund_change_status_string"),type:"success",confirmButtonClass:"btn-success",confirmButtonColor:"#337ab7",confirmButtonText:__globals.getJSString("order_payment_confirm_text")},function(e){i.reloadDT(),i.refundPaymentDialog(t,a)})},i.refundPaymentDialog=function(e,t){o.fetch({apiURL:"manage.order.payment.refund.detail.dialog",orderID:e}).success(function(e){e.data;n.processResponse(e,null,function(){n.showDialog({orderDetails:e.data,orderUID:t},{templateUrl:__globals.getTemplateURL("order.manage.refund-dialog")},function(e){_.has(e.value,"order_updated")&&!0===e.value.order_updated&&i.reloadDT()})})})},i.paymentDetailsDialog=function(e){o.fetch({apiURL:"manage.order.payment.detail.dialog",orderPaymentID:e}).success(function(e){i.orderPaymentData=e.data,n.processResponse(e,null,function(){n.showDialog(i.orderPaymentData,{templateUrl:__globals.getTemplateURL("order.manage.payment-details-dialog")},function(e){})})})},i.updatePaymentDetailsDialog=function(t){o.fetch({apiURL:"manage.order.payment.update.detail.dialog",orderID:t}).success(function(e){i.orderData=e.data,n.processResponse(e,null,function(){n.showDialog(i.orderData,{templateUrl:__globals.getTemplateURL("order.manage.update-payment-dialog")},function(e){_.has(e.value,"order_updated")&&!0===e.value.order_updated&&(__globals.showConfirmation({title:__globals.getJSString("order_payment_update_string"),text:__globals.getJSString("order_payment_change_status_string"),type:"success",confirmButtonClass:"btn-success",confirmButtonColor:"#337ab7",confirmButtonText:__globals.getJSString("order_payment_confirm_text")},function(e){i.reloadDT(),i.updateDialog(t)}),i.reloadDT())})})})},i.contactUserDialog=function(e){o.fetch({apiURL:"manage.order.get.user.details",orderID:e}).success(function(e){i.userData=e.data,n.processResponse(e,null,function(){n.showDialog(e.data,{templateUrl:__globals.getTemplateURL("order.manage.contact-user")},function(e){})})})},i.deleteSandBoxOrder=function(e,t,a){2==t&&n.showDialog({orderId:e,orderUid:a},{templateUrl:__globals.getTemplateURL("order.manage.order-delete-dialog")},function(e){_.has(e.value,"order_deleted")&&!0===e.value.order_deleted&&i.reloadDT()}),1==t&&__globals.showConfirmation({text:__globals.getJSString("delete_sandbox_order_msg"),confirmButtonText:__globals.getJSString("delete_action_button_text")},function(){o.post({apiURL:"manage.order.sandbox_order.delete",orderId:e,isTestOrder:1}).success(function(e){var t=e.data.message;n.processResponse(e,{error:function(){__globals.showConfirmation({title:__globals.getJSString("confirm_error_title"),text:t,type:"error"})}},function(){__globals.showConfirmation({title:__globals.getJSString("confirm_error_title"),text:t,type:"success"}),i.reloadDT()})})})}}])}(),function(){"use strict";angular.module("ManageApp.orderUpdate",[]).controller("ManageUpdateOrderController",["$scope","__Form","appServices",function(t,e,a){var o=this;(o=e.setup(o,"form_order_update","orderData")).ngDialogData=t.ngDialogData.order,o.orderData={statusName:o.ngDialogData.statusName,currentPaymentStatus:o.ngDialogData.currentPaymentStatus,checkMail:!0},o.statuses=o.ngDialogData.statusCode,o.updateDialogTitle=__ngSupport.getText(__globals.getJSString("update_order_dialog_title_text"),{__name__:o.ngDialogData.name,__orderUID__:o.ngDialogData.orderUID}),(o=e.updateModel(o,o.orderData)).update=function(){e.process({apiURL:"manage.order.update",orderID:o.ngDialogData._id},o).success(function(e){a.processResponse(e,function(e){1===e&&t.closeThisDialog({order_updated:!0,updateData:o.ngDialogData})})})},o.closeDialog=function(){t.closeThisDialog()}}])}(),function(){"use strict";angular.module("ManageApp.orderCancel",[]).controller("ManageCancelOrderController",["$scope","__Form","appServices",function(t,a,o){var n=this;(n=a.setup(n,"form_order_cancel","orderData")).ngDialogData=t.ngDialogData,(n=a.updateModel(n,n.orderData)).updateData={approveStatus:n.orderData,paymentStatus:n.ngDialogData.order.paymentStatus},n.update=function(e){n.orderData.approveStatus=e,a.process({apiURL:"manage.order.cancel",orderID:n.ngDialogData.order._id},n).success(function(e){o.processResponse(e,function(e){1===e&&t.closeThisDialog({order_updated:!0,orderStatus:n.updateData})})})},n.closeDialog=function(){t.closeThisDialog()}}])}(),function(){"use strict";angular.module("ManageApp.orderDialogList",[]).controller("ManageOrderDialogController",["$scope","__Form",function(e,t){var a=this;a.discountStatus=!1,(a=t.setup(a,"cart_order_dialog_form","cartData",{secured:!0})).ngDialogData=e.ngDialogData;var o=a.ngDialogData.orderDetails.data;a.billingAddress=o.address.billingAddress,a.shippingAddress=o.address.shippingAddress,a.sameAddress=o.address.sameAddress,a.user=o.user,a.order=o.order,a.orderProducts=o.orderProducts,a.coupon=o.coupon,a.taxes=o.taxes,a.shipping=o.shipping,a.pageStatus=!0,a.close=function(){e.closeThisDialog()}}])}(),function(){"use strict";angular.module("ManageApp.orderLogList",[]).controller("ManageOrderLogController",["$scope","__Form",function(e,t){var a=this;(a=t.setup(a,"cart_order_log_dialog_form","cartData",{secured:!0})).ngDialogData=e.ngDialogData,a.order=a.ngDialogData.order,a.orderLog=a.ngDialogData.orderLog,a.close=function(){e.closeThisDialog()}}])}(),function(){"use strict";angular.module("ManageApp.paymentDetailsDialog",[]).controller("ManagePaymentDetailsController",["$scope","appServices",function(e,t){var a=this;a.ngDialogData=e.ngDialogData,a.paymentDetail=a.ngDialogData.orderPaymentDetails,a.rawDataDialog=function(e){t.showDialog({rawDetail:e},{templateUrl:__globals.getTemplateURL("order.manage.raw-data-dialog")},function(e){})},a.closeDialog=function(){e.closeThisDialog()}}])}(),function(){"use strict";angular.module("ManageApp.rawDataDialog",[]).controller("ManageRawDataController",["$scope","appServices",function(e,t){var a=this;a.ngDialogData=e.ngDialogData,a.rawData=a.ngDialogData.rawDetail,a.isObject=function(e){return _.isObject(e)},a.closeDialog=function(){e.closeThisDialog()}}])}(),function(){"use strict";angular.module("ManageApp.orderPaymentUpdate",[]).controller("ManageUpdateOrderPaymentController",["$scope","__Form","appServices",function(t,e,a){var o=this;(o=e.setup(o,"form_order_payment_update","orderData")).ngDialogData=t.ngDialogData,o.orderDetails=o.ngDialogData.orderDetails,o.paymentMethodList=o.ngDialogData.paymentMethod,(o=e.updateModel(o,o.orderDetails)).update=function(){e.process({apiURL:"manage.order.payment.update.process",orderID:o.orderDetails.orderID},o).success(function(e){a.processResponse(e,null,function(){t.closeThisDialog({order_updated:!0})})})},o.closeDialog=function(){t.closeThisDialog()}}])}(),function(){"use strict";angular.module("ManageApp.orderPaymentRefund",[]).controller("ManageRefundOrderPaymentController",["$scope","__Form","appServices",function(t,e,a){var o=this;(o=e.setup(o,"form_order_payment_refund","orderData")).ngDialogData=t.ngDialogData,o.paymentDetails=o.ngDialogData.orderDetails.orderPaymentDetails,o.paymentMethodList=o.ngDialogData.orderDetails.paymentMethodList,o.paymentDetails.orderUID=o.ngDialogData.orderUID,(o=e.updateModel(o,o.paymentDetails)).update=function(){e.process({apiURL:"manage.order.payment.refund.process",orderID:o.paymentDetails.orderID},o).success(function(e){a.processResponse(e,null,function(){t.closeThisDialog({order_updated:!0})})})},o.closeDialog=function(){t.closeThisDialog()}}])}(),function(){"use strict";angular.module("ManageApp.orderContact",[]).controller("ManageContactUserController",["__Form","appServices","$scope",function(e,t,a){var o=this;(o=e.setup(o,"manage_contact_form","userData")).ngDialogData=a.ngDialogData,o.userData.fullName=o.ngDialogData.fullname,o.userData.email=o.ngDialogData.email,o.userData.id=o.ngDialogData.id,o.userData.orderUID=o.ngDialogData.orderUID,(o=e.updateModel(o,o.userData)).submit=function(){e.process("manage.order.user.contact",o).success(function(e){t.processResponse(e,null,function(){a.closeThisDialog()})})},o.closeDialog=function(){a.closeThisDialog()}}])}(),function(){"use strict";angular.module("ManageApp.orderDelete",[]).controller("ManageOrderDeleteController",["$scope","__Form","appServices","$state","__Auth","$rootScope",function(t,e,a,o,n,s){var i=this;(i=e.setup(i,"form_manage_order_delete","orderData",{secured:!0})).ngDialogData=t.ngDialogData,i.orderUid=i.ngDialogData.orderUid,i.submit=function(){e.process({apiURL:"manage.order.delete",orderId:i.ngDialogData.orderId},i).success(function(e){a.processResponse(e,null,function(){t.closeThisDialog({order_deleted:!0})})})},i.closeDialog=function(){t.closeThisDialog()}}])}(),function(){"use strict";angular.module("ManageApp.paymentDelete",[]).controller("ManagePaymentDeleteController",["$scope","__Form","appServices","$state","__Auth","$rootScope",function(t,e,a,o,n,s){var i=this;(i=e.setup(i,"form_manage_payment_delete","paymentData",{secured:!0})).ngDialogData=t.ngDialogData,i.orderUid=i.ngDialogData.orderUid,i.submit=function(){e.process({apiURL:"manage.order.payment.delete",paymentId:i.ngDialogData.paymentId},i).success(function(e){a.processResponse(e,null,function(){t.closeThisDialog({payment_deleted:!0})})})},i.closeDialog=function(){t.closeThisDialog()}}])}(),function(){"use strict";angular.module("DashboardApp.main",[]).controller("DashboardController",["$scope","appServices","__DataStore","$rootScope","__Form",function(e,s,t,i,a){var r=this,l=null;r.pageStatus=!1,r.duration=5,(r=a.setup(r,"dashboard_form","dashboardFilterData")).monthFirstDay=moment().startOf("month").format("YYYY-MM-DD"),r.monthLastDay=moment().endOf("month").format("YYYY-MM-DD"),r.lastMonthFirstDay=moment().subtract(1,"months").startOf("month").format("YYYY-MM-DD"),r.lastMonthLastDay=moment().subtract(1,"months").endOf("month").format("YYYY-MM-DD"),r.currentWeekFirstDay=moment().startOf("week").format("YYYY-MM-DD"),r.currentWeekLastDay=moment().endOf("week").format("YYYY-MM-DD"),r.lastWeekFirstDay=moment().weekday(-7).format("YYYY-MM-DD"),r.lastWeekLastDay=moment().weekday(-1).format("YYYY-MM-DD"),r.today=moment().format("YYYY-MM-DD"),r.yesterday=moment().subtract(1,"day").format("YYYY-MM-DD"),r.lastYearFirstDay=moment().subtract(1,"year").startOf("year").format("YYYY-MM-DD"),r.lastYearLastDay=moment().subtract(1,"year").endOf("year").format("YYYY-MM-DD"),r.currentYearFirstDay=moment().startOf("year").format("YYYY-MM-DD"),r.currentYearLastDay=moment().endOf("year").format("YYYY-MM-DD"),r.last30Days=moment().subtract(30,"day").format("YYYY-MM-DD");var o=moment().format("YYYY-MM-DD");r.dashboardFilterData.start=o,r.dashboardFilterData.end=o,r.durationChange=function(e){1==e?(r.dashboardFilterData.start=r.monthFirstDay,r.dashboardFilterData.end=r.monthLastDay):2==e?(r.dashboardFilterData.start=r.currentWeekFirstDay,r.dashboardFilterData.end=r.currentWeekLastDay):3==e?(r.dashboardFilterData.start=r.today,r.dashboardFilterData.end=r.today):4==e?(r.dashboardFilterData.start=r.lastYearFirstDay,r.dashboardFilterData.end=r.lastYearLastDay):5==e?(r.dashboardFilterData.start=r.currentYearFirstDay,r.dashboardFilterData.end=r.currentYearLastDay):6==e&&(r.dashboardFilterData.start=r.last30Days,r.dashboardFilterData.end=r.today)},r.durationChange(r.duration),r.getDashboardData=function(){_.isEmpty(l)||l.destroy(),t.fetch({apiURL:"manage.dashboard.count_support_data",startDate:r.dashboardFilterData.start,endDate:r.dashboardFilterData.end,durationType:r.duration},{fresh:!0}).success(function(n){s.processResponse(n,null,function(){var e=n.data.dashboard;if(r.orders=e.orders,r.latestProductsRating=e.latestProductsRating,r.latestSaleProducts=e.latestSaleProducts,r.totalCategories=e.totalCategories,r.dashboardDuration=__globals.generateKeyValueItems(e.duration),r.orderChartData=r.orders.orderChartData,r.currentCoupons=e.currentCoupans.currentActiveCoupan,r.products=e.products,r.brands=e.brands,i.canAccess("manage.product.list")){var t=document.getElementById("lw-product-chart");s.createBarChart({elementId:t,type:"pie"},{data:r.products.productChartData,labels:r.products.productChartLabels},{options:{responsive:!0,legend:{onClick:function(e){e.stopPropagation()}}}})}if(i.canAccess("manage.brand.list")){var a=document.getElementById("lw-brand-chart");s.createBarChart({elementId:a,type:"pie"},{data:r.brands.brandChartData,labels:r.brands.brandChartLabels},{options:{responsive:!0,legend:{onClick:function(e){e.stopPropagation()}}}})}if(i.canAccess("manage.order.list")){var o=document.getElementById("lw-order-chart");l=s.createBarChart({elementId:o,type:"pie"},{data:r.orderChartData.orderData,labels:r.orderChartData.orderStatusLabel},{options:{responsive:!0,legend:{onClick:function(e){e.stopPropagation()}}}})}})})},r.getDashboardData()}])}(),function(){"use strict";angular.module("ManageApp.coupon",[]).controller("CouponListController",["$scope","__DataStore","appServices","$state",function(a,o,n,s){var i=this,r=[{name:"title",orderable:!0,template:"#titleColumnTemplate"},{name:"code",orderable:!0},{name:"start_date",orderable:!0,template:"#startDateColumnTemplate"},{name:"end_date",orderable:!0,template:"#endDateColumnTemplate"},{name:"status",orderable:!0,template:"#statusColumnTemplate"},{name:null,template:"#columnActionTemplate"}],l={current:{id:"currentCoupon",route:"coupons.current",status:1},expired:{id:"expiredCoupon",route:"coupons.expired",status:2},upcoming:{id:"upcomingCoupon",route:"coupons.upcoming",status:3}};$("#manageCouponList a").click(function(e){e.preventDefault();var t=$(this).attr("aria-controls"),a=l[t];_.isEmpty(a)||($(this).tab("show"),i.getCouponsList(a.id,a.status))}),i.getCouponsList=function(e,t){i.couponsListDataTable&&i.couponsListDataTable.destroy(),i.couponsListDataTable=o.dataTable("#"+e,{url:{apiURL:"manage.coupon.list",status:t},dtOptions:{searching:!0,order:[[1,"asc"]]},columnsData:r,scope:a})},_.defer(function(e){if("coupons.current"==s.current.name)$('.nav li a[href="#current"]').triggerHandler("click",!0);else if("coupons.expired"==s.current.name){$('.nav li a[href="#expired"]').triggerHandler("click",!0)}else if("coupons.upcoming"==s.current.name){$('.nav li a[href="#upcoming"]').triggerHandler("click",!0)}},0),i.tabClick=function(e,t){e.preventDefault(),s.go(t)},i.detailDialog=function(e){o.fetch({apiURL:"manage.coupon.detailSupportData",couponID:e}).success(function(e){var t=e.data;n.processResponse(e,null,function(){n.showDialog(t,{templateUrl:__globals.getTemplateURL("coupon.manage.detail-dialog")},function(e){})})})},i.reloadDT=function(){o.reloadDT(i.couponsListDataTable)},i.delete=function(e,t){__globals.showConfirmation({text:__ngSupport.getText(__globals.getJSString("coupon_delete_text"),{__name__:unescape(t)}),confirmButtonText:__globals.getJSString("delete_action_button_text")},function(){o.post({apiURL:"manage.coupon.delete",couponID:e}).success(function(e){var t=e.data.message;n.processResponse(e,{error:function(e){__globals.showConfirmation({title:__globals.getJSString("confirm_error_title"),text:t,type:"error"})}},function(e){__globals.showConfirmation({title:__globals.getJSString("confirm_error_title"),text:t,type:"success"}),i.reloadDT()})})})},i.openCouponDialog=function(){o.fetch("manage.coupon.fetch.couponDiscountType").success(function(e){var t=e.data;n.showDialog(t,{templateUrl:__globals.getTemplateURL("coupon.manage.add-dialog")},function(e){_.has(e.value,"coupon_added")&&!0===e.value.coupon_added&&i.reloadDT()})})},i.openEditCouponDialog=function(e){o.fetch({apiURL:"manage.coupon.editSupportData",couponID:e}).success(function(e){var t=e.data;t.start=moment(t.start).format("YYYY-MM-DD HH:mm:ss"),t.end=moment(t.end).format("YYYY-MM-DD HH:mm:ss"),n.showDialog(t,{templateUrl:__globals.getTemplateURL("coupon.manage.edit-dialog")},function(e){_.has(e.value,"coupon_updated")&&!0===e.value.coupon_updated&&i.reloadDT()})})}}]).controller("CouponDetailDialogController",["$scope","__DataStore","appServices","$state",function(e,t,a,o){this.ngDialogData=e.ngDialogData,this.couponDate=this.ngDialogData,this.closeDialog=function(){e.closeThisDialog()}}]).controller("CouponAddController",["$scope","__Form","appServices","$state","__DataStore",function(t,e,a,o,n){var s=this;s.ngDialogData=t.ngDialogData,s.productCouponData=[],s.couponDetails=[],s.product_select_config=__globals.getSelectizeOptions({maxItems:1e3,searchField:["name","id"],plugins:["remove_button"]}),(s=e.setup(s,"manage_coupon_add","couponData",{secured:!1})).discountType=s.ngDialogData.discountType,s.productDiscountTypes=s.ngDialogData.productDiscountTypes,s.products=s.ngDialogData.products,s.couponData.amountSymbol=s.ngDialogData.currencySymbol,s.couponData.currency=s.ngDialogData.currency,s.couponData.discount_type=2,s.couponData.active=!0;var i=moment().format("YYYY-MM-DD HH:mm:ss");s.couponData.getClientTimeZone=Intl.DateTimeFormat().resolvedOptions().timeZone,s.couponData.start=i,s.couponData.end=i,s.startDateConfig={minDate:moment().format("YYYY-MM-DD HH:mm:ss")},s.endDateConfig={minDate:moment().format("YYYY-MM-DD HH:mm:ss"),clearButton:!0},t.$watch("couponAddCtrl.couponData.start",function(e,t){var a=angular.element("#end");_.isEmpty(e)?a.bootstrapMaterialDatePicker("setMinDate",i):a.bootstrapMaterialDatePicker("setMinDate",e)}),s.formatDateTime=function(e){return moment(e).format("Do MMMM YYYY h:mm:ss a")},s.setNumberFieldValidation=function(e){e=e?e.toString():"";_.includes(e,".")?s.manage_coupon_add.uses_per_user.$setValidity("number",!1):s.manage_coupon_add.uses_per_user.$setValidity("number",!0)},s.clearTextField=function(e){1==e?s.couponData.uses_per_user="":(s.couponData.code="",s.couponData.uses_per_user="",1==s.couponData.user_per_usage&&_.defer(function(){$(".lw-switchery-change").trigger("click")}))},s.endDateUpdated=function(e){s.couponData.start>s.couponData.end&&(s.couponData.end=e)},s.submit=function(){e.process("manage.coupon.add",s).success(function(e){a.processResponse(e,null,function(e){t.closeThisDialog({coupon_added:!0})})})},s.closeDialog=function(){t.closeThisDialog()}}]).controller("CouponEditController",["$scope","__Form","appServices","$state","__DataStore",function(t,e,a,o,n){var s=this,i=t.ngDialogData;s.productCouponData=[],s.couponDetails=[],s.product_select_config=__globals.getSelectizeOptions({maxItems:1e3,searchField:["name","id"],plugins:["remove_button"]}),s.updateURL={apiURL:"manage.coupon.edit.process",couponID:i.couponData._id},s=e.setup(s,"manage_coupon_edit","couponData"),(s=e.updateModel(s,t.ngDialogData.couponData)).productDiscountTypes=i.configItems.productDiscountTypes,s.products=i.configItems.products,s.discountType=i.configItems.discountType,s.couponData.amountSymbol=i.configItems.currencySymbol,s.couponData.currency=i.configItems.currency,s.startDateConfig={minDate:moment().format("YYYY-MM-DD HH:mm:ss")},s.endDateConfig={minDate:moment().format("YYYY-MM-DD HH:mm:ss"),clearButton:!0},s.couponData.getClientTimeZone=Intl.DateTimeFormat().resolvedOptions().timeZone,t.$watch("couponEditCtrl.couponData.end",function(e,t){var a=angular.element("#end");_.isEmpty(e)?a.bootstrapMaterialDatePicker("setMinDate",s.couponData.start):a.bootstrapMaterialDatePicker("setMinDate",e)}),s.endDateUpdated=function(e){s.couponData.start>s.couponData.end&&(s.couponData.end=e),_.isEmpty(s.couponData.end)&&angular.element("#end").bootstrapMaterialDatePicker("setMinDate",s.couponData.start)},s.clearTextField=function(e){1==e?s.couponData.uses_per_user="":(s.couponData.code="",s.couponData.uses_per_user="",1==s.couponData.user_per_usage&&_.defer(function(){$(".lw-switchery-change").trigger("click")}))},s.formatDateTime=function(e){return moment(e).format("Do MMMM YYYY h:mm:ss a")},s.submit=function(){e.process(s.updateURL,s).success(function(e){a.processResponse(e,null,function(){t.closeThisDialog({coupon_updated:!0})})})},s.closeDialog=function(){t.closeThisDialog()}}])}(),function(){"use strict";angular.module("ManageApp.shipping",[]).controller("ShippingListController",["$scope","__DataStore","appServices","__Form",function(t,a,o,n){var s=this,i=[{name:"name",orderable:!0,template:"#countryColumnTemplate"},{name:"type",orderable:!0,template:"#typeColumnTemplate"},{name:"charges",orderable:!0,template:"#chargesColumnTemplate"},{name:"shippingTypeTitle",orderable:!0},{name:"creation_date",orderable:!0,template:"#creationDateColumnTemplate"},{name:"status",orderable:!0,template:"#statusColumnTemplate"},{name:null,template:"#columnActionTemplate"}],r={specificCountry:{id:"manageShippingList"},allOtherCountries:{id:"allOtherCountriesTabList"}};$("#manageShippingTab a").click(function(e){e.preventDefault();var t=$(this).attr("aria-controls"),a=r[t];_.isEmpty(a)||($(this).tab("show"),s.getShipping(a.id))}),s.getShipping=function(e){s.shippingListDataTable=a.dataTable("#"+e,{url:"manage.shipping.list",dtOptions:{searching:!0,order:[[1,"asc"]]},columnsData:i,scope:t})},$('.nav li a[href="#specificCountry"]').triggerHandler("click",!0),s.reloadDT=function(){a.reloadDT(s.shippingListDataTable)},s.detailDialog=function(e){a.fetch({apiURL:"manage.shipping.detailSupportData",shippingID:e}).success(function(e){var t=e.data;o.processResponse(e,null,function(){o.showDialog(t,{templateUrl:__globals.getTemplateURL("shipping.manage.detail-dialog")},function(e){})})})},s.delete=function(e,t){__globals.showConfirmation({text:__ngSupport.getText(__globals.getJSString("shipping_delete_text"),{__country__:t}),confirmButtonText:__globals.getJSString("delete_action_button_text")},function(){a.post({apiURL:"manage.shipping.delete",shippingID:e}).success(function(e){var t=e.data.message;o.processResponse(e,{error:function(e){__globals.showConfirmation({title:__globals.getJSString("confirm_error_title"),text:t,type:"error"})}},function(e){__globals.showConfirmation({title:__globals.getJSString("confirm_error_title"),text:t,type:"success"}),s.reloadDT()})})})},s=n.setup(s,"manage_aoc_edit","shippingData"),a.fetch("manage.shipping.aoc.editSupportData").success(function(t){o.processResponse(t,null,function(){var e=t.data;s.shippingType=e.configItems.shippingType,s.currencySymbol=e.configItems.storeCurrencySymbol,s.currency=e.configItems.currency,s=n.updateModel(s,e.shipping)})}),s.submit=function(){n.process("manage.shipping.aoc.update",s).success(function(e){o.processResponse(e,null,function(){})})}}]).controller("ShippingDetailController",["$scope","__DataStore","appServices","$state",function(e,t,a,o){var n=this;n.ngDialogData=e.ngDialogData,n.currencySymbol=n.ngDialogData.currencySymbol,n.shippingDetail=n.ngDialogData.shippingData,n.closeDialog=function(){e.closeThisDialog()}}]).controller("ShippingAddDialogController",["$scope","__DataStore","appServices","$state",function(a,e,o,n){e.fetch("manage.shipping.fetch.contries").success(function(e){var t=e.data;o.showDialog(t,{templateUrl:__globals.getTemplateURL("shipping.manage.add-dialog")},function(e){_.has(e.value,"goToManageShippingType")&&n.go("shippingType"),_.has(e.value,"shipping_added")&&!0===e.value.shipping_added&&!_.has(e.value,"goToManageShippingType")&&a.$parent.shippingListCtrl.reloadDT(),_.has(e.value,"goToManageShippingType")||n.go("shippings")})})}]).controller("ShippingAddController",["$scope","__Form","appServices","$state",function(t,e,a,o){var n=this,s=t.ngDialogData;(n=e.setup(n,"manage_shipping_add","shippingData")).countries_select_config=__globals.getSelectizeOptions({valueField:"value",labelField:"text",searchField:["text"]}),n.shipping_type_select_config=__globals.getSelectizeOptions({valueField:"_id",labelField:"title",searchField:["title"]}),n.countries=s.countries,n.shippingTypeList=s.shippingTypeList,n.shippingType=s.shippingType,n.shippingData.active=!0,n.shippingData.type=1,n.freeAfterAmount=!0,n.charges=!0,n.amountCap=!1,n.currencySymbol=s.currencySymbol,n.currency=s.currency,n.goToShippingType=function(){t.closeThisDialog({goToManageShippingType:!0})},n.onChangeType=function(e){s.shippingType;1==e?(n.freeAfterAmount=!0,n.charges=!0,n.amountCap=!1):2==e?(n.freeAfterAmount=!1,n.charges=!0,n.amountCap=!0):3!=e&&4!=e||(n.freeAfterAmount=!1,n.charges=!1,n.amountCap=!1)},n.submit=function(){e.process("manage.shipping.add",n).success(function(e){a.processResponse(e,null,function(){t.closeThisDialog({shipping_added:!0})})})},n.closeDialog=function(){t.closeThisDialog()}}]).controller("ShippingEditDialogController",["$scope","__DataStore","appServices","$state",function(o,e,n,s){e.fetch({apiURL:"manage.shipping.editSupportData",shippingID:s.params.shippingID}).success(function(a){n.processResponse(a,null,function(e){var t=a.data;n.showDialog(t,{templateUrl:__globals.getTemplateURL("shipping.manage.edit-dialog")},function(e){_.has(e.value,"goToManageShippingType")&&s.go("shippingType"),_.has(e.value,"shipping_updated")&&!0===e.value.shipping_updated&&o.$parent.shippingListCtrl.reloadDT(),_.has(e.value,"goToManageShippingType")||s.go("shippings")})})})}]).controller("ShippingEditController",["$scope","__Form","appServices","$state",function(t,e,a,o){var n=this,s=t.ngDialogData;n.updateURL={apiURL:"manage.shipping.edit.process",shippingID:o.params.shippingID},(n=e.setup(n,"manage_shipping_edit","shippingData")).shipping_type_select_config=__globals.getSelectizeOptions({valueField:"_id",labelField:"title",searchField:["title"]}),n.shippingData=s,n.shippingTypeList=s.shippingTypeList,n.discountType=s.shippingType,n.shippingData=s.shippingData,n.currencySymbol=s.currencySymbol,n.currency=s.currency,n.goToShippingType=function(){t.closeThisDialog({goToManageShippingType:!0})},(n=e.updateModel(n,n.shippingData)).submit=function(){e.process(n.updateURL,n).success(function(e){a.processResponse(e,null,function(){t.closeThisDialog({shipping_updated:!0})})})},n.closeDialog=function(){t.closeThisDialog()}}])}(),function(){"use strict";angular.module("ManageApp.tax",[]).controller("TaxListController",["$scope","__DataStore","appServices",function(e,t,a){var o=this;o.taxListDataTable=t.dataTable("#manageTaxList",{url:"manage.tax.list",dtOptions:{searching:!0,order:[[0,"asc"]]},columnsData:[{name:"label",orderable:!0,template:"#labelColumnTemplate"},{name:"name",orderable:!0,template:"#countryColumnTemplate"},{name:"type",orderable:!0,template:"#typeColumnTemplate"},{name:"applicable_tax",orderable:!0,template:"#applicableTaxColumnTemplate"},{name:"creation_date",orderable:!0,template:"#creationDateColumnTemplate"},{name:"status",orderable:!0,template:"#statusColumnTemplate"},{name:null,template:"#columnActionTemplate"}],scope:e}),o.reloadDT=function(){t.reloadDT(o.taxListDataTable)},o.detailDialog=function(e){t.fetch({apiURL:"manage.tax.detailSupportData",taxID:e}).success(function(e){var t=e.data;a.processResponse(e,null,function(){a.showDialog(t,{templateUrl:__globals.getTemplateURL("tax.manage.detail-dialog")},function(e){})})})},o.taxSettingDialog=function(){a.showDialog({},{templateUrl:__globals.getTemplateURL("tax.manage.setting-dialog")},function(e){})},o.delete=function(e){__globals.showConfirmation({text:__globals.getJSString("tax_delete_text"),confirmButtonText:__globals.getJSString("delete_action_button_text")},function(){t.post({apiURL:"manage.tax.delete",taxID:e}).success(function(e){var t=e.data.message;a.processResponse(e,{error:function(e){__globals.showConfirmation({title:__globals.getJSString("confirm_error_title"),text:t,type:"error"})}},function(e){__globals.showConfirmation({title:__globals.getJSString("confirm_error_title"),text:t,type:"success"}),o.reloadDT()})})})}}]).controller("TaxDetailController",["$scope","__DataStore","appServices",function(e,t,a){var o=this;o.ngDialogData=e.ngDialogData,o.currencySymbol=o.ngDialogData.currencySymbol,o.taxData=o.ngDialogData.taxData,o.closeDialog=function(){e.closeThisDialog()}}]).controller("TaxAddDialogController",["$scope","__DataStore","appServices","$state",function(a,e,o,n){e.fetch("manage.tax.fetch.contries").success(function(e){var t=e.data;o.showDialog(t,{templateUrl:__globals.getTemplateURL("tax.manage.add-dialog")},function(e){_.has(e.value,"tax_added")&&1==e.value.tax_added&&a.$parent.taxListCtrl.reloadDT(),n.go("taxes")})})}]).controller("TaxAddController",["$scope","__Form","appServices","$state",function(t,e,a,o){var n=this,s=t.ngDialogData;(n=e.setup(n,"manage_tax_add","taxData")).countries_select_config=__globals.getSelectizeOptions({valueField:"value",labelField:"text",searchField:["text"]}),n.countries=s.countries,n.taxType=__globals.generateKeyValueItems(s.taxType),n.taxData.active=!0,n.taxData.type=1,n.currencySymbol=s.currencySymbol,n.currency=s.currency,n.submit=function(){e.process("manage.tax.add",n).success(function(e){a.processResponse(e,null,function(){t.closeThisDialog({tax_added:!0})})})},n.closeDialog=function(){t.closeThisDialog()}}]).controller("TaxEditDialogController",["$scope","__DataStore","appServices","$state",function(o,e,n,s){e.fetch({apiURL:"manage.tax.editSupportData",taxID:s.params.taxID}).success(function(a){n.processResponse(a,null,function(e){var t=a.data;n.showDialog(t,{templateUrl:__globals.getTemplateURL("tax.manage.edit-dialog")},function(e){_.has(e.value,"tax_updated")&&!0===e.value.tax_updated&&o.$parent.taxListCtrl.reloadDT(),s.go("taxes")})})})}]).controller("TaxEditController",["$scope","__Form","appServices","$state",function(t,e,a,o){var n=this,s=t.ngDialogData;n.updateURL={apiURL:"manage.tax.edit.process",taxID:o.params.taxID},(n=e.setup(n,"manage_tax_edit","taxData")).countries_select_config=__globals.getSelectizeOptions({valueField:"value",labelField:"text",searchField:["text"]}),n.countries=s.countries.data.countries,(n=e.updateModel(n,t.ngDialogData)).taxType=__globals.generateKeyValueItems(s.taxType),n.taxData=s.taxData,n.currencySymbol=s.currencySymbol,n.currency=s.currency,n.submit=function(){e.process(n.updateURL,n).success(function(e){a.processResponse(e,null,function(){t.closeThisDialog({tax_updated:!0})})})},n.closeDialog=function(){t.closeThisDialog()}}])}(),function(e,m){"use strict";m.module("ManageApp.report",[]).controller("ReportController",["__Utils","__Form","$state","appServices","$rootScope","$scope","__DataStore",function(e,t,a,o,n,s,i){var r=this,l=null,c=null,d=null,p=a.current.name;(r=t.setup(r,"manage_report_list","reportData")).reportData.status=1,r.reportData.paymentStatus=2,r.reportData.order=1,r.duration=8,r.dateConfig={format:"YYYY-MM-DD",time:!1},r.monthFirstDay=moment().startOf("month").format("YYYY-MM-DD"),r.monthLastDay=moment().endOf("month").format("YYYY-MM-DD"),r.lastMonthFirstDay=moment().subtract(1,"months").startOf("month").format("YYYY-MM-DD"),r.lastMonthLastDay=moment().subtract(1,"months").endOf("month").format("YYYY-MM-DD"),r.currentWeekFirstDay=moment().startOf("week").format("YYYY-MM-DD"),r.currentWeekLastDay=moment().endOf("week").format("YYYY-MM-DD"),r.lastWeekFirstDay=moment().weekday(-7).format("YYYY-MM-DD"),r.lastWeekLastDay=moment().weekday(-1).format("YYYY-MM-DD"),r.today=moment().format("YYYY-MM-DD"),r.yesterday=moment().subtract(1,"day").format("YYYY-MM-DD"),r.lastYearFirstDay=moment().subtract(1,"year").startOf("year").format("YYYY-MM-DD"),r.lastYearLastDay=moment().subtract(1,"year").endOf("year").format("YYYY-MM-DD"),r.currentYearFirstDay=moment().startOf("year").format("YYYY-MM-DD"),r.currentYearLastDay=moment().endOf("year").format("YYYY-MM-DD"),r.last30Days=moment().subtract(30,"day").format("YYYY-MM-DD");var u=moment().format("YYYY-MM-DD");r.reportData.start=u,r.reportData.end=u,s.$watch("reportCtrl.reportData.start",function(e,t){var a=m.element("#end");_.isEmpty(e)?a.bootstrapMaterialDatePicker("setMinDate",""):a.bootstrapMaterialDatePicker("setMinDate",e)}),r.startDateUpdated=function(e){r.reportData.start=e,r.duration=10},r.endDateUpdated=function(e){r.reportData.start>r.reportData.end&&(r.reportData.end=e),r.reportData.end=e,r.duration=10},r.durationChange=function(e){1==e?(r.reportData.start=r.monthFirstDay,r.reportData.end=r.monthLastDay):2==e?(r.reportData.start=r.lastMonthFirstDay,r.reportData.end=r.lastMonthLastDay):3==e?(r.reportData.start=r.currentWeekFirstDay,r.reportData.end=r.currentWeekLastDay):4==e?(r.reportData.start=r.lastWeekFirstDay,r.reportData.end=r.lastWeekLastDay):5==e?(r.reportData.start=r.today,r.reportData.end=r.today):6==e?(r.reportData.start=r.yesterday,r.reportData.end=r.yesterday):7==e?(r.reportData.start=r.lastYearFirstDay,r.reportData.end=r.lastYearLastDay):8==e?(r.reportData.start=r.currentYearFirstDay,r.reportData.end=r.currentYearLastDay):9==e&&(r.reportData.start=r.last30Days,r.reportData.end=r.today)},r.durationChange(r.duration);var g=[{name:"order_uid",orderable:!0,template:"#orderColumnIdTemplate"},{name:"fname",orderable:!0,template:"#userNameColumnIdTemplate"},{name:"status",orderable:!0,template:"#orderStatusColumnIdTemplate"},{name:"formated_payment_status",orderable:!1},{name:"creation_date",orderable:!0,template:"#orderColumnTimeTemplate"},{name:"totalAmount",orderable:!0,template:"#orderColumnTotalAmountTemplate"},{name:null,template:"#orderActionColumnTemplate"}];r.getReportData=function(a){var e=0;"order_report"==p?e=r.reportData.status:"payment_report"==p&&(e=r.reportData.paymentStatus),i.fetch({apiURL:"manage.report.get.order_config_data",startDate:r.reportData.start,endDate:r.reportData.end,status:e,order:r.reportData.order}).success(function(t){o.processResponse(t,null,function(){var e=t.data;r.defaultCurrencyExist=e.defaultCurrencyExist,_.defer(function(){r.currencyList=e.currencyList,r.paymentCurrencyList=e.paymentCurrencyList}),_.defer(function(){_.isEmpty(a)||(r.reportData.select_currency=a),r.defaultCurrencyExist&&_.isEmpty(a)&&(r.reportData.select_currency=e.currentCurrency)}),r.statuses=__globals.generateKeyValueItems(e.orderConfigStatusItems),r.itemName=__ngSupport.getText(__globals.getJSString("status_array_item_in_report")),r.statuses.push({id:9,name:r.itemName}),r.paymentStatuses=__globals.generateKeyValueItems(e.payment_status),r.paymentStatuses.push({id:9,name:r.itemName}),r.orderList=__globals.generateKeyValueItems(e.orderConfigDateItems)})})},r.getReports=function(e,t){n.canAccess("manage.report.list")&&"order_report"==p&&(r.getReportData(t),_.isEmpty(l)&&_.isEmpty(c)||(l.destroy(),c.destroy()),r.reportListDataTable&&r.reportListDataTable.destroy(),r.reportListDataTable=i.dataTable("#manageReportList",{url:{apiURL:"manage.report.list",startDate:r.reportData.start,endDate:r.reportData.end,status:r.reportData.status,order:r.reportData.order,currency:t||null},dtOptions:{searching:!0},columnsData:g,scope:s},{fresh:!0},r.countData=function(e){r.tableStatus=e.data,r.totalAmounts=e._options.totalAmounts.orderAmountByType,r.reportExcelDownloadURL=e._options.excelDownloadURL,r.reportDuration=__globals.generateKeyValueItems(e._options.duration),r.orderReportData=e._options.orderReportData,r.orderPaymentData=e._options.orderPaymentData;var t=document.getElementById("lw-order-report-chart");l=o.createBarChart({elementId:t,type:"pie"},{data:r.orderReportData.orderData,labels:r.orderReportData.orderStatusLabel},{options:{responsive:!0,legend:{onClick:function(e){e.stopPropagation()}}}});var a=document.getElementById("lw-order-payment-chart");c=o.createBarChart({elementId:a,type:"pie"},{data:r.orderReportData.orderPaymentData,labels:r.orderReportData.orderPaymentLabel},{options:{responsive:!0,legend:{onClick:function(e){e.stopPropagation()}}}})}))},r.getReports(),r.getPaymentData=function(e){n.canAccess("manage.payment_report.list")&&"payment_report"==p&&(r.getReportData(),_.isEmpty(d)||d.destroy(),i.fetch({apiURL:"manage.payment_report.list",startDate:r.reportData.start,endDate:r.reportData.end,status:r.reportData.paymentStatus,order:r.reportData.order,currency:e||null}).success(function(a){_.isEmpty(e)||(r.reportData.select_currency=e),o.processResponse(a,null,function(){var e=a.data;r.excelDownloadURL=e.excelDownloadURL,r.reportDuration=__globals.generateKeyValueItems(e.duration),r.totalAmounts=e.orderAmountByType,r.paymentReportData=e.paymentReportChartData;var t=document.getElementById("lw-payment-report-bar-chart");_.isNull(t)||(d=o.createBarChart({elementId:t,type:"bar"},{data:r.paymentReportData.paymentChartDataSet,labels:r.paymentReportData.currencyLabel},{options:{responsive:!0,legend:{onClick:function(e){e.stopPropagation()}},scales:{xAxes:[{barPercentage:1.5,categoryPercentage:.1}]}}}))})}))},r.getPaymentData(),r.orderDetailsDialog=function(e){i.fetch({apiURL:"manage.order.details.dialog",orderID:e}).success(function(t){o.processResponse(t,null,function(){var e=t.data;o.showDialog({orderDetails:e.orderDetails},{templateUrl:__globals.getTemplateURL("report.manage.details-dialog")},function(e){})})})}}]).controller("OrderReportController",["$scope",function(e){var t=this;t.ngDialogData=e.ngDialogData;var a=t.ngDialogData.orderDetails.data;t.billingAddress=a.address.billingAddress,t.shippingAddress=a.address.shippingAddress,t.sameAddress=a.address.sameAddress,t.user=a.user,t.order=a.order,t.orderProducts=a.orderProducts,t.coupon=a.coupon,t.taxes=a.taxes,t.shipping=a.shipping,t.close=function(){e.closeThisDialog()}}]).controller("ProductReportListController",["$scope","__DataStore","$state","appServices","$rootScope","__Form",function(e,t,a,o,n,s){var i=[{name:"name",orderable:!0},{name:"created_at",orderable:!0,template:"#createDateColumnTemplate"},{name:"updated_at",orderable:!0,template:"#updateDateColumnTemplate"},{name:"testData",orderable:!0}],r=this,l=null;r.duration=8,(r=s.setup(r,"manage_product_report_list","productReportData")).productReportData.order=1,r.dateConfig={format:"YYYY-MM-DD",time:!1},r.monthFirstDay=moment().startOf("month").format("YYYY-MM-DD"),r.monthLastDay=moment().endOf("month").format("YYYY-MM-DD"),r.lastMonthFirstDay=moment().subtract(1,"months").startOf("month").format("YYYY-MM-DD"),r.lastMonthLastDay=moment().subtract(1,"months").endOf("month").format("YYYY-MM-DD"),r.currentWeekFirstDay=moment().startOf("week").format("YYYY-MM-DD"),r.currentWeekLastDay=moment().endOf("week").format("YYYY-MM-DD"),r.lastWeekFirstDay=moment().weekday(-7).format("YYYY-MM-DD"),r.lastWeekLastDay=moment().weekday(-1).format("YYYY-MM-DD"),r.today=moment().format("YYYY-MM-DD"),r.yesterday=moment().subtract(1,"day").format("YYYY-MM-DD"),r.lastYearFirstDay=moment().subtract(1,"year").startOf("year").format("YYYY-MM-DD"),r.lastYearLastDay=moment().subtract(1,"year").endOf("year").format("YYYY-MM-DD"),r.currentYearFirstDay=moment().startOf("year").format("YYYY-MM-DD"),r.currentYearLastDay=moment().endOf("year").format("YYYY-MM-DD"),r.last30Days=moment().subtract(30,"day").format("YYYY-MM-DD");var c=moment().format("YYYY-MM-DD");r.productReportData.start=c,r.productReportData.end=c,e.$watch("reportCtrl.productReportData.start",function(e,t){var a=m.element("#end");_.isEmpty(e)?a.bootstrapMaterialDatePicker("setMinDate",null):a.bootstrapMaterialDatePicker("setMinDate",e)}),r.startDateUpdated=function(e){r.productReportData.start=e,r.duration=10},r.endDateUpdated=function(e){r.productReportData.start>r.productReportData.end&&(r.productReportData.end=e),r.productReportData.end=e,r.duration=10},r.durationChange=function(e){1==e?(r.productReportData.start=r.monthFirstDay,r.productReportData.end=r.monthLastDay):2==e?(r.productReportData.start=r.lastMonthFirstDay,r.productReportData.end=r.lastMonthLastDay):3==e?(r.productReportData.start=r.currentWeekFirstDay,r.productReportData.end=r.currentWeekLastDay):4==e?(r.productReportData.start=r.lastWeekFirstDay,r.productReportData.end=r.lastWeekLastDay):5==e?(r.productReportData.start=r.today,r.productReportData.end=r.today):6==e?(r.productReportData.start=r.yesterday,r.productReportData.end=r.yesterday):7==e?(r.productReportData.start=r.lastYearFirstDay,r.productReportData.end=r.lastYearLastDay):8==e?(r.productReportData.start=r.currentYearFirstDay,r.productReportData.end=r.currentYearLastDay):9==e&&(r.productReportData.start=r.last30Days,r.productReportData.end=r.today)},r.durationChange(r.duration);var d=!1;r.getProductReportData=function(){_.isEmpty(l)||l.destroy(),r.productReportDataTable&&r.productReportDataTable.destroy(),r.productReportDataTable=t.dataTable("#lwProductReportList",{url:{apiURL:"manage.product_report.list",startDate:r.productReportData.start,endDate:r.productReportData.end,order:r.productReportData.order},dtOptions:{searching:!0},columnsData:i,scope:e},{fresh:!0},r.countData=function(e){_.isEmpty(l)||l.destroy(),r.reportDuration=__globals.generateKeyValueItems(e._options.duration),r.orderList=__globals.generateKeyValueItems(e._options.orderDateList),r.productChartData=e._options.productChartData,0==r.productChartData.productCount?$("#lw-chart-Area-Wrapper").removeClass("lw-chart-Area-Wrapper"):$("#lw-chart-Area-Wrapper").addClass("lw-chart-Area-Wrapper");var t=document.getElementById("lw-product-report-bar-chart");l=o.createBarChart({elementId:t,type:"bar"},{data:r.productChartData.chartData,labels:r.productChartData.labels},{options:{responsive:!0,legend:{display:!1,onClick:function(e){e.stopPropagation()}},scales:{xAxes:[{barPercentage:1.5,categoryPercentage:.1}]}}}),function(e){if(!d){for(var t=0;t<e;t++){var a=$(".lw-chart-wrapper").width()+60;$(".lw-chart-wrapper").width(a)}d=!0}}(10)})},r.getProductReportData(),r.reloadDT=function(){t.reloadDT(r.productReportDataTable)},e.$on("product_report_added_or_updated",function(e){e&&r.reloadDT()})}])}(window,window.angular),function(){"use strict";angular.module("UserApp.login",[]).controller("UserLoginController",["__Form","__Auth","appServices","__Utils","$scope",function(e,a,o,n,s){var i=this;(i=e.setup(i,"form_user_login","loginData",{secured:!0})).show_captcha=!1,i.request_completed=!1,i.guestLogin=!1,i.site_key=__globals.getAppImmutables("recaptcha_site_key"),_.has(s.ngDialogData,"guestOrder")&&1==s.ngDialogData.guestOrder&&(i.guestLogin=!0),e.fetch("user.login.attempts").success(function(t){o.processResponse(t,null,function(e){i.show_captcha=t.data.show_captcha,i.selectUser=t.data.selectUser,i.request_completed=!0})}),i.addUserData=function(e){e&&(i.loginData.email=i.selectUser[e].email,i.loginData.password=i.selectUser[e].password)},i.getCaptchaURL=function(){return n.apiURL("security.captcha")+"?ver="+Math.random()},i.refreshCaptcha=function(){i.captchaURL=i.getCaptchaURL()},i.captchaURL=i.getCaptchaURL(),i.submit=function(){i.isInActive=!1,e.process("user.login",i).success(function(e){var t=e.data;o.processResponse(e,{error:function(){i.show_captcha=t.show_captcha,i[i.ngFormModelName].password="",i.show_captcha&&(i[i.ngFormModelName].confirmation_code="",i.refreshCaptcha())},otherError:function(e){i.isInActive=t.isInActive,3==e?i.show_captcha&&i.refreshCaptcha():10==e&&t.auth_info.authorized&&(window.location=window.appConfig.appBaseURL)}},function(){a.checkIn(t.auth_info,function(){t.intendedUrl?__globals.redirectBrowser(t.intendedUrl):__globals.redirectBrowser(window.appConfig.appBaseURL)})})})},i.submitDialogLogin=function(){i.isInActive=!1,e.process("user.login",i).success(function(e){var t=e.data;o.processResponse(e,{error:function(){i.show_captcha=t.show_captcha,i[i.ngFormModelName].password="",i.show_captcha&&(i[i.ngFormModelName].confirmation_code="",i.refreshCaptcha())},otherError:function(e){i.isInActive=t.isInActive,3==e?i.show_captcha&&i.refreshCaptcha():10==e&&t.auth_info.authorized&&(window.location=window.appConfig.appBaseURL)}},function(){a.checkIn(t.auth_info,function(){1==i.guestLogin?__globals.redirectBrowser(n.apiURL("order.summary.view")):s.closeThisDialog({login_success:!0})})})})}}])}(),function(){"use strict";angular.module("UserApp.logout",[]).controller("UserLogoutController",["__DataStore","__Auth","appServices",function(e,a,o){e.post("user.logout").success(function(t){o.processResponse(t,function(e){a.checkIn(t.data.auth_info)})})}])}(),function(){"use strict";window.angular.module("ManageApp.RolePermissionDataServices",[]).service("RolePermissionDataService",["$q","__DataStore","appServices",function(t,o,n){this.getPermissions=function(e){var a=t.defer();return o.fetch({apiURL:"manage.user.role_permission.read",roleId:e}).success(function(t){n.processResponse(t,null,function(e){a.resolve(t.data)})}),a.promise},this.getAddSupportData=function(){var a=t.defer();return o.fetch("manage.user.role_permission.read.add_support_data").success(function(t){n.processResponse(t,null,function(e){a.resolve(t.data)})}),a.promise},this.getAllPermissionsById=function(e){var a=t.defer();return o.fetch({apiURL:"manage.user.role_permission.read.using_id",roleId:e}).success(function(t){n.processResponse(t,null,function(e){a.resolve(t.data)})}),a.promise}}])}(window),function(){"use strict";window.angular.module("ManageApp.RolePermissionEngine",[]).controller("RolePermissionController",["$scope","__DataStore","__Form","$stateParams",function(e,t,a,o){}]).controller("RolePermissionListController",["$scope","__DataStore","__Form","$state","appServices","$rootScope","RolePermissionDataService",function(e,o,t,a,n,s,i){var r=this;r.rolePermissionDataTable=o.dataTable("#lwrolePermissionList",{url:"manage.user.role_permission.read.list",dtOptions:{searching:!0,pageLength:25},columnsData:[{name:"title",orderable:!0},{name:null,template:"#rolePermissionActionColumnTemplate"}],scope:e}),r.reloadDT=function(){o.reloadDT(r.rolePermissionDataTable)},r.delete=function(e,t){var a=$("#lwRolePermissionDeleteTextMsg");__globals.showConfirmation({html:__globals.getReplacedString(a,"__name__",_.unescape(t)),confirmButtonText:a.attr("data-delete-button-text")},function(){o.post({apiURL:"manage.user.role_permission.write.delete",rolePermissionIdOrUid:e}).success(function(e){var t=e.data.message;n.processResponse(e,{error:function(e){__globals.showConfirmation({title:a.attr("data-error-text"),text:t,type:"error"})}},function(e){__globals.showConfirmation({title:a.attr("data-success-text"),text:t,type:"success"}),r.reloadDT()})})})},r.showAddNewDialog=function(){n.showDialog({},{templateUrl:__globals.getTemplateURL("user.role-permission.add-dialog"),controller:"AddRoleController as addRoleCtrl",resolve:{addSupportData:function(){return i.getAddSupportData()}}},function(e){_.has(e.value,"role_Added")&&!0===e.value.role_Added&&r.reloadDT()})},r.rolePermissionDialog=function(e,t){n.showDialog({roleId:e,title:_.unescape(t)},{templateUrl:__globals.getTemplateURL("user.role-permission.dynamic-role-permissions"),controller:"DynamicRolePermissionController as DynamicRolePermissionCtrl",resolve:{permissionData:function(){return i.getPermissions(e)}}},function(e){})}}]).controller("DynamicRolePermissionController",["$scope","__DataStore","__Form","$stateParams","appServices","permissionData",function(t,e,a,o,n,s){var i=this,r=t.ngDialogData,l=r.roleId;(i=a.setup(i,"user_role_dynamic_access","accessData",{secured:!0,unsecuredFields:[]})).title=r.title,i.permissions=s.permissions,i.accessData.allow_permissions=s.allow_permissions,i.accessData.deny_permissions=s.deny_permissions,i.checkedPermission={},i.disablePermissions=function(e,a){_.map(e.children,function(t){_.includes(t.dependencies,a)&&_.delay(function(e){$('input[name="'+t.id+'"]').attr("disabled",!0)},500)})},_.map(i.accessData.allow_permissions,function(e){i.checkedPermission[e]="2"}),_.map(i.accessData.deny_permissions,function(a){i.checkedPermission[a]="3",_.map(i.permissions,function(e){var t=_.pluck(e.children,"id");_.includes(t,a)&&i.disablePermissions(e,a),_.has(e,"children_permission_group")&&_.map(e.children_permission_group,function(e){var t=_.pluck(e.children,"id");_.includes(t,a)&&i.disablePermissions(e,a)})})}),(i=a.updateModel(i,i.accessData)).checkPermission=function(a,o){_.isString(o)||(o=o.toString()),"2"==(i.checkedPermission[a]=o)?(_.includes(i.accessData.allow_permissions,a)||i.accessData.allow_permissions.push(a),_.includes(i.accessData.deny_permissions,a)&&(i.accessData.deny_permissions=_.without(i.accessData.deny_permissions,a))):("3"==o?_.includes(i.accessData.deny_permissions,a)||i.accessData.deny_permissions.push(a):_.includes(i.accessData.deny_permissions,a)&&(i.accessData.deny_permissions=_.without(i.accessData.deny_permissions,a)),_.includes(i.accessData.allow_permissions,a)&&(i.accessData.allow_permissions=_.without(i.accessData.allow_permissions,a))),_.map(i.permissions,function(e){var t=_.pluck(e.children,"id");_.includes(t,a)&&e.children[0].id!=a||_.includes(t,a)&&e.children[0].id==a&&_.map(e.children,function(t){t.id!=e.children[0].id&&_.map(t.dependencies,function(e){_.includes(t.dependencies,a)&&"3"==o?$('input[name="'+t.id+'"]').attr("disabled",!0):$('input[name="'+t.id+'"]').attr("disabled",!1)})}),_.has(e,"children_permission_group")&&_.map(e.children_permission_group,function(e){var t=_.pluck(e.children,"id");_.includes(t,a)&&e.children[0].id!=a||_.includes(t,a)&&e.children[0].id==a&&_.map(e.children,function(t){t.id!=e.children[0].id&&_.map(t.dependencies,function(e){_.includes(t.dependencies,a)&&"3"==o?$('input[name="'+t.id+'"]').attr("disabled",!0):$('input[name="'+t.id+'"]').attr("disabled",!1)})})})})},i.submit=function(){a.process({apiURL:"manage.user.role_permission.write.create",roleId:l},i).success(function(e){n.processResponse(e,null,function(){t.closeThisDialog()})})},i.valueUpdated=function(t,e,a,o){_.forEach(i.accessData.permissions,function(e){e[0].name==t&&(2==e[0].allow?_.map(e,function(e){_.isEmpty(e.dependencies)||(e.disabled=!1)}):3==e[0].allow?_.map(e,function(e){_.isEmpty(e.dependencies)||(e.disabled=!0,e.allow=3)}):1==e[0].allow&&(e[0].currentStatus?_.map(e,function(e){_.isEmpty(e.dependencies)||(e.disabled=!1,e.allow=1)}):_.map(e,function(e){_.isEmpty(e.dependencies)||(e.disabled=!0,e.allow=1)})))})},i.closeDialog=function(){t.closeThisDialog()}}]).controller("AddRoleController",["$scope","__DataStore","__Form","$stateParams","addSupportData","appServices","RolePermissionDataService",function(t,e,a,o,n,s,i){var r=this;(r=a.setup(r,"add_role","roleData",{secured:!0,unsecuredFields:[]})).userRoles=n.userRoles,r.permissions=n.permissions,r.roleData.allow_permissions=[],r.roleData.deny_permissions=[],r.checkedPermission={},r.getPermissions=function(e){i.getAllPermissionsById(e).then(function(e){r.permissions=e.permissionData,r.roleData.selected_permissions=e.allowedData,r.roleData.allow_permissions=e.allow_permissions,r.roleData.deny_permissions=e.deny_permissions,r.checkedPermission={},_.map(r.roleData.allow_permissions,function(e){r.checkedPermission[e]="2"}),_.map(r.roleData.deny_permissions,function(e){r.checkedPermission[e]="3"})})},r.checkPermission=function(a,o){_.isString(o)||(o=o.toString()),"2"==(r.checkedPermission[a]=o)?(_.includes(r.roleData.allow_permissions,a)||r.roleData.allow_permissions.push(a),_.includes(r.roleData.deny_permissions,a)&&(r.roleData.deny_permissions=_.without(r.roleData.deny_permissions,a))):"3"==o&&(_.includes(r.roleData.deny_permissions,a)||r.roleData.deny_permissions.push(a),_.includes(r.roleData.allow_permissions,a)&&(r.roleData.allow_permissions=_.without(r.roleData.allow_permissions,a))),_.map(r.permissions,function(e){var t=_.pluck(e.children,"id");_.includes(t,a)&&e.children[0].id!=a||_.includes(t,a)&&e.children[0].id==a&&_.map(e.children,function(t){t.id!=e.children[0].id&&_.map(t.dependencies,function(e){_.includes(t.dependencies,a)&&"3"==o?$('input[name="'+t.id+'"]').attr("disabled",!0):$('input[name="'+t.id+'"]').attr("disabled",!1)})}),_.has(e,"children_permission_group")&&_.map(e.children_permission_group,function(e){var t=_.pluck(e.children,"id");_.includes(t,a)&&e.children[0].id!=a||_.includes(t,a)&&e.children[0].id==a&&_.map(e.children,function(t){t.id!=e.children[0].id&&_.map(t.dependencies,function(e){_.includes(t.dependencies,a)&&"3"==o?$('input[name="'+t.id+'"]').attr("disabled",!0):$('input[name="'+t.id+'"]').attr("disabled",!1)})})})})},r.submit=function(){a.process("manage.user.role_permission.write.role.create",r).success(function(e){s.processResponse(e,null,function(){t.closeThisDialog({role_Added:!0})})})},r.closeDialog=function(){t.closeThisDialog()}}])}(window),function(){"use strict";window.angular.module("ManageApp.specificationPresetList",[]).controller("SpecificationPresetListController",["$scope","__DataStore","$state","appServices","$rootScope",function(e,o,a,n,s){var i=this;i.specificationDataTable=o.dataTable("#lwSpecificationList",{url:"manage.specification_preset.read.list",dtOptions:{searching:!0},columnsData:[{name:"title",orderable:!0,template:"#specificationLabelColumnTemplate"},{name:null,template:"#specificationActionColumnTemplate"}],scope:e}),i.reloadDT=function(){o.reloadDT(i.specificationDataTable)},e.$on("specification_preset_added_or_updated",function(e){e&&i.reloadDT()}),i.showPresetDialog=function(e){o.fetch({apiURL:"manage.specification_preset.read.presetLabel",presetId:e}).success(function(e){var t=e.data;n.showDialog({presetData:t},{templateUrl:__globals.getTemplateURL("specification-preset.manage.preset-detail-dialog")},function(e){_.has(e.value,"specification_preset_added_or_updated")&&e.value.specification_preset_added_or_updated&&s.$broadcast("specification_preset_added_or_updated",!0),a.go("specificationsPreset")})})},i.delete=function(e,t){var a=$("#lwSpecificationPresetDeleteTextMsg");__globals.showConfirmation({html:__globals.getReplacedString(a,"__title__",_.unescape(t)),confirmButtonText:a.attr("data-delete-button-text")},function(){o.post({apiURL:"manage.specification_preset.write.delete",presetId:e}).success(function(e){var t=e.data.message;n.processResponse(e,{error:function(e){__globals.showConfirmation({title:a.attr("data-error-text"),text:t,type:"error"})}},function(e){__globals.showConfirmation({title:a.attr("data-success-text"),text:t,type:"success"}),i.reloadDT()})})})}}]).controller("PresetDetailController",["$scope","__DataStore","$state","appServices","$rootScope",function(e,t,a,o,n){this.ngDialogData=e.ngDialogData,this.presetData=this.ngDialogData.presetData.presetLabels,this.closeDialog=function(){e.closeThisDialog()}}]).controller("PresetAddDialogController",["$scope","__DataStore","__Form","$state","appServices","$rootScope",function(e,t,a,o,n,s){n.showDialog({},{templateUrl:__globals.getTemplateURL("specification-preset.manage.add-dialog")},function(e){_.has(e.value,"specification_preset_added_or_updated")&&e.value.specification_preset_added_or_updated&&s.$broadcast("specification_preset_added_or_updated",!0),o.go("specificationsPreset")})}]).controller("PresetAddController",["$scope","__DataStore","appServices","__Form",function(t,e,a,o){var n=this;n.showLoader=!0,(n=o.setup(n,"specification_preset_form","presetData")).presetData.specficationLabels=[{label:"",use_for_filter:!1}],n.addMoreRow=function(){n.presetData.specficationLabels.push({label:"",use_for_filter:!1})},n.removeRow=function(a){_.remove(n.presetData.specficationLabels,function(e,t){return a==t})},n.submit=function(){o.process("manage.specification_preset.write.add",n).success(function(e){a.processResponse(e,null,function(){t.closeThisDialog({specification_preset_added_or_updated:!0})})})},n.closeDialog=function(){t.closeThisDialog()}}]).controller("PresetEditDialogController",["$scope","__DataStore","__Form","$state","appServices","$rootScope",function(e,t,a,o,n,s){t.fetch({apiURL:"manage.specification_preset.read.editSupportadd",presetId:o.params.presetId}).success(function(e){var t=e.data;n.processResponse(e,null,function(){n.showDialog({presetData:t.presetData},{templateUrl:__globals.getTemplateURL("specification-preset.manage.edit-dialog")},function(e){_.has(e.value,"specification_preset_added_or_updated")&&e.value.specification_preset_added_or_updated&&s.$broadcast("specification_preset_added_or_updated",!0),o.go("specificationsPreset")})})})}]).controller("PresetEditController",["$scope","__DataStore","__Form","$state","appServices","$rootScope",function(t,a,e,o,n,s){var i=this,r=t.ngDialogData.presetData;i.showLoader=!0,i=e.setup(i,"preset_edit_form","presetEditData"),(i=e.updateModel(i,r)).showLoader=!1,i.addMoreRow=function(){i.presetEditData.specficationLabels.push({label:"",use_for_filter:!1})},i.removeRow=function(a){_.remove(i.presetEditData.specficationLabels,function(e,t){return a==t})},i.deleteSpecification=function(e,t){a.post({apiURL:"manage.specification_preset.specification.delete",specificationId:e}).success(function(e){n.processResponse(e,null,function(e){i.removeRow(t),s.$broadcast("specification_preset_added_or_updated",!0)})})},i.submit=function(){e.process({apiURL:"manage.specification_preset.write.update",presetId:r._id},i).success(function(e){n.processResponse(e,null,function(){t.closeThisDialog({specification_preset_added_or_updated:!0})})})},i.closeDialog=function(){t.closeThisDialog()}}])}(window),function(){"use strict";window.angular.module("ManageApp.ShippingTypeEngine",[]).controller("ShippingTypListController",["$scope","__DataStore","$state","appServices","$rootScope",function(e,o,t,n,a){var s=this;s.shippingTypeDataTable=o.dataTable("#lwShippingTypeList",{url:"manage.shipping_type.read.list",dtOptions:{searching:!0},columnsData:[{name:"title",orderable:!0},{name:"createdOn",orderable:!0,template:"#creationDateColumnTemplate"},{name:null,template:"#shippingTypeActionColumnTemplate"}],scope:e}),s.reloadDT=function(){o.reloadDT(s.shippingTypeDataTable)},e.$on("shipping_type_added_or_updated",function(e){e&&s.reloadDT()}),s.delete=function(e,t){var a=$("#lwShippingTypeDeleteTextMsg");__globals.showConfirmation({html:__globals.getReplacedString(a,"__title__",_.unescape(t)),confirmButtonText:a.attr("data-delete-button-text")},function(){o.post({apiURL:"manage.shipping_type.write.delete",shippingTypeId:e}).success(function(e){var t=e.data.message;n.processResponse(e,{error:function(e){__globals.showConfirmation({title:a.attr("data-error-text"),text:t,type:"error"})}},function(e){__globals.showConfirmation({title:a.attr("data-success-text"),text:t,type:"success"}),s.reloadDT()})})})}}]).controller("ShippingTypeAddDialogController",["$scope","__DataStore","__Form","$state","appServices","$rootScope",function(e,t,a,o,n,s){n.showDialog({},{templateUrl:__globals.getTemplateURL("shipping-type.manage.add")},function(e){_.has(e.value,"shipping_type_added_or_updated")&&e.value.shipping_type_added_or_updated&&s.$broadcast("shipping_type_added_or_updated",!0),o.go("shippingType")})}]).controller("ShippingTypeAddController",["$scope","__DataStore","appServices","__Form",function(t,e,a,o){var n=this;n.showLoader=!0,(n=o.setup(n,"shipping_type_form","shippingTypeData")).submit=function(){o.process("manage.shipping_type.write.create",n).success(function(e){a.processResponse(e,null,function(){t.closeThisDialog({shipping_type_added_or_updated:!0})})})},n.closeDialog=function(){t.closeThisDialog()}}]).controller("ShippingTypeEditDialogController",["$scope","__DataStore","__Form","$state","appServices","$rootScope",function(e,t,a,o,n,s){t.fetch({apiURL:"manage.shipping_type.read.update.data",shippingTypeId:o.params.shippingTypeId}).success(function(e){var t=e.data;n.processResponse(e,null,function(){n.showDialog({shippingTypeData:t.shippingTypeData},{templateUrl:__globals.getTemplateURL("shipping-type.manage.edit")},function(e){_.has(e.value,"shipping_type_added_or_updated")&&e.value.shipping_type_added_or_updated&&s.$broadcast("shipping_type_added_or_updated",!0),o.go("shippingType")})})})}]).controller("ShippingTypeEditController",["$scope","__DataStore","__Form","$state","appServices","$rootScope",function(t,e,a,o,n,s){var i=this,r=t.ngDialogData.shippingTypeData;i.showLoader=!0,i=a.setup(i,"shipping_type_edit_form","shippingTypeEditData"),(i=a.updateModel(i,r)).showLoader=!1,i.submit=function(){a.process({apiURL:"manage.shipping_type.write.update",shippingTypeId:r.id},i).success(function(e){n.processResponse(e,null,function(){t.closeThisDialog({shipping_type_added_or_updated:!0})})})},i.closeDialog=function(){t.closeThisDialog()}}])}(window),function(){"use strict";angular.module("ManageApp.transliterateDialog",[]).controller("TransliterateDialogController",["$scope","getTransliterateData","__Form","appServices","TransliterateDataServices","__DataStore","$http",function(e,t,a,n,o,s,i){var r=this,l=t,c=e.ngDialogData,d=c.entityType,p=c.entityId,u=c.entityKey;r.inputType=c.inputType,r.availableLocale=l.availableLocale,r.availableTransliterate=l.availableTransliterate,r.isDefaultLangEng=l.isDefaultLangEng,r.storeDefaultLanguage=l.storeDefaultLanguage,r.entityString=c.entityString,r.showAutoTransliterate=!1,r.showTranslateLink=!1,r.showError=!1,(r=a.setup(r,"form_transliterate_update","transliterateData")).getAutoTransliterate=function(e,t,a){t=t.substr(0,2);$.post("https://www.google.com/inputtools/request",{text:e,ime:"transliteration_en_"+t,num:5,cp:0,ie:"utf-8",oe:"utf-8",app:"jsapi"},function(e){"SUCCESS"==e[0]&&(r.transliterateData.translate_text=_.get(e,"1.0.1.0"),_.defer(function(){3!=a?(angular.element(".lw-translate-text").val(r.transliterateData.translate_text),angular.element(".lw-translate-text").trigger("input "),angular.element(".lw-translate-text").trigger("change")):angular.element(".lw-translate-text").trumbowyg("html",r.transliterateData.translate_text)}))})},r.getAutoTranslate=function(e,a,o){var t={string:e};a=a.substr(0,2);s.post("manage.transliterate.write.get_original_text",t).success(function(t){n.processResponse(t,null,function(){var e=t.data;$.post("https://translate.googleapis.com/translate_a/single",{client:"gtx",sl:r.storeDefaultLanguage,tl:a,dt:"t",q:e.originalText},function(e){if(2==o||3==o){var t="";_.forEach(e[0],function(e){t+=_.first(e)}),r.transliterateData.translate_text=t}else r.transliterateData.translate_text=_.get(e,"0.0.0");_.defer(function(){3!=o?(angular.element(".lw-translate-text").val(r.transliterateData.translate_text),angular.element(".lw-translate-text").trigger("input "),angular.element(".lw-translate-text").trigger("change")):angular.element(".lw-translate-text").trumbowyg("html",r.transliterateData.translate_text)})},"JSON").fail(function(e){r.showError=!0})})})},r.getTranslateData=function(e){if(r.showTranslateLink=!0,r.isDefaultLangEng&&3!=r.inputType){var t=e.substr(0,2);_.includes(r.availableTransliterate,t)?r.showAutoTransliterate=!0:r.showAutoTransliterate=!1}o.getTranslateDataViaLanguage(d,p,u,e).then(function(e){r.transliterateData.translate_text="",_.isEmpty(e.transliterateData.translate_text)||(r.transliterateData.translate_text=e.transliterateData.translate_text)})},r.update=function(){a.process({apiURL:"manage.transliterate.write.update",entityType:d,entityId:p,entityKey:u},r).success(function(e){n.processResponse(e,null,function(){r.transliterateData={}})})},r.closeDialog=function(){e.closeThisDialog()}}])}(),function(){"use strict";window.angular.module("ManageApp.TransliterateDataServices",[]).service("TransliterateDataServices",["$q","__DataStore","appServices",function(s,i,r){this.getTransliterateSupportData=function(e,t,a){var o=s.defer();return i.fetch({apiURL:"manage.transliterate.read.support_data",entityType:e,entityId:t,entityKey:a}).success(function(t){r.processResponse(t,null,function(e){o.resolve(t.data)})}),o.promise},this.getTranslateDataViaLanguage=function(e,t,a,o){var n=s.defer();return i.fetch({apiURL:"manage.transliterate.read.translate_data",entityType:e,entityId:t,entityKey:a,language:o}).success(function(t){r.processResponse(t,null,function(e){n.resolve(t.data)})}),n.promise}}])}(window);